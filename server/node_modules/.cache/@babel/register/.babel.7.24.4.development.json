{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = __importDefault(require(\"./routes/index\"));\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = __importDefault(require(\"./middlewares/express_error_yup\"));\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = __importDefault(require(\"./constants/constants_allowed_orginal\"));\nconst express_error_response_1 = __importDefault(require(\"./middlewares/express_error_response\"));\nconst express_error_sequelize_1 = __importDefault(require(\"./middlewares/express_error_sequelize\"));\nconst express_auto_handle_transaction_1 = __importDefault(require(\"./middlewares/express_auto_handle_transaction\"));\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.default\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set('views', path_1.default.join(`${__dirname}/../`, 'views'));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: '200mb',\n  type: 'application/json'\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, 'public')));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.default);\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', express_error_yup_1.default);\napp.use('/v1', express_error_sequelize_1.default);\napp.use('/v1', express_error_response_1.default);\napp.use(express_auto_handle_transaction_1.default);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19lcnJvcl9zZXF1ZWxpemVfMSIsImV4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb25fMSIsIm9wdENvcnMiLCJvcmlnaW4iLCJkZWZhdWx0IiwiYXBwIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJsaW1pdCIsInR5cGUiLCJzdGF0aWMiLCJleHByZXNzIiwibXciLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIiwibG9jYWxzIiwibWVzc2FnZSIsImVycm9yIiwiZ2V0Iiwic3RhdHVzIiwicmVuZGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvYXBwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgaHBwIGZyb20gJ2hwcCc7XG5pbXBvcnQgY29ycyBmcm9tICdjb3JzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IHJlcXVlc3RJcCBmcm9tICdyZXF1ZXN0LWlwJztcbmltcG9ydCBjb21wcmVzc2lvbiBmcm9tICdjb21wcmVzc2lvbic7XG5pbXBvcnQgY3JlYXRlRXJyb3IgZnJvbSAnaHR0cC1lcnJvcnMnO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBpbmRleFJvdXRlciBmcm9tICcuL3JvdXRlcy9pbmRleCc7XG5pbXBvcnQgdXNlckFnZW50IGZyb20gJ2V4cHJlc3MtdXNlcmFnZW50JztcbmltcG9ydCBFeHByZXNzRXJyb3JZdXAgZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3l1cCc7XG5pbXBvcnQgZXhwcmVzcywgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgYWxsb3dlZE9yaWdpbnMgZnJvbSAnLi9jb25zdGFudHMvY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbCc7XG5pbXBvcnQgRXhwcmVzc0Vycm9yUmVzcG9uc2UgZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3Jlc3BvbnNlJztcbmltcG9ydCBFeHByZXNzRXJyb3JTZXF1ZWxpemUgZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3NlcXVlbGl6ZSc7XG5pbXBvcnQgRXhwcmVzc0F1dG9IYW5kbGVUcmFuc2FjdGlvbiBmcm9tICcuL21pZGRsZXdhcmVzL2V4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb24nO1xuXG4vLyBUT0RPOiBjaGFuZ2UgdG8gLnRzXG5jb25zdCBvcHRDb3JzOiBjb3JzLkNvcnNPcHRpb25zID0ge1xuICBvcmlnaW46IGFsbG93ZWRPcmlnaW5zLFxufVxuY29uc3QgYXBwID0gZXhwcmVzcygpXG5cbi8vIHZpZXcgZW5naW5lIHNldHVwXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsICd2aWV3cycpKVxuLy8gYXBwLnNldCgndmlldyBlbmdpbmUnLCAncHVnJylcblxuYXBwLnVzZShoZWxtZXQoKSlcbmFwcC51c2UoY29ycyhvcHRDb3JzKSlcbi8vIGFwcC51c2UobG9nZ2VyKCdjb21iaW5lZCcsIHsgc3RyZWFtOiB3aW5zdG9uU3RyZWFtIH0pKVxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpIC8vIFRPRE8gOiAgY2hlY2sgaXQgc2hvdWxkIGJlIGZhbHNlIG9yIHRydWVcbmFwcC51c2UoXG4gIGV4cHJlc3MuanNvbih7XG4gICAgbGltaXQ6ICcyMDBtYicsXG4gICAgdHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICB9KVxuKVxuYXBwLnVzZShjb29raWVQYXJzZXIoKSlcbmFwcC51c2UoY29tcHJlc3Npb24oKSlcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMocGF0aC5qb2luKGAke19fZGlybmFtZX0vLi4vYCwgJ3B1YmxpYycpKSlcbmFwcC51c2UoaHBwKCkpXG5hcHAudXNlKHVzZXJBZ2VudC5leHByZXNzKCkpXG5hcHAudXNlKHJlcXVlc3RJcC5tdygpKVxuLy8gVE9ETyA6IGFkZCB0aGlzIGxhdGVyXG5cblxuLy8gSW5pdGlhbCBSb3V0ZVxuYXBwLnVzZShpbmRleFJvdXRlcilcblxuLy8gYXBwLnVzZSgnL3YxJywgaGFuZGxlUm9sbGJhY2tUcmFuc2FjdGlvbilcbmFwcC51c2UoJy92MScsIEV4cHJlc3NFcnJvcll1cClcbmFwcC51c2UoJy92MScsIEV4cHJlc3NFcnJvclNlcXVlbGl6ZSlcbmFwcC51c2UoJy92MScsIEV4cHJlc3NFcnJvclJlc3BvbnNlKVxuYXBwLnVzZShFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKVxuXG4vLyBjYXRjaCA0MDQgYW5kIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlclxuYXBwLnVzZShmdW5jdGlvbiAocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBOZXh0RnVuY3Rpb24pIHtcbiAgbmV4dChjcmVhdGVFcnJvcig0MDQpKVxufSlcblxuLy8gZXJyb3IgaGFuZGxlclxuYXBwLnVzZShmdW5jdGlvbiAoZXJyOiBhbnksIHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlXG4gIHJlcy5sb2NhbHMuZXJyb3IgPSByZXEuYXBwLmdldCgnZW52JykgPT09ICdkZXZlbG9wbWVudCcgPyBlcnIgOiB7fVxuXG4gIC8vIHJlbmRlciB0aGUgZXJyb3IgcGFnZVxuICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKVxuICByZXMucmVuZGVyKCdlcnJvcicpXG59KVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcFxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQSxNQUFBQSxLQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsTUFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRyxRQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFJLFlBQUEsR0FBQUwsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUssYUFBQSxHQUFBTixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBTSxhQUFBLEdBQUFQLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFPLGVBQUEsR0FBQVIsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQVEsT0FBQSxHQUFBVCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBUyxtQkFBQSxHQUFBVixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBVSxtQkFBQSxHQUFBWCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBVyxTQUFBLEdBQUFaLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFZLDJCQUFBLEdBQUFiLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFhLHdCQUFBLEdBQUFkLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFjLHlCQUFBLEdBQUFmLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFlLGlDQUFBLEdBQUFoQixlQUFBLENBQUFDLE9BQUE7QUFFQTtBQUNBLE1BQU1nQixPQUFPLEdBQXFCO0VBQ2hDQyxNQUFNLEVBQUVMLDJCQUFBLENBQUFNO0NBQ1Q7QUFDRCxNQUFNQyxHQUFHLEdBQUcsSUFBQVIsU0FBQSxDQUFBTyxPQUFPLEdBQUU7QUFFckI7QUFDQUMsR0FBRyxDQUFDQyxHQUFHLENBQUMsT0FBTyxFQUFFbEIsTUFBQSxDQUFBZ0IsT0FBSSxDQUFDRyxJQUFJLENBQUMsR0FBR0MsU0FBUyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDeEQ7QUFFQUgsR0FBRyxDQUFDSSxHQUFHLENBQUMsSUFBQXBCLFFBQUEsQ0FBQWUsT0FBTSxHQUFFLENBQUM7QUFDakJDLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDLElBQUF0QixNQUFBLENBQUFpQixPQUFJLEVBQUNGLE9BQU8sQ0FBQyxDQUFDO0FBQ3RCO0FBQ0FHLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDWixTQUFBLENBQUFPLE9BQU8sQ0FBQ00sVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUUsQ0FBQyxDQUFDLEVBQUM7QUFDakROLEdBQUcsQ0FBQ0ksR0FBRyxDQUNMWixTQUFBLENBQUFPLE9BQU8sQ0FBQ1EsSUFBSSxDQUFDO0VBQ1hDLEtBQUssRUFBRSxPQUFPO0VBQ2RDLElBQUksRUFBRTtDQUNQLENBQUMsQ0FDSDtBQUNEVCxHQUFHLENBQUNJLEdBQUcsQ0FBQyxJQUFBaEIsZUFBQSxDQUFBVyxPQUFZLEdBQUUsQ0FBQztBQUN2QkMsR0FBRyxDQUFDSSxHQUFHLENBQUMsSUFBQWxCLGFBQUEsQ0FBQWEsT0FBVyxHQUFFLENBQUM7QUFDdEJDLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDWixTQUFBLENBQUFPLE9BQU8sQ0FBQ1csTUFBTSxDQUFDM0IsTUFBQSxDQUFBZ0IsT0FBSSxDQUFDRyxJQUFJLENBQUMsR0FBR0MsU0FBUyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUNoRUgsR0FBRyxDQUFDSSxHQUFHLENBQUMsSUFBQXpCLEtBQUEsQ0FBQW9CLE9BQUcsR0FBRSxDQUFDO0FBQ2RDLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDZCxtQkFBQSxDQUFBUyxPQUFTLENBQUNZLE9BQU8sRUFBRSxDQUFDO0FBQzVCWCxHQUFHLENBQUNJLEdBQUcsQ0FBQ25CLFlBQUEsQ0FBQWMsT0FBUyxDQUFDYSxFQUFFLEVBQUUsQ0FBQztBQUN2QjtBQUdBO0FBQ0FaLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDZixPQUFBLENBQUFVLE9BQVcsQ0FBQztBQUVwQjtBQUNBQyxHQUFHLENBQUNJLEdBQUcsQ0FBQyxLQUFLLEVBQUViLG1CQUFBLENBQUFRLE9BQWUsQ0FBQztBQUMvQkMsR0FBRyxDQUFDSSxHQUFHLENBQUMsS0FBSyxFQUFFVCx5QkFBQSxDQUFBSSxPQUFxQixDQUFDO0FBQ3JDQyxHQUFHLENBQUNJLEdBQUcsQ0FBQyxLQUFLLEVBQUVWLHdCQUFBLENBQUFLLE9BQW9CLENBQUM7QUFDcENDLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDUixpQ0FBQSxDQUFBRyxPQUE0QixDQUFDO0FBRXJDO0FBQ0FDLEdBQUcsQ0FBQ0ksR0FBRyxDQUFDLFVBQVVTLEdBQVksRUFBRUMsR0FBYSxFQUFFQyxJQUFrQjtFQUMvREEsSUFBSSxDQUFDLElBQUE1QixhQUFBLENBQUFZLE9BQVcsRUFBQyxHQUFHLENBQUMsQ0FBQztBQUN4QixDQUFDLENBQUM7QUFFRjtBQUNBQyxHQUFHLENBQUNJLEdBQUcsQ0FBQyxVQUFVWSxHQUFRLEVBQUVILEdBQVksRUFBRUMsR0FBYSxFQUFFQyxJQUFrQjtFQUN6RTtFQUNBRCxHQUFHLENBQUNHLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHRixHQUFHLENBQUNFLE9BQU87RUFDaENKLEdBQUcsQ0FBQ0csTUFBTSxDQUFDRSxLQUFLLEdBQUdOLEdBQUcsQ0FBQ2IsR0FBRyxDQUFDb0IsR0FBRyxDQUFDLEtBQUssQ0FBQyxLQUFLLGFBQWEsR0FBR0osR0FBRyxHQUFHLEVBQUU7RUFFbEU7RUFDQUYsR0FBRyxDQUFDTyxNQUFNLENBQUNMLEdBQUcsQ0FBQ0ssTUFBTSxJQUFJLEdBQUcsQ0FBQztFQUM3QlAsR0FBRyxDQUFDUSxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ3JCLENBQUMsQ0FBQztBQUVGQyxNQUFNLENBQUNDLE9BQU8sR0FBR3hCLEdBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_error_sequelize_1","express_auto_handle_transaction_1","optCors","origin","default","app","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","req","res","next","err","locals","message","error","get","status","render","module","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\","sources":["D:/My-projects/user-information/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport hpp from 'hpp';\nimport cors from 'cors';\nimport path from 'path';\nimport helmet from 'helmet';\nimport requestIp from 'request-ip';\nimport compression from 'compression';\nimport createError from 'http-errors';\nimport cookieParser from 'cookie-parser';\nimport indexRouter from './routes/index';\nimport userAgent from 'express-useragent';\nimport ExpressErrorYup from './middlewares/express_error_yup';\nimport express, { NextFunction, Request, Response } from 'express';\nimport allowedOrigins from './constants/constants_allowed_orginal';\nimport ExpressErrorResponse from './middlewares/express_error_response';\nimport ExpressErrorSequelize from './middlewares/express_error_sequelize';\nimport ExpressAutoHandleTransaction from './middlewares/express_auto_handle_transaction';\n\n// TODO: change to .ts\nconst optCors: cors.CorsOptions = {\n  origin: allowedOrigins,\n}\nconst app = express()\n\n// view engine setup\napp.set('views', path.join(`${__dirname}/../`, 'views'))\n// app.set('view engine', 'pug')\n\napp.use(helmet())\napp.use(cors(optCors))\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express.urlencoded({ extended: false })) // TODO :  check it should be false or true\napp.use(\n  express.json({\n    limit: '200mb',\n    type: 'application/json',\n  })\n)\napp.use(cookieParser())\napp.use(compression())\napp.use(express.static(path.join(`${__dirname}/../`, 'public')))\napp.use(hpp())\napp.use(userAgent.express())\napp.use(requestIp.mw())\n// TODO : add this later\n\n\n// Initial Route\napp.use(indexRouter)\n\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', ExpressErrorYup)\napp.use('/v1', ExpressErrorSequelize)\napp.use('/v1', ExpressErrorResponse)\napp.use(ExpressAutoHandleTransaction)\n\n// catch 404 and forward to error handler\napp.use(function (req: Request, res: Response, next: NextFunction) {\n  next(createError(404))\n})\n\n// error handler\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\n  // set locals, only providing error in development\n  res.locals.message = err.message\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\n\n  // render the error page\n  res.status(err.status || 500)\n  res.render('error')\n})\n\nmodule.exports = app\n"],"mappings":"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","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = __importDefault(require(\"./public\"));\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nconst router = express_1.default.Router();\n/* Home Page. */\nrouter.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To BeED Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nrouter.get('/v1', function (req, res, next) {\n  throw new response_error_1.default.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nrouter.use('/v1', public_1.default);\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwicm91dGVyIiwiZGVmYXVsdCIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJzZW5kIiwiRm9yYmlkZGVuIiwidXNlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xccm91dGVzXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9yb3V0ZXMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHB1YmxpY1JvdXRlIGZyb20gJy4vcHVibGljJztcbmltcG9ydCBSZXNwb25zZUVycm9yIGZyb20gJy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3InO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKiBIb21lIFBhZ2UuICovXG5yb3V0ZXIuZ2V0KCcvJywgZnVuY3Rpb24gKHJlcSwgcmVzLCBuZXh0KSB7XG5cbiAgICByZXR1cm4gcmVzLnNlbmQoYDxoMT5XZWxjb21lIFRvIEJlRUQgU3VwcG9ydCBDZW50ZXIgc2VydmVyPC9oMT48YnIvPjxici8+XG4gICAgICAgICAgICAgICAgICAgIDxoMz5GaW5kIEFwaSBkb2NzIEhlcmUgOjwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxoMz48YT4vdjEvYXBpLWRvY3M8L2E+PC9oMz5gKVxuICB9KVxuXG4vKiBGb3JiaWRkZW4gUGFnZS4gKi9cbnJvdXRlci5nZXQoJy92MScsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCApIHtcbiAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Gb3JiaWRkZW4oJ2ZvcmJpZGRlbiwgd3JvbmcgYWNjZXNzIGVuZHBvaW50JylcbiAgfSlcblxuLyogRGVjbGFyZSBSb3V0ZSAqL1xucm91dGVyLnVzZSgnL3YxJywgcHVibGljUm91dGUpXG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlclxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxTQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsZ0JBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUcsTUFBTSxHQUFHTCxTQUFBLENBQUFNLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRS9CO0FBQ0FGLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUVwQyxPQUFPRCxHQUFHLENBQUNFLElBQUksQ0FBQzs7aURBRTZCLENBQUM7QUFDaEQsQ0FBQyxDQUFDO0FBRUo7QUFDQVAsTUFBTSxDQUFDRyxHQUFHLENBQUMsS0FBSyxFQUFFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJO0VBQ3RDLE1BQU0sSUFBSVAsZ0JBQUEsQ0FBQUUsT0FBYSxDQUFDTyxTQUFTLENBQUMsa0NBQWtDLENBQUM7QUFDdkUsQ0FBQyxDQUFDO0FBRUo7QUFDQVIsTUFBTSxDQUFDUyxHQUFHLENBQUMsS0FBSyxFQUFFWCxRQUFBLENBQUFHLE9BQVcsQ0FBQztBQUU5QlMsT0FBQSxDQUFBVCxPQUFBLEdBQWVELE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","router","default","Router","get","req","res","next","send","Forbidden","use","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\routes\\","sources":["D:/My-projects/user-information/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\nimport publicRoute from './public';\nimport ResponseError from '../modules/error/response_error';\n\nconst router = express.Router();\n\n/* Home Page. */\nrouter.get('/', function (req, res, next) {\n\n    return res.send(`<h1>Welcome To BeED Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`)\n  })\n\n/* Forbidden Page. */\nrouter.get('/v1', function (req, res, next ) {\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\n  })\n\n/* Declare Route */\nrouter.use('/v1', publicRoute)\n\nexport default router\n\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,gBAAA,GAAAH,eAAA,CAAAC,OAAA;AAEA,MAAMG,MAAM,GAAGL,SAAA,CAAAM,OAAO,CAACC,MAAM,EAAE;AAE/B;AACAF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAP,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIP,gBAAA,CAAAE,OAAa,CAACO,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAR,MAAM,CAACS,GAAG,CAAC,KAAK,EAAEX,QAAA,CAAAG,OAAW,CAAC;AAE9BS,OAAA,CAAAT,OAAA,GAAeD,MAAM","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_1 = __importDefault(require(\"express\"));\nconst router = express_1.default.Router();\nexports.default = router;\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/customers/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicm91dGVyIiwiZGVmYXVsdCIsIlJvdXRlciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvcm91dGVzL3B1YmxpYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG5cbi8vICBBUElzXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hdXRoL2NvbnRyb2xsZXJcIik7XG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci91c2VyL2NvbnRyb2xsZXJcIik7XG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9uYXYtaXRlbXMvY29udHJvbGxlclwiKTtcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FwcG9pbnRtZW50L2NvbnRyb2xsZXJcIik7XG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9jdXN0b21lcnMvY29udHJvbGxlclwiKTtcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FkbWluL2NvbnRyb2xsZXJcIik7XG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9wYXRpZW50cy9jb250cm9sbGVyXCIpO1xuXG5cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLFNBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsTUFBTSxHQUFHSCxTQUFBLENBQUFJLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFO0FBRS9CQyxPQUFBLENBQUFGLE9BQUEsR0FBZUQsTUFBTTtBQUVyQjtBQUNBRCxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDeENBLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUN4Q0EsT0FBTyxDQUFDLG9DQUFvQyxDQUFDO0FBQzdDQSxPQUFPLENBQUMsc0NBQXNDLENBQUM7QUFDL0NBLE9BQU8sQ0FBQyxvQ0FBb0MsQ0FBQztBQUM3Q0EsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3pDQSxPQUFPLENBQUMsbUNBQW1DLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","router","default","Router","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\routes\\","sources":["D:/My-projects/user-information/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\n\nconst router = express.Router();\n\nexport default router;\n\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/customers/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\n\n\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,MAAM,GAAGH,SAAA,CAAAI,OAAO,CAACC,MAAM,EAAE;AAE/BC,OAAA,CAAAF,OAAA,GAAeD,MAAM;AAErB;AACAD,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC","ignoreList":[]}},"mtime":1722156938855},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = __importDefault(require(\"./service\"));\npublic_1.default.post(`/auth/sign-up`, function signUp(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.signUp(formData);\n    const buildResponse = app_response_1.default.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\npublic_1.default.post(\"/auth/sign-in\", function signIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.signIn(formData);\n    const buildResponse = yield app_response_1.default.get(data);\n    if (buildResponse.statusCode === 400) {\n      res.status(buildResponse.statusCode).json(buildResponse);\n    } else {\n      res.json(buildResponse);\n    }\n  });\n});\n// routes.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsImRlZmF1bHQiLCJwb3N0Iiwic2lnblVwIiwicmVxIiwicmVzIiwiZm9ybURhdGEiLCJib2R5IiwiZGF0YSIsImJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsInNpZ25JbiIsInN0YXR1c0NvZGUiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IEF1dGhTZXJ2aWNlIGZyb20gXCIuL3NlcnZpY2VcIjtcblxucm91dGVzLnBvc3QoXG4gIGAvYXV0aC9zaWduLXVwYCxcbiAgYXN5bmMgZnVuY3Rpb24gc2lnblVwKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEF1dGhTZXJ2aWNlLnNpZ25VcChmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9XG4pO1xuXG5yb3V0ZXMucG9zdChcbiAgXCIvYXV0aC9zaWduLWluXCIsXG4gIGFzeW5jIGZ1bmN0aW9uIHNpZ25JbihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5zaWduSW4oZm9ybURhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZS5zdGF0dXNDb2RlID09PSA0MDApIHtcbiAgICAgIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5zdGF0dXNDb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH1cbik7XG5cbi8vIHJvdXRlcy5wb3N0KFxuLy8gICBgL2F1dGgvcmVmcmVzaC10b2tlbmAsXG4vLyAgIEF1dGhvcml6YXRpb24sXG4vLyAgIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhdXRoUmVmcmVzaFRva2VuKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuLy8gICAgIGNvbnN0IHsgZW1haWwsIHJlZnJlc2hUb2tlbiB9ID0gcmVxLmJvZHkoKTtcbi8vICAgfSlcbi8vICk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxjQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsU0FBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFFQUMsUUFBQSxDQUFBRSxPQUFNLENBQUNDLElBQUksQ0FDVCxlQUFlLEVBQ2YsU0FBZUMsTUFBTUEsQ0FBQ0MsR0FBWSxFQUFFQyxHQUFhOztJQUMvQyxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVIsU0FBQSxDQUFBQyxPQUFXLENBQUNFLE1BQU0sQ0FBQ0csUUFBUSxDQUFDO0lBQy9DLE1BQU1HLGFBQWEsR0FBR2IsY0FBQSxDQUFBSyxPQUFhLENBQUNTLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDO0lBQzdDSCxHQUFHLENBQUNNLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDRyxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSixhQUFhLENBQUM7RUFDcEQsQ0FBQztDQUFBLENBQ0Y7QUFFRFYsUUFBQSxDQUFBRSxPQUFNLENBQUNDLElBQUksQ0FDVCxlQUFlLEVBQ2YsU0FBZVksTUFBTUEsQ0FBQ1YsR0FBWSxFQUFFQyxHQUFhOztJQUMvQyxNQUFNQyxRQUFRLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVIsU0FBQSxDQUFBQyxPQUFXLENBQUNhLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDO0lBQy9DLE1BQU1HLGFBQWEsR0FBRyxNQUFNYixjQUFBLENBQUFLLE9BQWEsQ0FBQ1MsR0FBRyxDQUFDRixJQUFJLENBQUM7SUFDbkQsSUFBSUMsYUFBYSxDQUFDTSxVQUFVLEtBQUssR0FBRyxFQUFFO01BQ3BDVixHQUFHLENBQUNNLE1BQU0sQ0FBQ0YsYUFBYSxDQUFDTSxVQUFVLENBQUMsQ0FBQ0YsSUFBSSxDQUFDSixhQUFhLENBQUM7SUFDMUQsQ0FBQyxNQUFNO01BQ0xKLEdBQUcsQ0FBQ1EsSUFBSSxDQUFDSixhQUFhLENBQUM7SUFDekI7RUFDRixDQUFDO0NBQUEsQ0FDRjtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["app_response_1","__importDefault","require","public_1","service_1","default","post","signUp","req","res","formData","body","data","buildResponse","get","status","code","json","signIn","statusCode"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/My-projects/user-information/server/src/controller/auth/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport AuthService from \"./service\";\n\nroutes.post(\n  `/auth/sign-up`,\n  async function signUp(req: Request, res: Response) {\n    const formData = req.body;\n    const data = await AuthService.signUp(formData);\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n\nroutes.post(\n  \"/auth/sign-in\",\n  async function signIn(req: Request, res: Response) {\n    const formData = req.body;\n    const data = await AuthService.signIn(formData);\n    const buildResponse = await BuildResponse.get(data);\n    if (buildResponse.statusCode === 400) {\n      res.status(buildResponse.statusCode).json(buildResponse);\n    } else {\n      res.json(buildResponse);\n    }\n  }\n);\n\n// routes.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,cAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAC,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,eAAe,EACf,SAAeC,MAAMA,CAACC,GAAY,EAAEC,GAAa;;IAC/C,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAW,CAACE,MAAM,CAACG,QAAQ,CAAC;IAC/C,MAAMG,aAAa,GAAGb,cAAA,CAAAK,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7CH,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF;AAEDV,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,eAAe,EACf,SAAeY,MAAMA,CAACV,GAAY,EAAEC,GAAa;;IAC/C,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAW,CAACa,MAAM,CAACR,QAAQ,CAAC;IAC/C,MAAMG,aAAa,GAAG,MAAMb,cAAA,CAAAK,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IACnD,IAAIC,aAAa,CAACM,UAAU,KAAK,GAAG,EAAE;MACpCV,GAAG,CAACM,MAAM,CAACF,aAAa,CAACM,UAAU,CAAC,CAACF,IAAI,CAACJ,aAAa,CAAC;IAC1D,CAAC,MAAM;MACLJ,GAAG,CAACQ,IAAI,CAACJ,aAAa,CAAC;IACzB;EACF,CAAC;CAAA,CACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.default = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xccmVzcG9uc2VcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xuXG50eXBlIERhdGFSZXNwb25zZSA9XG4gIHwge1xuICAgICAgbWVzc2FnZTogc3RyaW5nO1xuICAgICAgY29kZT86IG51bWJlcjtcbiAgICB9XG4gIHwgYW55O1xuXG5jbGFzcyBCdWlsZFJlc3BvbnNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgYmFzZVJlc3BvbnNlKGRhdGFSZXNwb25zZTogRGF0YVJlc3BvbnNlKSB7XG4gICAgY29uc3Qge1xuICAgICAgbWVzc2FnZSA9IFwiZGF0YSBoYXMgYmVlbiByZWNlaXZlZCFcIixcbiAgICAgIGNvZGUgPSAyMDAsXG4gICAgICAuLi5yZXN0XG4gICAgfSA9IGRhdGFSZXNwb25zZTtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZSxcbiAgICAgIG1lc3NhZ2UsXG4gICAgICAuLi5yZXN0LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVzcG9uc2UgU3VjY2Vzc1xuICAgKi9cblxuICBwdWJsaWMgc3RhdGljIGdldChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZShkYXRhUmVzcG9uc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIENyZWF0ZVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjcmVhdGVkKGRhdGFSZXNwb25zZTogRGF0YVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKHtcbiAgICAgIGNvZGRlOiAyMDEsXG4gICAgICBtZXNzYWdlOiBcImRhdGEgaGFzIGJlZWQgYWRkZWRcIixcbiAgICAgIC4uLmRhdGFSZXNwb25zZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBVcGRhdGVcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyB1cGRhdGVkKGRhdGFSZXNwb25zZTogRGF0YVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKHtcbiAgICAgIG1lc3NhZ2U6IFwidGhlIGRhdGEgaGFzIGJlZWQgdXBkYXRlZFwiLFxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIERlbGV0ZVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBkZWxldGVkKGRhdGFSZXNwb25zZTogRGF0YVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlc3BvbnNlKHtcbiAgICAgIG1lc3NhZ2U6IFwiZGF0YSBoYXMgYmVlbiBkZWxldGVkXCIsXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFwcFJlc3BvbnNlKGRhdGE6IGFueSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlOiBkYXRhLmNvZGUgPyBkYXRhLmNvZGUgOiAyMDAsXG4gICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UgPyBkYXRhLm1lc3NhZ2UgOiBcIlwiLFxuICAgICAgc3RhdHVzOiBkYXRhLnN0YXR1cyA/IGRhdGEuc3RhdHVzIDogMCxcbiAgICAgIHNob3dUb1VzZXI6IGRhdGEuc2hvd1RvVXNlciA/IGRhdGEuc2hvd1RvVXNlciA6IGZhbHNlLFxuICAgICAgbWVzc2FnZUNvZGU6IGRhdGEubWVzc2FnZUNvZGUgPyBkYXRhLm1lc3NhZ2VDb2RlIDogXCJcIixcbiAgICAgIG1lc3NhZ2VLaW5kOiBkYXRhLm1lc3NhZ2VLaW5kID8gZGF0YS5tZXNzYWdlS2luZCA6IG51bGwsXG4gICAgICBpc1N1Y2Nlc3NmdWxsOiBkYXRhLmlzU3VjY2Vzc2Z1bGwgPyBkYXRhLmlzU3VjY2Vzc2Z1bGwgOiBmYWxzZSxcbiAgICAgIGRhdGE6IGRhdGEuZGF0YSA/IGRhdGEuZGF0YSA6IG51bGwsXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCdWlsZFJlc3BvbnNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBU0EsTUFBTUEsYUFBYTtFQUNULE9BQU9DLFlBQVlBLENBQUNDLFlBQTBCO0lBQ3BELE1BQU07UUFDSkMsT0FBTyxHQUFHLHlCQUF5QjtRQUNuQ0MsSUFBSSxHQUFHO01BQUcsSUFFUkYsWUFBWTtNQURYRyxJQUFJLEdBQUFDLE1BQUEsQ0FDTEosWUFBWSxFQUpWLG1CQUlMLENBQWU7SUFDaEIsT0FBQUssTUFBQSxDQUFBQyxNQUFBO01BQ0VKLElBQUk7TUFDSkQ7SUFBTyxHQUNKRSxJQUFJO0VBRVg7RUFFQTs7O0VBSU8sT0FBT0ksR0FBR0EsQ0FBQ1AsWUFBMEI7SUFDMUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQ0MsWUFBWSxDQUFDO0VBQ3hDO0VBRUE7OztFQUdPLE9BQU9RLE9BQU9BLENBQUNSLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkcsS0FBSyxFQUFFLEdBQUc7TUFDVlIsT0FBTyxFQUFFO0lBQXFCLEdBQzNCRCxZQUFZLEVBQ2Y7RUFDSjtFQUVBOzs7RUFJTyxPQUFPVSxPQUFPQSxDQUFDVixZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJMLE9BQU8sRUFBRTtJQUEyQixHQUNqQ0QsWUFBWSxFQUNmO0VBQ0o7RUFFQTs7O0VBR08sT0FBT1csT0FBT0EsQ0FBQ1gsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCTCxPQUFPLEVBQUU7SUFBdUIsR0FDN0JELFlBQVksRUFDZjtFQUNKO0VBRU8sT0FBT1ksV0FBV0EsQ0FBQ0MsSUFBUztJQUNqQyxPQUFPO01BQ0xYLElBQUksRUFBRVcsSUFBSSxDQUFDWCxJQUFJLEdBQUdXLElBQUksQ0FBQ1gsSUFBSSxHQUFHLEdBQUc7TUFDakNELE9BQU8sRUFBRVksSUFBSSxDQUFDWixPQUFPLEdBQUdZLElBQUksQ0FBQ1osT0FBTyxHQUFHLEVBQUU7TUFDekNhLE1BQU0sRUFBRUQsSUFBSSxDQUFDQyxNQUFNLEdBQUdELElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7TUFDckNDLFVBQVUsRUFBRUYsSUFBSSxDQUFDRSxVQUFVLEdBQUdGLElBQUksQ0FBQ0UsVUFBVSxHQUFHLEtBQUs7TUFDckRDLFdBQVcsRUFBRUgsSUFBSSxDQUFDRyxXQUFXLEdBQUdILElBQUksQ0FBQ0csV0FBVyxHQUFHLEVBQUU7TUFDckRDLFdBQVcsRUFBRUosSUFBSSxDQUFDSSxXQUFXLEdBQUdKLElBQUksQ0FBQ0ksV0FBVyxHQUFHLElBQUk7TUFDdkRDLGFBQWEsRUFBRUwsSUFBSSxDQUFDSyxhQUFhLEdBQUdMLElBQUksQ0FBQ0ssYUFBYSxHQUFHLEtBQUs7TUFDOURMLElBQUksRUFBRUEsSUFBSSxDQUFDQSxJQUFJLEdBQUdBLElBQUksQ0FBQ0EsSUFBSSxHQUFHO0tBQ2hCO0VBQ2xCOztBQUdGTSxPQUFBLENBQUFDLE9BQUEsR0FBZXRCLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\response\\","sources":["D:/My-projects/user-information/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\n\ntype DataResponse =\n  | {\n      message: string;\n      code?: number;\n    }\n  | any;\n\nclass BuildResponse {\n  private static baseResponse(dataResponse: DataResponse) {\n    const {\n      message = \"data has been received!\",\n      code = 200,\n      ...rest\n    } = dataResponse;\n    return {\n      code,\n      message,\n      ...rest,\n    };\n  }\n\n  /**\n   * Response Success\n   */\n\n  public static get(dataResponse: DataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n\n  /**\n   * Response Create\n   */\n  public static created(dataResponse: DataResponse) {\n    return this.baseResponse({\n      codde: 201,\n      message: \"data has beed added\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Update\n   */\n\n  public static updated(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"the data has beed updated\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Delete\n   */\n  public static deleted(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"data has been deleted\",\n      ...dataResponse,\n    });\n  }\n\n  public static appResponse(data: any) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null,\n    } as AppResponse;\n  }\n}\n\nexport default BuildResponse;\n"],"mappings":";;;;;;;;;;;;;AASA,MAAMA,aAAa;EACT,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAGFM,OAAA,CAAAC,OAAA,GAAetB,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst db_1 = require(\"../../bin/db\");\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst use_validation_1 = __importDefault(require(\"../../helper/use_validation\"));\nconst response_error_1 = __importDefault(require(\"../../modules/error/response_error\"));\nconst schema_1 = __importDefault(require(\"./schema\"));\nconst sercvice_1 = __importDefault(require(\"../user/sercvice\"));\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass AuthService {\n  static signUp(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const currentUser = yield sercvice_1.default.validateUserEmail(formData.email);\n      if (currentUser) {\n        return {\n          message: \"the user already exist !\",\n          code: 400,\n          currentUser\n        };\n      }\n      // const getNickName = await UserService.checkNickName(formData.email);\n      // if (getNickName === formData.email) {\n      //   return {\n      //     message: \"the nickname is already exist!\",\n      //     code: 400,\n      //     getNickName,\n      //   };\n      // }\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.verify_code = (0, common_1.getUniqueCodev3)();\n      formData.tokenVerify = tokenVerify;\n      (0, use_validation_1.default)(schema_1.default.register, formData);\n      const newUserId = yield (0, db_1.createUser)(formData);\n      if (!newUserId) throw new response_error_1.default.BadRequest(\"Cannot add user in the database !\");\n      send_email_1.default.AccountRegister(formData);\n      return {\n        message: null,\n        newUser: {\n          user_id: newUserId,\n          email: formData.email\n        }\n      };\n    });\n  }\n  static signIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const checkValidation = (0, use_validation_1.default)(schema_1.default.login, formData);\n        const userData = yield (0, db_1.getUserByPassword)(checkValidation.email, checkValidation.password);\n        if (!userData) {\n          throw new response_error_1.default.BadRequest(\"account not found or has been deleted\");\n        } else if (userData.emailConfirmed === 0) {\n          throw new response_error_1.default.BadRequest(\"email is not confirm\");\n        }\n        const comparePassword = true;\n        if (comparePassword) {\n          const payloadToken = {\n            user_id: userData === null || userData === void 0 ? void 0 : userData.user_id,\n            email: userData === null || userData === void 0 ? void 0 : userData.email,\n            firstName: userData.firstName,\n            lastName: userData.lastName\n          };\n          return {\n            message: \"Login successfully\",\n            token_type: \"Bearer\",\n            payloadToken: payloadToken\n          };\n        } else {\n          throw new response_error_1.default.Unauthorized(\"Invalid password\");\n        }\n      } catch (error) {\n        console.error(\"Error during sign-in\", error);\n        return error;\n      }\n    });\n  }\n}\nexports.default = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJtc18xIiwiZGJfMSIsImNvbW1vbl8xIiwic2VuZF9lbWFpbF8xIiwidXNlX3ZhbGlkYXRpb25fMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsInNlcmN2aWNlXzEiLCJKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiIsIkpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIkF1dGhTZXJ2aWNlIiwic2lnblVwIiwiZm9ybURhdGEiLCJjdXJyZW50VXNlciIsInZhbGlkYXRlVXNlckVtYWlsIiwiZW1haWwiLCJtZXNzYWdlIiwiY29kZSIsImdlbmVyYXRlVG9rZW4iLCJnZXRVbmlxdWVDb2RldjIiLCJ0b2tlblZlcmlmeSIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInJlZ2lzdGVyIiwibmV3VXNlcklkIiwiY3JlYXRlVXNlciIsIkJhZFJlcXVlc3QiLCJBY2NvdW50UmVnaXN0ZXIiLCJuZXdVc2VyIiwidXNlcl9pZCIsInNpZ25JbiIsImNoZWNrVmFsaWRhdGlvbiIsImxvZ2luIiwidXNlckRhdGEiLCJnZXRVc2VyQnlQYXNzd29yZCIsInBhc3N3b3JkIiwiZW1haWxDb25maXJtZWQiLCJjb21wYXJlUGFzc3dvcmQiLCJwYXlsb2FkVG9rZW4iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInRva2VuX3R5cGUiLCJVbmF1dGhvcml6ZWQiLCJlcnJvciIsImNvbnNvbGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcbmltcG9ydCB7IGNyZWF0ZVVzZXIsIGdldFVzZXJCeVBhc3N3b3JkIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xuaW1wb3J0IFNlbmRNYWlsIGZyb20gXCIuLi8uLi9oZWxwZXIvc2VuZF9lbWFpbFwiO1xuaW1wb3J0IHVzZVZhbGlkYXRpb24gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xuaW1wb3J0IFJlc3BvbnNlRXJyb3IgZnJvbSBcIi4uLy4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcbmltcG9ydCB7IENyZWF0ZVVzZXIsIFVzZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXMvdXNlclwiO1xuaW1wb3J0IHNjaGVtYUF1dGggZnJvbSBcIi4vc2NoZW1hXCI7XG5pbXBvcnQgVXNlclNlcnZpY2UgZnJvbSBcIi4uL3VzZXIvc2VyY3ZpY2VcIjtcblxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xuXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyAxIERheXNcbmNvbnN0IEpXVF9SRUZSRVNIX1RPS0VOX0VYUElSRUQgPVxuICBwcm9jZXNzLmVudi5KV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEIHx8IFwiMzBkXCI7IC8vIDMwIERheXNcblxuY29uc3QgZXhwaXJlc0luID0gbXMoSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEKSAvIDEwMDA7XG5cbmNsYXNzIEF1dGhTZXJ2aWNlIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBzaWduVXAoZm9ybURhdGE6IENyZWF0ZVVzZXIpIHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnZhbGlkYXRlVXNlckVtYWlsKGZvcm1EYXRhLmVtYWlsKTtcbiAgICBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwidGhlIHVzZXIgYWxyZWFkeSBleGlzdCAhXCIsIGNvZGU6IDQwMCwgY3VycmVudFVzZXIgfTtcbiAgICB9XG5cbiAgICAvLyBjb25zdCBnZXROaWNrTmFtZSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEuZW1haWwpO1xuICAgIC8vIGlmIChnZXROaWNrTmFtZSA9PT0gZm9ybURhdGEuZW1haWwpIHtcbiAgICAvLyAgIHJldHVybiB7XG4gICAgLy8gICAgIG1lc3NhZ2U6IFwidGhlIG5pY2tuYW1lIGlzIGFscmVhZHkgZXhpc3QhXCIsXG4gICAgLy8gICAgIGNvZGU6IDQwMCxcbiAgICAvLyAgICAgZ2V0Tmlja05hbWUsXG4gICAgLy8gICB9O1xuICAgIC8vIH1cbiAgICBjb25zdCBnZW5lcmF0ZVRva2VuID0ge1xuICAgICAgY29kZTogZ2V0VW5pcXVlQ29kZXYyKCksXG4gICAgfTtcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxuICAgICAgSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShnZW5lcmF0ZVRva2VuKSksXG4gICAgICBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTixcbiAgICAgIHtcbiAgICAgICAgZXhwaXJlc0luLFxuICAgICAgfVxuICAgICk7XG5cbiAgICBmb3JtRGF0YS52ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xuICAgIGZvcm1EYXRhLnRva2VuVmVyaWZ5ID0gdG9rZW5WZXJpZnk7XG4gICAgdXNlVmFsaWRhdGlvbihzY2hlbWFBdXRoLnJlZ2lzdGVyLCBmb3JtRGF0YSk7XG4gICAgY29uc3QgbmV3VXNlcklkID0gYXdhaXQgY3JlYXRlVXNlcihmb3JtRGF0YSk7XG4gICAgaWYgKCFuZXdVc2VySWQpXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiQ2Fubm90IGFkZCB1c2VyIGluIHRoZSBkYXRhYmFzZSAhXCIpO1xuICAgIFNlbmRNYWlsLkFjY291bnRSZWdpc3Rlcihmb3JtRGF0YSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6IG51bGwsXG4gICAgICBuZXdVc2VyOiB7XG4gICAgICAgIHVzZXJfaWQ6IG5ld1VzZXJJZCxcbiAgICAgICAgZW1haWw6IGZvcm1EYXRhLmVtYWlsLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBzaWduSW4oZm9ybURhdGE6IFVzZXIpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2hlY2tWYWxpZGF0aW9uID0gdXNlVmFsaWRhdGlvbihzY2hlbWFBdXRoLmxvZ2luLCBmb3JtRGF0YSk7XG5cbiAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZ2V0VXNlckJ5UGFzc3dvcmQoXG4gICAgICAgIGNoZWNrVmFsaWRhdGlvbi5lbWFpbCxcbiAgICAgICAgY2hlY2tWYWxpZGF0aW9uLnBhc3N3b3JkXG4gICAgICApO1xuICAgICAgaWYgKCF1c2VyRGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFxuICAgICAgICAgIFwiYWNjb3VudCBub3QgZm91bmQgb3IgaGFzIGJlZW4gZGVsZXRlZFwiXG4gICAgICAgICk7XG4gICAgICB9IGVsc2UgaWYgKHVzZXJEYXRhLmVtYWlsQ29uZmlybWVkID09PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJlbWFpbCBpcyBub3QgY29uZmlybVwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tcGFyZVBhc3N3b3JkID0gdHJ1ZTtcbiAgICAgIGlmIChjb21wYXJlUGFzc3dvcmQpIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZFRva2VuID0ge1xuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJEYXRhPy51c2VyX2lkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyRGF0YT8uZW1haWwsXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyRGF0YS5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdE5hbWU6IHVzZXJEYXRhLmxhc3ROYW1lLFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJMb2dpbiBzdWNjZXNzZnVsbHlcIixcbiAgICAgICAgICB0b2tlbl90eXBlOiBcIkJlYXJlclwiLFxuICAgICAgICAgIHBheWxvYWRUb2tlbjogcGF5bG9hZFRva2VuLFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuVW5hdXRob3JpemVkKFwiSW52YWxpZCBwYXNzd29yZFwiKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBzaWduLWluXCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBlcnJvcjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXV0aFNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxjQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLElBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsSUFBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQ0EsTUFBQUksWUFBQSxHQUFBTCxlQUFBLENBQUFDLE9B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","map":{"version":3,"names":["jsonwebtoken_1","__importDefault","require","ms_1","db_1","common_1","send_email_1","use_validation_1","response_error_1","schema_1","sercvice_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","JWT_REFRESH_TOKEN_EXPIRED","expiresIn","default","AuthService","signUp","formData","currentUser","validateUserEmail","email","message","code","generateToken","getUniqueCodev2","tokenVerify","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","register","newUserId","createUser","BadRequest","AccountRegister","newUser","user_id","signIn","checkValidation","login","userData","getUserByPassword","password","emailConfirmed","comparePassword","payloadToken","firstName","lastName","token_type","Unauthorized","error","console","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/My-projects/user-information/server/src/controller/auth/service.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport ms from \"ms\";\nimport { createUser, getUserByPassword } from \"../../bin/db\";\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\nimport SendMail from \"../../helper/send_email\";\nimport useValidation from \"../../helper/use_validation\";\nimport ResponseError from \"../../modules/error/response_error\";\nimport { CreateUser, User } from \"../../types/user\";\nimport schemaAuth from \"./schema\";\nimport UserService from \"../user/sercvice\";\n\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\n\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED =\n  process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\n\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\n\nclass AuthService {\n  public static async signUp(formData: CreateUser) {\n    const currentUser = await UserService.validateUserEmail(formData.email);\n    if (currentUser) {\n      return { message: \"the user already exist !\", code: 400, currentUser };\n    }\n\n    // const getNickName = await UserService.checkNickName(formData.email);\n    // if (getNickName === formData.email) {\n    //   return {\n    //     message: \"the nickname is already exist!\",\n    //     code: 400,\n    //     getNickName,\n    //   };\n    // }\n    const generateToken = {\n      code: getUniqueCodev2(),\n    };\n    const tokenVerify = jwt.sign(\n      JSON.parse(JSON.stringify(generateToken)),\n      JWT_SECRET_ACCESS_TOKEN,\n      {\n        expiresIn,\n      }\n    );\n\n    formData.verify_code = getUniqueCodev3();\n    formData.tokenVerify = tokenVerify;\n    useValidation(schemaAuth.register, formData);\n    const newUserId = await createUser(formData);\n    if (!newUserId)\n      throw new ResponseError.BadRequest(\"Cannot add user in the database !\");\n    SendMail.AccountRegister(formData);\n    return {\n      message: null,\n      newUser: {\n        user_id: newUserId,\n        email: formData.email,\n      },\n    };\n  }\n\n  public static async signIn(formData: User) {\n    try {\n      const checkValidation = useValidation(schemaAuth.login, formData);\n\n      const userData = await getUserByPassword(\n        checkValidation.email,\n        checkValidation.password\n      );\n      if (!userData) {\n        throw new ResponseError.BadRequest(\n          \"account not found or has been deleted\"\n        );\n      } else if (userData.emailConfirmed === 0) {\n        throw new ResponseError.BadRequest(\"email is not confirm\");\n      }\n\n      const comparePassword = true;\n      if (comparePassword) {\n        const payloadToken = {\n          user_id: userData?.user_id,\n          email: userData?.email,\n          firstName: userData.firstName,\n          lastName: userData.lastName,\n        };\n\n        return {\n          message: \"Login successfully\",\n          token_type: \"Bearer\",\n          payloadToken: payloadToken,\n        };\n      } else {\n        throw new ResponseError.Unauthorized(\"Invalid password\");\n      }\n    } catch (error) {\n      console.error(\"Error during sign-in\", error);\n      return error;\n    }\n  }\n}\n\nexport default AuthService;\n"],"mappings":"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","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addPatient = exports.getUserSkills = exports.getCustomers = exports.deleteAppointment = exports.updateAppointment = exports.getAppointment = exports.saveAppointment = exports.getUserInfo = exports.getNavItems = exports.updateProfileUser = exports.getOTP = exports.getAdmins = exports.updateUserVerifyCode = exports.getUserByPassword = exports.confirmEmail = exports.createUser = exports.checkNickName = exports.checkUserExist = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = __importDefault(require(\"../controller/user/schema\"));\nconst mysql_1 = require(\"./mysql\");\n// Users\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT user_id,email FROM  ${mysql_1.coreSchema}.users\n      WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nexports.checkUserExist = checkUserExist;\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM Ali_DB.users`);\n    return getData;\n  });\n}\nexports.checkNickName = checkNickName;\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.default.createPassword.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (user_id,firstName,lastName,nickName,gender,birthDay,email,phoneNumber,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.firstName, data.lastName, data.nickName, data.gender, data.birthDay, data.email, data.phoneNumber, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nexports.createUser = createUser;\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * \n    FROM ${mysql_1.coreSchema}.users\n    WHERE email=? AND deletedAt IS NULL\n    `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.users\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\n        WHERE email =?\n        `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\n    WHERE email=?\n  `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nexports.confirmEmail = confirmEmail;\nfunction getUserByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email=?`, {\n        values: [email]\n      });\n      if (user.length < 1) return null;\n      const match = yield new Promise((resolve, reject) => {\n        bcrypt_1.default.compare(password, user[0].password, (err, isMatch) => {\n          if (err) reject(err);\n          resolve(isMatch);\n        });\n      });\n      if (!match) return null;\n      return user[0];\n    } catch (error) {\n      console.error(\"Error fetching user by password:\", error);\n      throw new Error(\"Could not fetch user\");\n    }\n  });\n}\nexports.getUserByPassword = getUserByPassword;\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET verify_code=?,updatedAt=?\n    WHERE user_id=?\n    `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n      SELECT user_id,email,verify_code\n      FROM ${mysql_1.coreSchema}.users\n      WHERE user_id=?\n      `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nexports.updateUserVerifyCode = updateUserVerifyCode;\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nexports.getAdmins = getAdmins;\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nexports.getOTP = getOTP;\nfunction updateProfileUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateUsersql = `\n      UPDATE ${mysql_1.coreSchema}.users SET\n        firstName = ?,\n        lastName = ?,\n        email = ?,\n        address = ?,\n        country = ?,\n        city = ?,\n        state = ?,\n        zipcode = ?,\n      \n    `;\n    const updateUservalues = [data.firstName, data.lastName, data.email, data.address, data.country, data.city, data.state, data.zipcode];\n    const result = yield (0, mysql_1.query)(updateUsersql, updateUservalues);\n    const insertSkillSql = `UPDATE ${mysql_1.coreSchema}.user_skill SET (user_id, skill_name) VALUES (?, ?)`;\n    for (const skill of data.skills) {\n      yield (0, mysql_1.query)(insertSkillSql, [data.user_id, skill]);\n    }\n    return result;\n  });\n}\nexports.updateProfileUser = updateProfileUser;\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getManu = yield (0, mysql_1.query)(`\n  SELECT\n  m.menu_id, \n  m.icon, \n  m.menu_name, \n  m.path, \n  s.submenu_id, \n  s.icon,\n  s.submenu_name, \n  s.url\nFROM \n  ${mysql_1.coreSchema}.menu m\nLEFT JOIN \n  ${mysql_1.coreSchema}.submenu s ON m.menu_id = s.menu_id\nORDER BY \n  m.menu_id, s.submenu_id;\n  `);\n    try {\n      const menuMap = new Map();\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            menu_id: row.menu_id,\n            icon: row.icon,\n            menu_name: row.menu_name,\n            path: row.path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            submenu_id: row.submenu_id,\n            submenu_name: row.submenu_name,\n            url: row.url,\n            icon: row.icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (error) {\n      console.error(\"Error fetching navigation items:\", error);\n      throw error;\n    }\n  });\n}\nexports.getNavItems = getNavItems;\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients WHERE email=?`, {\n      values: [email]\n    });\n    if (data) return data;\n  });\n}\nexports.getUserInfo = getUserInfo;\nfunction saveAppointment(eventData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const insertEvent = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.calendar_events \n      (event_title, color, date, event_description)\n       VALUES (?, ?, ?, ?)`, {\n        values: [eventData.event_title, eventData.color, eventData.date, eventData.event_description]\n      });\n      return insertEvent;\n    } catch (error) {\n      throw new Error(`Error inserting event: ${error}`);\n    }\n  });\n}\nexports.saveAppointment = saveAppointment;\nfunction getAppointment() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getEventData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.calendar_events`);\n    return getEventData;\n  });\n}\nexports.getAppointment = getAppointment;\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.calendar_events\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`, {\n      values: [data.date, new Date(), data.event_id]\n    });\n    if (result) {\n      return result;\n    }\n  });\n}\nexports.updateAppointment = updateAppointment;\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\nexports.deleteAppointment = deleteAppointment;\nfunction getCustomers() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const customers = yield (0, mysql_1.query)(`\n  SELECT * FROM ${mysql_1.coreSchema}.patients\n  `);\n    return customers;\n  });\n}\nexports.getCustomers = getCustomers;\nfunction getUserSkills() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const skills = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.user_skill\n    `);\n    return skills;\n  });\n}\nexports.getUserSkills = getUserSkills;\nfunction addPatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patients\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\n        bloodGroup, bloodPressure, sugarLevel, condition, profileImage)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n        values: [patientData.firstName, patientData.lastName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.maritalStatus, patientData.address, patientData.bloodGroup, patientData.bloodPressure, patientData.sugarLevel, patientData.condition, patientData.profileImage]\n      });\n      return result;\n    } catch (error) {\n      console.log();\n      console.error(\"Error inserting patient data:\", error);\n      throw error;\n    }\n  });\n}\nexports.addPatient = addPatient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJzY2hlbWFfMSIsIm15c3FsXzEiLCJjaGVja1VzZXJFeGlzdCIsImVtYWlsIiwidXNlciIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImV4cG9ydHMiLCJjaGVja05pY2tOYW1lIiwiZ2V0RGF0YSIsImNyZWF0ZVVzZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImRlZmF1bHQiLCJjcmVhdGVQYXNzd29yZCIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJoYXNoU3luYyIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIm5pY2tOYW1lIiwiZ2VuZGVyIiwiYmlydGhEYXkiLCJwaG9uZU51bWJlciIsInZlcmlmeV9jb2RlIiwiRGF0ZSIsInRva2VuVmVyaWZ5IiwiY29uZmlybUVtYWlsIiwibGVuZ3RoIiwiaXNTdWNjZXNzZnVsbCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsImNvZGUiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImdldFVzZXJCeVBhc3N3b3JkIiwibWF0Y2giLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbXBhcmUiLCJlcnIiLCJpc01hdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsInVzZXJJZCIsIm5ld0NvZGUiLCJnZXRBZG1pbnMiLCJ1c2VyQWRtaW4iLCJnZXRPVFAiLCJ1cGRhdGVEYXRhIiwidXBkYXRlUHJvZmlsZVVzZXIiLCJ1cGRhdGVVc2Vyc3FsIiwidXBkYXRlVXNlcnZhbHVlcyIsImFkZHJlc3MiLCJjb3VudHJ5IiwiY2l0eSIsInN0YXRlIiwiemlwY29kZSIsImluc2VydFNraWxsU3FsIiwic2tpbGwiLCJza2lsbHMiLCJ1c2VyX2lkIiwiZ2V0TmF2SXRlbXMiLCJnZXRNYW51IiwibWVudU1hcCIsIk1hcCIsImZvckVhY2giLCJyb3ciLCJtZW51SWQiLCJtZW51X2lkIiwiaGFzIiwic2V0IiwiaWNvbiIsIm1lbnVfbmFtZSIsInBhdGgiLCJzdWJtZW51cyIsInN1Ym1lbnVfaWQiLCJzdWJtZW51Iiwic3VibWVudV9uYW1lIiwidXJsIiwiX2EiLCJnZXQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiZ2V0VXNlckluZm8iLCJzYXZlQXBwb2ludG1lbnQiLCJldmVudERhdGEiLCJpbnNlcnRFdmVudCIsImV2ZW50X3RpdGxlIiwiY29sb3IiLCJkYXRlIiwiZXZlbnRfZGVzY3JpcHRpb24iLCJnZXRBcHBvaW50bWVudCIsImdldEV2ZW50RGF0YSIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXZlbnRfaWQiLCJkZWxldGVBcHBvaW50bWVudCIsImdldEN1c3RvbWVycyIsImN1c3RvbWVycyIsImdldFVzZXJTa2lsbHMiLCJhZGRQYXRpZW50IiwicGF0aWVudERhdGEiLCJtb2JpbGUiLCJkYXRlT2ZCaXJ0aCIsImFnZSIsIm1hcml0YWxTdGF0dXMiLCJibG9vZEdyb3VwIiwiYmxvb2RQcmVzc3VyZSIsInN1Z2FyTGV2ZWwiLCJjb25kaXRpb24iLCJwcm9maWxlSW1hZ2UiLCJsb2ciXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvYmluL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCBzY2hlbWFVc2VyIGZyb20gXCIuLi9jb250cm9sbGVyL3VzZXIvc2NoZW1hXCI7XG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XG5pbXBvcnQgeyBNZW51LCBTdWJtZW51IH0gZnJvbSBcIi4uL3R5cGVzL25hdkl0ZW1cIjtcbmltcG9ydCB7IEFwcFJlc3BvbnNlIH0gZnJvbSBcIi4uL3R5cGVzL3Jlc3BvbnNlLmludGVyZmFjZVwiO1xuaW1wb3J0IHsgQ29uZmlybUVtYWlsLCBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQsIGNvcmVTY2hlbWEsIHF1ZXJ5IH0gZnJvbSBcIi4vbXlzcWxcIjtcbmltcG9ydCB7IEFkbWluRFRPIH0gZnJvbSBcIi4uL21vZGVscy9hZG1pblwiO1xuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi9tb2RlbHMvcGF0aWVudHNcIjtcblxuLy8gVXNlcnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja1VzZXJFeGlzdChlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxSb3dEYXRhUGFja2V0W10+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFNFTEVDVCB1c2VyX2lkLGVtYWlsIEZST00gICR7Y29yZVNjaGVtYX0udXNlcnNcbiAgICAgIFdIRVJFIGVtYWlsPT9gLFxuICAgIHtcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcbiAgICB9XG4gICk7XG4gIHJldHVybiB1c2VyO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZSgpOiBQcm9taXNlPGFueT4ge1xuICBjb25zdCBnZXREYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oYFNFTEVDVCAqIEZST00gQWxpX0RCLnVzZXJzYCk7XG4gIHJldHVybiBnZXREYXRhO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcihkYXRhOiBhbnkpIHtcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YTtcbiAgY29uc3QgeyBjb25maXJtUGFzc3dvcmQgfSA9IGRhdGE7XG4gIGNvbnN0IGZkUGFzc3dvcmQgPSB7IHBhc3N3b3JkLCBjb25maXJtUGFzc3dvcmQgfTtcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IHNjaGVtYVVzZXIuY3JlYXRlUGFzc3dvcmQudmFsaWRhdGVTeW5jQXQoXG4gICAgXCJjb25maXJtUGFzc3dvcmRcIixcbiAgICBmZFBhc3N3b3JkXG4gICk7XG4gIGNvbnN0IHNhbHRSb3VuZHMgPSAxMDtcbiAgY29uc3QgaGFzaCA9IGJjcnlwdC5oYXNoU3luYyh2YWxpZFBhc3N3b3JkLCBzYWx0Um91bmRzKTtcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcbiAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS51c2Vyc1xuICAgICh1c2VyX2lkLGZpcnN0TmFtZSxsYXN0TmFtZSxuaWNrTmFtZSxnZW5kZXIsYmlydGhEYXksZW1haWwscGhvbmVOdW1iZXIscGFzc3dvcmQsc2lnbnVwU3RhdHVzLHZlcmlmeV9jb2RlLGNyZWF0ZWRBdCx1cGRhdGVkQXQsdG9rZW5WZXJpZnkpXG4gICAgVkFMVUVTKD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPylgLFxuICAgIHtcbiAgICAgIHZhbHVlczogW1xuICAgICAgICBuZXdJZCxcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXG4gICAgICAgIGRhdGEubGFzdE5hbWUsXG4gICAgICAgIGRhdGEubmlja05hbWUsXG4gICAgICAgIGRhdGEuZ2VuZGVyLFxuICAgICAgICBkYXRhLmJpcnRoRGF5LFxuICAgICAgICBkYXRhLmVtYWlsLFxuICAgICAgICBkYXRhLnBob25lTnVtYmVyLFxuICAgICAgICBoYXNoLFxuICAgICAgICAwLFxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxuICAgICAgICBuZXcgRGF0ZSgpLFxuICAgICAgICBuZXcgRGF0ZSgpLFxuICAgICAgICBkYXRhLnRva2VuVmVyaWZ5LFxuICAgICAgXSxcbiAgICB9XG4gICk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwoZGF0YTogQ29uZmlybUVtYWlsKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFxuICAgIFNFTEVDVCAqIFxuICAgIEZST00gJHtjb3JlU2NoZW1hfS51c2Vyc1xuICAgIFdIRVJFIGVtYWlsPT8gQU5EIGRlbGV0ZWRBdCBJUyBOVUxMXG4gICAgYCxcbiAgICB7XG4gICAgICB2YWx1ZXM6IFtkYXRhLmVtYWlsXSxcbiAgICB9XG4gICk7XG4gIGlmIChyZXN1bHQubGVuZ3RoIDwgMSlcbiAgICByZXR1cm4ge1xuICAgICAgaXNTdWNjZXNzZnVsbDogZmFsc2UsXG4gICAgICBzdGF0dXM6IDEsXG4gICAgICBtZXNzYWdlOiBcInVzZXIgbm90IGZvdW5kIVwiLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIGNvbnN0IHVzZXIgPSByZXN1bHRbMF0gYXMgVXNlcjtcbiAgaWYgKHVzZXIuZW1haWwgIT09IGRhdGEuZW1haWwpXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxuICAgICAgc3RhdHVzOiAxLFxuICAgICAgbWVzc2FnZTogXCJlbWFpbCBpcyBub3QgY29ycmVjdFwiLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIGlmICh1c2VyLmVtYWlsQ29uZmlybWVkKSB7XG4gICAgaWYgKHVzZXIuc2lnbnVwU3RhdHVzID09PSAxKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgICAgICBgXG4gICAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXG4gICAgICAgIFNFVCBzaWdudXBTdGF0dXM9PyxlbWFpbENvbmZpcm1lZD0/LHVwZGF0ZWRBdD0/XG4gICAgICAgIFdIRVJFIGVtYWlsID0/XG4gICAgICAgIGAsXG4gICAgICAgIHtcbiAgICAgICAgICB2YWx1ZXM6IFsxLCAxLCBuZXcgRGF0ZSgpLCBkYXRhLmVtYWlsXSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcImVtYWlsIGFscmVhZHkgY29uZmlybWVkXCIsXG4gICAgfSBhcyBBcHBSZXNwb25zZTtcbiAgfVxuICBpZiAodXNlci52ZXJpZnlfY29kZSAhPT0gZGF0YS52ZXJpZnlfY29kZSlcbiAgICByZXR1cm4geyBzdGF0dXM6IGZhbHNlLCBtZXNzYWdlOiBcImNvZGUgaXMgbm90IGNvcnJlY3RcIiwgY29kZTogNDAwIH07XG4gIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFxuICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzXG4gICAgU0VUIGVtYWlsQ29uZmlybWVkPTEsIHNpZ251cFN0YXR1cz0yLHVwZGF0ZWRBdD0/XG4gICAgV0hFUkUgZW1haWw9P1xuICBgLFxuICAgIHtcbiAgICAgIHZhbHVlczogW25ldyBEYXRlKCksIGRhdGEuZW1haWxdLFxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIHtcbiAgICBpc1N1Y2Nlc3NmdWxsOiB0cnVlLFxuICAgIHNob3dUb1VzZXI6IHRydWUsXG4gICAgbWVzc2FnZUNvZGU6IFwiTVNHXzAxXCIsXG4gICAgbWVzc2FnZUtpbmQ6IDEsXG4gICAgbWVzc2FnZTogXCJlbWFpbCBjb25maXJtZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gIH0gYXMgQXBwUmVzcG9uc2U7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlQYXNzd29yZChcbiAgZW1haWw6IHN0cmluZyxcbiAgcGFzc3dvcmQ6IHN0cmluZ1xuKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbD0/YCxcbiAgICAgIHtcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxuICAgICAgfVxuICAgICk7XG4gICAgaWYgKHVzZXIubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWF0Y2ggPSBhd2FpdCBuZXcgUHJvbWlzZTxib29sZWFuPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlclswXS5wYXNzd29yZCwgKGVyciwgaXNNYXRjaCkgPT4ge1xuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcbiAgICAgICAgcmVzb2x2ZShpc01hdGNoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmICghbWF0Y2gpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB1c2VyWzBdIGFzIFVzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHVzZXIgYnkgcGFzc3dvcmQ6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmV0Y2ggdXNlclwiKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcbiAgICBgXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcbiAgICBTRVQgdmVyaWZ5X2NvZGU9Pyx1cGRhdGVkQXQ9P1xuICAgIFdIRVJFIHVzZXJfaWQ9P1xuICAgIGAsXG4gICAge1xuICAgICAgdmFsdWVzOiBbbmV3Q29kZSwgbmV3IERhdGUoKSwgdXNlcklkXSxcbiAgICB9XG4gICk7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgIGBcbiAgICAgIFNFTEVDVCB1c2VyX2lkLGVtYWlsLHZlcmlmeV9jb2RlXG4gICAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcbiAgICAgIFdIRVJFIHVzZXJfaWQ9P1xuICAgICAgYCxcbiAgICB7XG4gICAgICB2YWx1ZXM6IFt1c2VySWRdLFxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIHVzZXJbMF0gYXMgQ3JlYXRlVXNlcjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWlucygpIHtcbiAgY29uc3QgdXNlckFkbWluID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXG4gICAgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LmFkbWluXG4gICAgYCk7XG4gIHJldHVybiB1c2VyQWRtaW4gYXMgQWRtaW5EVE9bXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9UUChlbWFpbDogYW55LCB0b2tlblZlcmlmeTogYW55KSB7XG4gIGNvbnN0IHVwZGF0ZURhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgIGBVUERBVEUgICR7Y29yZVNjaGVtYX0udXNlcnMgU0VUIHZlcmlmeV9jb2RlPT8gV0hFUkUgZW1haWwgPSA/YCxcbiAgICB7XG4gICAgICB2YWx1ZXM6IFt0b2tlblZlcmlmeSwgZW1haWxdLFxuICAgIH1cbiAgKTtcblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgIGBTRUxFQ1QgKiBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnMgV0hFUkUgZW1haWwgPSA/YCxcbiAgICB7XG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXG4gICAgfVxuICApO1xuICByZXR1cm4gcmVzdWx0WzBdIGFzIFVzZXI7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihkYXRhOiBVc2VyKTogUHJvbWlzZTxhbnk+IHtcbiAgY29uc3QgdXBkYXRlVXNlcnNxbCA9IGBcbiAgICAgIFVQREFURSAke2NvcmVTY2hlbWF9LnVzZXJzIFNFVFxuICAgICAgICBmaXJzdE5hbWUgPSA/LFxuICAgICAgICBsYXN0TmFtZSA9ID8sXG4gICAgICAgIGVtYWlsID0gPyxcbiAgICAgICAgYWRkcmVzcyA9ID8sXG4gICAgICAgIGNvdW50cnkgPSA/LFxuICAgICAgICBjaXR5ID0gPyxcbiAgICAgICAgc3RhdGUgPSA/LFxuICAgICAgICB6aXBjb2RlID0gPyxcbiAgICAgIFxuICAgIGA7XG4gIGNvbnN0IHVwZGF0ZVVzZXJ2YWx1ZXMgPSBbXG4gICAgZGF0YS5maXJzdE5hbWUsXG4gICAgZGF0YS5sYXN0TmFtZSxcbiAgICBkYXRhLmVtYWlsLFxuICAgIGRhdGEuYWRkcmVzcyxcbiAgICBkYXRhLmNvdW50cnksXG4gICAgZGF0YS5jaXR5LFxuICAgIGRhdGEuc3RhdGUsXG4gICAgZGF0YS56aXBjb2RlLFxuICBdO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KHVwZGF0ZVVzZXJzcWwsIHVwZGF0ZVVzZXJ2YWx1ZXMpO1xuICBjb25zdCBpbnNlcnRTa2lsbFNxbCA9IGBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2VyX3NraWxsIFNFVCAodXNlcl9pZCwgc2tpbGxfbmFtZSkgVkFMVUVTICg/LCA/KWA7XG4gIGZvciAoY29uc3Qgc2tpbGwgb2YgZGF0YS5za2lsbHMpIHtcbiAgICBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGluc2VydFNraWxsU3FsLCBbZGF0YS51c2VyX2lkLCBza2lsbF0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROYXZJdGVtcygpIHtcbiAgY29uc3QgZ2V0TWFudSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxuICBTRUxFQ1RcbiAgbS5tZW51X2lkLCBcbiAgbS5pY29uLCBcbiAgbS5tZW51X25hbWUsIFxuICBtLnBhdGgsIFxuICBzLnN1Ym1lbnVfaWQsIFxuICBzLmljb24sXG4gIHMuc3VibWVudV9uYW1lLCBcbiAgcy51cmxcbkZST00gXG4gICR7Y29yZVNjaGVtYX0ubWVudSBtXG5MRUZUIEpPSU4gXG4gICR7Y29yZVNjaGVtYX0uc3VibWVudSBzIE9OIG0ubWVudV9pZCA9IHMubWVudV9pZFxuT1JERVIgQlkgXG4gIG0ubWVudV9pZCwgcy5zdWJtZW51X2lkO1xuICBgKTtcblxuICB0cnkge1xuICAgIGNvbnN0IG1lbnVNYXAgPSBuZXcgTWFwPG51bWJlciwgTWVudT4oKTtcblxuICAgIGdldE1hbnUuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICBjb25zdCBtZW51SWQgPSByb3cubWVudV9pZDtcbiAgICAgIGlmICghbWVudU1hcC5oYXMobWVudUlkKSkge1xuICAgICAgICBtZW51TWFwLnNldChtZW51SWQsIHtcbiAgICAgICAgICBtZW51X2lkOiByb3cubWVudV9pZCxcbiAgICAgICAgICBpY29uOiByb3cuaWNvbixcbiAgICAgICAgICBtZW51X25hbWU6IHJvdy5tZW51X25hbWUsXG4gICAgICAgICAgcGF0aDogcm93LnBhdGgsXG4gICAgICAgICAgc3VibWVudXM6IFtdLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvdy5zdWJtZW51X2lkKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1lbnU6IFN1Ym1lbnUgPSB7XG4gICAgICAgICAgc3VibWVudV9pZDogcm93LnN1Ym1lbnVfaWQsXG4gICAgICAgICAgc3VibWVudV9uYW1lOiByb3cuc3VibWVudV9uYW1lLFxuICAgICAgICAgIHVybDogcm93LnVybCxcbiAgICAgICAgICBpY29uOiByb3cuaWNvbixcbiAgICAgICAgfTtcbiAgICAgICAgbWVudU1hcC5nZXQobWVudUlkKT8uc3VibWVudXMucHVzaChzdWJtZW51KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBcnJheS5mcm9tKG1lbnVNYXAudmFsdWVzKCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXZpZ2F0aW9uIGl0ZW1zOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJJbmZvKGVtYWlsOiBzdHJpbmcpIHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50cyBXSEVSRSBlbWFpbD0/YCxcbiAgICB7XG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXG4gICAgfVxuICApO1xuICBpZiAoZGF0YSkgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQXBwb2ludG1lbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBpbnNlcnRFdmVudCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHMgXG4gICAgICAoZXZlbnRfdGl0bGUsIGNvbG9yLCBkYXRlLCBldmVudF9kZXNjcmlwdGlvbilcbiAgICAgICBWQUxVRVMgKD8sID8sID8sID8pYCxcbiAgICAgIHtcbiAgICAgICAgdmFsdWVzOiBbXG4gICAgICAgICAgZXZlbnREYXRhLmV2ZW50X3RpdGxlLFxuICAgICAgICAgIGV2ZW50RGF0YS5jb2xvcixcbiAgICAgICAgICBldmVudERhdGEuZGF0ZSxcbiAgICAgICAgICBldmVudERhdGEuZXZlbnRfZGVzY3JpcHRpb24sXG4gICAgICAgIF0sXG4gICAgICB9XG4gICAgKTtcblxuICAgIHJldHVybiBpbnNlcnRFdmVudDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGluc2VydGluZyBldmVudDogJHtlcnJvcn1gKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXBwb2ludG1lbnQoKSB7XG4gIGNvbnN0IGdldEV2ZW50RGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHNgXG4gICk7XG4gIHJldHVybiBnZXRFdmVudERhdGE7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBcHBvaW50bWVudChcbiAgZGF0YTogSUFwcG9pbnRtZW50XG4pOiBQcm9taXNlPElBcHBvaW50bWVudFtdIHwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXG4gICAgYFVQREFURSAke2NvcmVTY2hlbWF9LmNhbGVuZGFyX2V2ZW50c1xuICAgIFNFVCBkYXRlID0gPywgdXBkYXRlZF9hdCA9ID9cbiAgICBXSEVSRSBldmVudF9pZCA9ID9gLFxuICAgIHtcbiAgICAgIHZhbHVlczogW2RhdGEuZGF0ZSwgbmV3IERhdGUoKSwgZGF0YS5ldmVudF9pZF0sXG4gICAgfVxuICApO1xuICBpZiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdCBhcyBJQXBwb2ludG1lbnRbXTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwb2ludG1lbnQoZXZlbnRfaWQ6IHN0cmluZykge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxuICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LmNhbGVuZGFyX2V2ZW50c1xuICAgICAgV0hFUkUgZXZlbnRfaWQ9P2AsXG4gICAge1xuICAgICAgdmFsdWVzOiBbZXZlbnRfaWRdLFxuICAgIH1cbiAgKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1c3RvbWVycygpIHtcbiAgY29uc3QgY3VzdG9tZXJzID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihgXG4gIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xuICBgKTtcbiAgcmV0dXJuIGN1c3RvbWVycztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJTa2lsbHMoKSB7XG4gIGNvbnN0IHNraWxscyA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VyX3NraWxsXG4gICAgYCk7XG4gIHJldHVybiBza2lsbHM7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KHBhdGllbnREYXRhOiBQYXRpZW50RFRPKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcbiAgICAgIGBJTlNFUlQgSU5UTyAke2NvcmVTY2hlbWF9LnBhdGllbnRzXG4gICAgICAoZmlyc3ROYW1lLCBsYXN0TmFtZSwgZ2VuZGVyLCBtb2JpbGUsIGRhdGVPZkJpcnRoLCBhZ2UsIGVtYWlsLCBtYXJpdGFsU3RhdHVzLCBhZGRyZXNzLFxuICAgICAgICBibG9vZEdyb3VwLCBibG9vZFByZXNzdXJlLCBzdWdhckxldmVsLCBjb25kaXRpb24sIHByb2ZpbGVJbWFnZSlcbiAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcbiAgICAgIHtcbiAgICAgICAgdmFsdWVzOiBbXG4gICAgICAgICAgcGF0aWVudERhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgIHBhdGllbnREYXRhLmxhc3ROYW1lLFxuICAgICAgICAgIHBhdGllbnREYXRhLmdlbmRlcixcbiAgICAgICAgICBwYXRpZW50RGF0YS5tb2JpbGUsXG4gICAgICAgICAgcGF0aWVudERhdGEuZGF0ZU9mQmlydGgsXG4gICAgICAgICAgcGF0aWVudERhdGEuYWdlLFxuICAgICAgICAgIHBhdGllbnREYXRhLmVtYWlsLFxuICAgICAgICAgIHBhdGllbnREYXRhLm1hcml0YWxTdGF0dXMsXG4gICAgICAgICAgcGF0aWVudERhdGEuYWRkcmVzcyxcbiAgICAgICAgICBwYXRpZW50RGF0YS5ibG9vZEdyb3VwLFxuICAgICAgICAgIHBhdGllbnREYXRhLmJsb29kUHJlc3N1cmUsXG4gICAgICAgICAgcGF0aWVudERhdGEuc3VnYXJMZXZlbCxcbiAgICAgICAgICBwYXRpZW50RGF0YS5jb25kaXRpb24sXG4gICAgICAgICAgcGF0aWVudERhdGEucHJvZmlsZUltYWdlLFxuICAgICAgICBdLFxuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbnNlcnRpbmcgcGF0aWVudCBkYXRhOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBS0EsTUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBSUE7QUFDQSxTQUFzQkksY0FBY0EsQ0FBQ0MsS0FBYTs7SUFDaEQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUgsT0FBQSxDQUFBSSxLQUFLLEVBQ3RCLDhCQUE4QkosT0FBQSxDQUFBSyxVQUFVO29CQUN4QixFQUNoQjtNQUNFQyxNQUFNLEVBQUUsQ0FBQ0osS0FBSztLQUNmLENBQ0Y7SUFDRCxPQUFPQyxJQUFJO0VBQ2IsQ0FBQzs7QUFUREksT0FBQSxDQUFBTixjQUFBLEdBQUFBLGNBQUE7QUFXQSxTQUFzQk8sYUFBYUEsQ0FBQTs7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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","checkUserExist","email","user","query","coreSchema","values","exports","checkNickName","getData","createUser","data","password","confirmPassword","fdPassword","validPassword","default","createPassword","validateSyncAt","saltRounds","hash","hashSync","newId","v4","result","firstName","lastName","nickName","gender","birthDay","phoneNumber","verify_code","Date","tokenVerify","confirmEmail","length","isSuccessfull","status","message","emailConfirmed","signupStatus","code","showToUser","messageCode","messageKind","getUserByPassword","match","Promise","resolve","reject","compare","err","isMatch","error","console","Error","updateUserVerifyCode","userId","newCode","getAdmins","userAdmin","getOTP","updateData","updateProfileUser","updateUsersql","updateUservalues","address","country","city","state","zipcode","insertSkillSql","skill","skills","user_id","getNavItems","getManu","menuMap","Map","forEach","row","menuId","menu_id","has","set","icon","menu_name","path","submenus","submenu_id","submenu","submenu_name","url","_a","get","push","Array","from","getUserInfo","saveAppointment","eventData","insertEvent","event_title","color","date","event_description","getAppointment","getEventData","updateAppointment","event_id","deleteAppointment","getCustomers","customers","getUserSkills","addPatient","patientData","mobile","dateOfBirth","age","maritalStatus","bloodGroup","bloodPressure","sugarLevel","condition","profileImage","log"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\bin\\","sources":["D:/My-projects/user-information/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport schemaUser from \"../controller/user/schema\";\nimport { IAppointment } from \"../types/appointment.interface\";\nimport { Menu, Submenu } from \"../types/navItem\";\nimport { AppResponse } from \"../types/response.interface\";\nimport { ConfirmEmail, CreateUser, User } from \"../types/user\";\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\nimport { AdminDTO } from \"../models/admin\";\nimport { PatientDTO } from \"../models/patients\";\n\n// Users\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\n  const user = await query<RowDataPacket[]>(\n    `SELECT user_id,email FROM  ${coreSchema}.users\n      WHERE email=?`,\n    {\n      values: [email],\n    }\n  );\n  return user;\n}\n\nexport async function checkNickName(): Promise<any> {\n  const getData = await query<RowDataPacket>(`SELECT * FROM Ali_DB.users`);\n  return getData;\n}\n\nexport async function createUser(data: any) {\n  const { password } = data;\n  const { confirmPassword } = data;\n  const fdPassword = { password, confirmPassword };\n  const validPassword = schemaUser.createPassword.validateSyncAt(\n    \"confirmPassword\",\n    fdPassword\n  );\n  const saltRounds = 10;\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\n  const newId = uuidv4();\n\n  const result = await query<RowDataPacket>(\n    `INSERT INTO ${coreSchema}.users\n    (user_id,firstName,lastName,nickName,gender,birthDay,email,phoneNumber,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\n    {\n      values: [\n        newId,\n        data.firstName,\n        data.lastName,\n        data.nickName,\n        data.gender,\n        data.birthDay,\n        data.email,\n        data.phoneNumber,\n        hash,\n        0,\n        data.verify_code,\n        new Date(),\n        new Date(),\n        data.tokenVerify,\n      ],\n    }\n  );\n  return result;\n}\n\nexport async function confirmEmail(data: ConfirmEmail) {\n  const result = await query<RowDataPacket[]>(\n    `\n    SELECT * \n    FROM ${coreSchema}.users\n    WHERE email=? AND deletedAt IS NULL\n    `,\n    {\n      values: [data.email],\n    }\n  );\n  if (result.length < 1)\n    return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\",\n    } as AppResponse;\n  const user = result[0] as User;\n  if (user.email !== data.email)\n    return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\",\n    } as AppResponse;\n  if (user.emailConfirmed) {\n    if (user.signupStatus === 1) {\n      const result = await query<RowDataPacket[]>(\n        `\n        UPDATE ${coreSchema}.users\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\n        WHERE email =?\n        `,\n        {\n          values: [1, 1, new Date(), data.email],\n        }\n      );\n    }\n    return {\n      isSuccessfull: true,\n      message: \"email already confirmed\",\n    } as AppResponse;\n  }\n  if (user.verify_code !== data.verify_code)\n    return { status: false, message: \"code is not correct\", code: 400 };\n  await query<RowDataPacket[]>(\n    `\n    UPDATE ${coreSchema}.users\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\n    WHERE email=?\n  `,\n    {\n      values: [new Date(), data.email],\n    }\n  );\n  return {\n    isSuccessfull: true,\n    showToUser: true,\n    messageCode: \"MSG_01\",\n    messageKind: 1,\n    message: \"email confirmed successfully\",\n  } as AppResponse;\n}\n\nexport async function getUserByPassword(\n  email: string,\n  password: string\n): Promise<User | null> {\n  try {\n    const user = await query<RowDataPacket[]>(\n      `SELECT * FROM ${coreSchema}.users WHERE email=?`,\n      {\n        values: [email],\n      }\n    );\n    if (user.length < 1) return null;\n    const match = await new Promise<boolean>((resolve, reject) => {\n      bcrypt.compare(password, user[0].password, (err, isMatch) => {\n        if (err) reject(err);\n        resolve(isMatch);\n      });\n    });\n    if (!match) return null;\n    return user[0] as User;\n  } catch (error) {\n    console.error(\"Error fetching user by password:\", error);\n    throw new Error(\"Could not fetch user\");\n  }\n}\n\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\n  const result = await query<RowDataPacket>(\n    `\n    UPDATE ${coreSchema}.users\n    SET verify_code=?,updatedAt=?\n    WHERE user_id=?\n    `,\n    {\n      values: [newCode, new Date(), userId],\n    }\n  );\n  const user = await query<RowDataPacket[]>(\n    `\n      SELECT user_id,email,verify_code\n      FROM ${coreSchema}.users\n      WHERE user_id=?\n      `,\n    {\n      values: [userId],\n    }\n  );\n  return user[0] as CreateUser;\n}\n\nexport async function getAdmins() {\n  const userAdmin = await query<RowDataPacket[]>(`\n    SELECT * FROM ${coreSchema}.admin\n    `);\n  return userAdmin as AdminDTO[];\n}\n\nexport async function getOTP(email: any, tokenVerify: any) {\n  const updateData = await query<RowDataPacket[]>(\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\n    {\n      values: [tokenVerify, email],\n    }\n  );\n\n  const result = await query<RowDataPacket[]>(\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\n    {\n      values: [email],\n    }\n  );\n  return result[0] as User;\n}\n\nexport async function updateProfileUser(data: User): Promise<any> {\n  const updateUsersql = `\n      UPDATE ${coreSchema}.users SET\n        firstName = ?,\n        lastName = ?,\n        email = ?,\n        address = ?,\n        country = ?,\n        city = ?,\n        state = ?,\n        zipcode = ?,\n      \n    `;\n  const updateUservalues = [\n    data.firstName,\n    data.lastName,\n    data.email,\n    data.address,\n    data.country,\n    data.city,\n    data.state,\n    data.zipcode,\n  ];\n  const result = await query<RowDataPacket[]>(updateUsersql, updateUservalues);\n  const insertSkillSql = `UPDATE ${coreSchema}.user_skill SET (user_id, skill_name) VALUES (?, ?)`;\n  for (const skill of data.skills) {\n    await query<RowDataPacket[]>(insertSkillSql, [data.user_id, skill]);\n  }\n  return result;\n}\n\nexport async function getNavItems() {\n  const getManu = await query<RowDataPacket[]>(`\n  SELECT\n  m.menu_id, \n  m.icon, \n  m.menu_name, \n  m.path, \n  s.submenu_id, \n  s.icon,\n  s.submenu_name, \n  s.url\nFROM \n  ${coreSchema}.menu m\nLEFT JOIN \n  ${coreSchema}.submenu s ON m.menu_id = s.menu_id\nORDER BY \n  m.menu_id, s.submenu_id;\n  `);\n\n  try {\n    const menuMap = new Map<number, Menu>();\n\n    getManu.forEach((row) => {\n      const menuId = row.menu_id;\n      if (!menuMap.has(menuId)) {\n        menuMap.set(menuId, {\n          menu_id: row.menu_id,\n          icon: row.icon,\n          menu_name: row.menu_name,\n          path: row.path,\n          submenus: [],\n        });\n      }\n\n      if (row.submenu_id) {\n        const submenu: Submenu = {\n          submenu_id: row.submenu_id,\n          submenu_name: row.submenu_name,\n          url: row.url,\n          icon: row.icon,\n        };\n        menuMap.get(menuId)?.submenus.push(submenu);\n      }\n    });\n\n    return Array.from(menuMap.values());\n  } catch (error) {\n    console.error(\"Error fetching navigation items:\", error);\n    throw error;\n  }\n}\n\nexport async function getUserInfo(email: string) {\n  const data = await query<RowDataPacket[]>(\n    `SELECT * FROM ${coreSchema}.patients WHERE email=?`,\n    {\n      values: [email],\n    }\n  );\n  if (data) return data;\n}\n\nexport async function saveAppointment(eventData: IAppointment) {\n  try {\n    const insertEvent = await query<RowDataPacket[]>(\n      `INSERT INTO ${coreSchema}.calendar_events \n      (event_title, color, date, event_description)\n       VALUES (?, ?, ?, ?)`,\n      {\n        values: [\n          eventData.event_title,\n          eventData.color,\n          eventData.date,\n          eventData.event_description,\n        ],\n      }\n    );\n\n    return insertEvent;\n  } catch (error) {\n    throw new Error(`Error inserting event: ${error}`);\n  }\n}\n\nexport async function getAppointment() {\n  const getEventData = await query<RowDataPacket[]>(\n    `SELECT * FROM ${coreSchema}.calendar_events`\n  );\n  return getEventData;\n}\n\nexport async function updateAppointment(\n  data: IAppointment\n): Promise<IAppointment[] | undefined> {\n  const result = await query<RowDataPacket[]>(\n    `UPDATE ${coreSchema}.calendar_events\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`,\n    {\n      values: [data.date, new Date(), data.event_id],\n    }\n  );\n  if (result) {\n    return result as IAppointment[];\n  }\n}\n\nexport async function deleteAppointment(event_id: string) {\n  const result = await query<RowDataPacket[]>(\n    `DELETE FROM ${coreSchema}.calendar_events\n      WHERE event_id=?`,\n    {\n      values: [event_id],\n    }\n  );\n  return result;\n}\n\nexport async function getCustomers() {\n  const customers = await query<RowDataPacket[]>(`\n  SELECT * FROM ${coreSchema}.patients\n  `);\n  return customers;\n}\n\nexport async function getUserSkills() {\n  const skills = await query<RowDataPacket[]>(`\n    SELECT * FROM ${coreSchema}.user_skill\n    `);\n  return skills;\n}\n\nexport async function addPatient(patientData: PatientDTO) {\n  try {\n    const result = await query<RowDataPacket[]>(\n      `INSERT INTO ${coreSchema}.patients\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\n        bloodGroup, bloodPressure, sugarLevel, condition, profileImage)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\n      {\n        values: [\n          patientData.firstName,\n          patientData.lastName,\n          patientData.gender,\n          patientData.mobile,\n          patientData.dateOfBirth,\n          patientData.age,\n          patientData.email,\n          patientData.maritalStatus,\n          patientData.address,\n          patientData.bloodGroup,\n          patientData.bloodPressure,\n          patientData.sugarLevel,\n          patientData.condition,\n          patientData.profileImage,\n        ],\n      }\n    );\n    return result;\n  } catch (error) {\n    console.log();\n    console.error(\"Error inserting patient data:\", error);\n    throw error;\n  }\n}\n"],"mappings":"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","ignoreList":[]}},"mtime":1722156479789},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup = __importStar(require(\"yup\"));\nconst create = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nconst createPassword = yup.object().shape({\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nconst userRoles = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nconst latestTemplates = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nconst confirmEmail = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nconst checkEmail = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\nexports.default = {\n  userRoles,\n  latestTemplates,\n  create,\n  createPassword,\n  confirmEmail,\n  checkEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiY3JlYXRlIiwib2JqZWN0Iiwic2hhcGUiLCJmaXN0TmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdE5hbWUiLCJuaWNrTmFtZSIsImdlbmRlciIsImJpcnRoRGF5IiwiZW1haWwiLCJwaG9uZU51bWJlciIsIm51bGxhYmxlIiwidG9rZW5WZXJpZnkiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwiY3JlYXRlUGFzc3dvcmQiLCJ1c2VyUm9sZXMiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXMiLCJjb25maXJtRW1haWwiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWwiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB5dXAgZnJvbSBcInl1cFwiO1xuXG5jb25zdCBjcmVhdGUgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xuICBmaXN0TmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZmlzdE5hbWUgaXMgcmVxdWlyZWRcIiksXG4gIGxhc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsYXN0TmFtZSBpcyByZXF1aXJlZFwiKSxcbiAgbmlja05hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcIm5pY2tOYW1lIGlzIHJlcXVpcmVkXCIpLFxuICBnZW5kZXI6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImdlbmRlciBpcyByZXF1aXJlZFwiKSxcbiAgYmlydGhEYXk6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImJpcnRoRGF5IGlzIHJlcXVpcmVkXCIpLFxuICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKFwiaW52YWxpZCBlbWFpbFwiKS5yZXF1aXJlZChcImVtYWlsIGlzIHJlcXVpcmVkXCIpLFxuICBwaG9uZU51bWJlcjogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgcGFzc3dvcmQ6IHl1cFxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXG59KTtcbmNvbnN0IGNyZWF0ZVBhc3N3b3JkID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgcGFzc3dvcmQ6IHl1cFxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAub25lT2YoW3l1cC5yZWYoXCJjb25maXJtUGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxuICAgIC5zdHJpbmcoKVxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXG59KTtcbmNvbnN0IHVzZXJSb2xlcyA9IHl1cFxuICAub2JqZWN0KClcbiAgLnNoYXBlKHtcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcbiAgfSlcbiAgLnJlcXVpcmVkKCk7XG5cbmNvbnN0IGxhdGVzdFRlbXBsYXRlcyA9IHl1cFxuICAub2JqZWN0KClcbiAgLnNoYXBlKHtcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcbiAgfSlcbiAgLnJlcXVpcmVkKCk7XG5cbmNvbnN0IGNvbmZpcm1FbWFpbCA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJlbWFpbCBpcyByZXF1aXJlZFwiKSxcbiAgLy8gaWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXIgaWQgaXMgcmVxdWlyZWRcIiksXG4gIHZlcmlmeV9jb2RlOiB5dXBcbiAgICAuc3RyaW5nKClcbiAgICAucmVxdWlyZWQoXCJ2ZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKVxuICAgIC5taW4oNCwgXCJ2ZXJpZnkgY29kZSBzaG91bGQgYmUgNCBjaHJcIilcbiAgICAubWF4KDQsIFwidmVyaWZ5IGNvZGUgc2hvdWxkIGJlIDQgY2hyXCIpLFxufSk7XG5cbmNvbnN0IGNoZWNrRW1haWwgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdXNlclJvbGVzLFxuICBsYXRlc3RUZW1wbGF0ZXMsXG4gIGNyZWF0ZSxcbiAgY3JlYXRlUGFzc3dvcmQsXG4gIGNvbmZpcm1FbWFpbCxcbiAgY2hlY2tFbWFpbFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxNQUFNLEdBQUdILEdBQUcsQ0FBQ0ksTUFB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","map":{"version":3,"names":["yup","__importStar","require","create","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPassword","userRoles","userId","latestTemplates","confirmEmail","verify_code","max","checkEmail","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/My-projects/user-information/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\n\nconst create = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup\n    .string()\n    .min(8, \"at least 8 characters\")\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup\n    .string()\n    .min(8, \"at least 8 characters\")\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\n});\nconst createPassword = yup.object().shape({\n  password: yup\n    .string()\n    .min(8, \"at least 8 characters\")\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup\n    .string()\n    .min(8, \"at least 8 characters\")\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\n});\nconst userRoles = yup\n  .object()\n  .shape({\n    userId: yup.string().required(\"userId is required\"),\n  })\n  .required();\n\nconst latestTemplates = yup\n  .object()\n  .shape({\n    userId: yup.string().required(\"userId is required\"),\n  })\n  .required();\n\nconst confirmEmail = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup\n    .string()\n    .required(\"verify code is required\")\n    .min(4, \"verify code should be 4 chr\")\n    .max(4, \"verify code should be 4 chr\"),\n});\n\nconst checkEmail = yup.object().shape({\n  email: yup.string().required(\"email is required!\"),\n});\n\nexport default {\n  userRoles,\n  latestTemplates,\n  create,\n  createPassword,\n  confirmEmail,\n  checkEmail\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1722062091000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.query = exports.mysql = exports.pool = exports.coreSchema = void 0;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 20,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\nexports.query = query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJleHBvcnRzIiwiY29uZmlnIiwiY29yZVNjaGVtYSIsInByb2Nlc3MiLCJlbnYiLCJEQl9EQVRBQkFTRSIsInBvb2wiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInF1ZXJ5Iiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcYmluXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9iaW4vbXlzcWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgZG90ZW52IGZyb20gXCJkb3RlbnZcIjtcbmltcG9ydCB7IFJlc3VsdFNldEhlYWRlciwgUm93RGF0YVBhY2tldCB9IGZyb20gXCJteXNxbDJcIjtcbmltcG9ydCAqIGFzIG15c3FsIGZyb20gXCJteXNxbDIvcHJvbWlzZVwiO1xuaW1wb3J0IHsgUG9vbENvbm5lY3Rpb24gfSBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcblxuZG90ZW52LmNvbmZpZygpO1xuY29uc3QgY29yZVNjaGVtYSA9IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFO1xuXG5leHBvcnQgeyBSZXN1bHRTZXRIZWFkZXIsIFJvd0RhdGFQYWNrZXQsIGNvcmVTY2hlbWEgfTtcblxuY29uc3QgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woe1xuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NULFxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSTkFNRSxcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JELFxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfREFUQUJBU0UsXG4gIGNvbm5lY3Rpb25MaW1pdDogMjAsXG4gIHF1ZXVlTGltaXQ6IDAsXG4gIGNoYXJzZXQ6IFwidXRmOFwiLFxuICB0aW1lem9uZTogcHJvY2Vzcy5lbnYuREJfVElNRVpPTkUsXG59KTtcblxucG9vbC5vbihcImNvbm5lY3Rpb25cIiwgKGNvbm5lY3Rpb246IFBvb2xDb25uZWN0aW9uKTogdm9pZCA9PiB7XG4gIGNvbm5lY3Rpb24uY29uZmlnLm5hbWVkUGxhY2Vob2xkZXJzID0gdHJ1ZTtcbn0pO1xuXG5leHBvcnQgeyBwb29sLCBteXNxbCB9O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVlcnk8VCBleHRlbmRzIFJvd0RhdGFQYWNrZXRbXSB8IFJlc3VsdFNldEhlYWRlciB8IGFueT4oXG4gIHNxbDogc3RyaW5nLFxuICBvcHRpb25zOiB7XG4gICAgY29ubmVjdGlvbj86IFBvb2xDb25uZWN0aW9uO1xuICAgIG5lc3RUYWJsZXM/OiBib29sZWFuO1xuICAgIHZhbHVlcz86IGFueVtdIHwgYW55O1xuICB9ID0ge30sXG4gIGF0dGVtcHQ6IG51bWJlciA9IDBcbik6IFByb21pc2U8VD4ge1xuICBjb25zdCB1c2VFeHRlcm5hbENvbm5lY3Rpb24gPSBCb29sZWFuKG9wdGlvbnMuY29ubmVjdGlvbik7XG4gIGNvbnN0IGNvbm5lY3Rpb246IFBvb2xDb25uZWN0aW9uID1cbiAgICBvcHRpb25zLmNvbm5lY3Rpb24gfHwgKGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpKTtcblxuICBsZXQgcmVzdWx0O1xuICBsZXQgc3FsUXVlcnkgPSBzcWw7XG5cbiAgdHJ5IHtcbiAgICBzcWxRdWVyeSA9IGNvbm5lY3Rpb24uZm9ybWF0KHNxbCwgb3B0aW9ucy52YWx1ZXMpO1xuICAgIFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeSh7XG4gICAgICBzcWwsXG4gICAgICB2YWx1ZXM6IG9wdGlvbnMudmFsdWVzLFxuICAgICAgbmVzdFRhYmxlczogb3B0aW9ucy5uZXN0VGFibGVzLFxuICAgIH0pO1xuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICByZXN1bHQgPSBbXTtcbiAgICB9XG4gIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgIGUubWVzc2FnZSA9IGAke2UuY29kZX1cXG5zcWw6ICR7c3FsUXVlcnl9XFxuZXJyb3I6ICR7ZS5tZXNzYWdlfVxcbnRpbWU6IH1gO1xuXG4gICAgdGhyb3cgZTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoIXVzZUV4dGVybmFsQ29ubmVjdGlvbikge1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQgYXMgVDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLE1BQUEsR0FBQUMsWUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBQUMsS0FBQSxHQUFBRixZQUFBLENBQUFDLE9BQUE7QUF1QmVFLE9BQUEsQ0FBQUQsS0FBQSxHQUFBQSxLQUFBO0FBcEJmSCxNQUFNLENBQUNLLE1BQU0sRUFBRTtBQUNmLE1BQU1DLFVBQVUsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7QUFFREwsT0FBQSxDQUFBRSxVQUFBLEdBQUFBLFVBQUE7QUFFekMsTUFBTUksSUFBSSxHQUFHUCxLQUFLLENBQUNRLFVBQVUsQ0FBQztFQUM1QkMsSUFBSSxFQUFFTCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ssT0FBTztFQUN6QkMsSUFBSSxFQUFFUCxPQUFPLENBQUNDLEdBQUcsQ0FBQ08sV0FBVztFQUM3QkMsUUFBUSxFQUFFVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsV0FBVztFQUNqQ0MsUUFBUSxFQUFFWCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsV0FBVztFQUNqQ1UsZUFBZSxFQUFFLEVBQUU7RUFDbkJDLFVBQVUsRUFBRSxDQUFDO0VBQ2JDLE9BQU8sRUFBRSxNQUFNO0VBQ2ZDLFFBQVEsRUFBRWYsT0FBTyxDQUFDQyxHQUFHLENBQUNlO0NBQ3ZCLENBQUM7QUFNT25CLE9BQUEsQ0FBQU0sSUFBQSxHQUFBQSxJQUFBO0FBSlRBLElBQUksQ0FBQ2MsRUFBRSxDQUFDLFlBQVksRUFBR0MsVUFBMEIsSUFBVTtFQUN6REEsVUFBVSxDQUFDcEIsTUFBTSxDQUFDcUIsaUJBQWlCLEdBQUcsSUFBSTtBQUM1QyxDQUFDLENBQUM7QUFJRixTQUFzQkMsS0FBS0EsQ0FBQUMsS0FBQTt1REFDekJDLEdBQVcsRUFDWEMsT0FBQSxHQUlJLEVBQUUsRUFDTkMsT0FBQSxHQUFrQixDQUFDO0lBRW5CLE1BQU1DLHFCQUFxQixHQUFHQyxPQUFPLENBQUNILE9BQU8sQ0FBQ0wsVUFBVSxDQUFDO0lBQ3pELE1BQU1BLFVBQVUsR0FDZEssT0FBTyxDQUFDTCxVQUFVLEtBQUssTUFBTWYsSUFBSSxDQUFDd0IsYUFBYSxFQUFFLENBQUM7SUFFcEQsSUFBSUMsTUFBTTtJQUNWLElBQUlDLFFBQVEsR0FBR1AsR0FBRztJQUVsQixJQUFJO01BQ0ZPLFFBQVEsR0FBR1gsVUFBVSxDQUFDWSxNQUFNLENBQUNSLEdBQUcsRUFBRUMsT0FBTyxDQUFDUSxNQUFNLENBQUM7TUFDakQsQ0FBQ0gsTUFBTSxDQUFDLEdBQUcsTUFBTVYsVUFBVSxDQUFDRSxLQUFLLENBQUM7UUFDaENFLEdBQUc7UUFDSFMsTUFBTSxFQUFFUixPQUFPLENBQUNRLE1BQU07UUFDdEJDLFVBQVUsRUFBRVQsT0FBTyxDQUFDUztPQUNyQixDQUFDO01BQ0YsSUFBSSxDQUFDSixNQUFNLEVBQUU7UUFDWEEsTUFBTSxHQUFHLEVBQUU7TUFDYjtJQUNGLENBQUMsQ0FBQyxPQUFPSyxDQUFNLEVBQUU7TUFDZkEsQ0FBQyxDQUFDQyxPQUFPLEdBQUcsR0FBR0QsQ0FBQyxDQUFDRSxJQUFJLFVBQVVOLFFBQVEsWUFBWUksQ0FBQyxDQUFDQyxPQUFPLFdBQVc7TUFFdkUsTUFBTUQsQ0FBQztJQUNULENBQUMsU0FBUztNQUNSLElBQUksQ0FBQ1IscUJBQXFCLEVBQUU7UUFDMUJQLFVBQVUsQ0FBQ2tCLE9BQU8sRUFBRTtNQUN0QjtJQUNGO0lBQ0EsT0FBT1IsTUFBVztFQUNwQixDQUFDOztBQXBDRC9CLE9BQUEsQ0FBQXVCLEtBQUEsR0FBQUEsS0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["dotenv","__importStar","require","mysql","exports","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","query","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\bin\\","sources":["D:/My-projects/user-information/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\nimport * as mysql from \"mysql2/promise\";\nimport { PoolConnection } from \"mysql2/promise\";\n\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\n\nexport { ResultSetHeader, RowDataPacket, coreSchema };\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 20,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE,\n});\n\npool.on(\"connection\", (connection: PoolConnection): void => {\n  connection.config.namedPlaceholders = true;\n});\n\nexport { pool, mysql };\n\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\n  sql: string,\n  options: {\n    connection?: PoolConnection;\n    nestTables?: boolean;\n    values?: any[] | any;\n  } = {},\n  attempt: number = 0\n): Promise<T> {\n  const useExternalConnection = Boolean(options.connection);\n  const connection: PoolConnection =\n    options.connection || (await pool.getConnection());\n\n  let result;\n  let sqlQuery = sql;\n\n  try {\n    sqlQuery = connection.format(sql, options.values);\n    [result] = await connection.query({\n      sql,\n      values: options.values,\n      nestTables: options.nestTables,\n    });\n    if (!result) {\n      result = [];\n    }\n  } catch (e: any) {\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n\n    throw e;\n  } finally {\n    if (!useExternalConnection) {\n      connection.release();\n    }\n  }\n  return result as T;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeE,OAAA,CAAAD,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACK,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDL,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGP,KAAK,CAACQ,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOnB,OAAA,CAAAM,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsBC,KAAKA,CAAAC,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACL,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdK,OAAO,CAACL,UAAU,KAAK,MAAMf,IAAI,CAACwB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGX,UAAU,CAACY,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMV,UAAU,CAACE,KAAK,CAAC;QAChCE,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BP,UAAU,CAACkB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC;;AApCD/B,OAAA,CAAAuB,KAAA,GAAAA,KAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev3 = exports.getUniqueCodev2 = void 0;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev2 = getUniqueCodev2;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev3 = getUniqueCodev3;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVbmlxdWVDb2RldjIiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYzIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2hlbHBlci9jb21tb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxuICovXG5mdW5jdGlvbiBnZXRVbmlxdWVDb2RldjIobGVuZ3RoID0gMzIpIHtcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gIGNvbnN0IGNoYXJhY3RlcnMgPVxuICAgIFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcbiAgY29uc3QgY2hhcmFjdGVyc0xlbmd0aCA9IGNoYXJhY3RlcnMubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnNMZW5ndGgpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqXG4gKiBAcGFyYW0gbGVuZ3RoIC0gR2VuZXJhdGUgVW5pcXVlIENvZGUgKCBkZWZhdWx0IGxlbmd0aCAzMiApXG4gKi9cbmZ1bmN0aW9uIGdldFVuaXF1ZUNvZGV2MyhsZW5ndGggPSA0KSB7XG4gICAgbGV0IHJlc3VsdCA9ICcnXG4gICAgY29uc3QgY2hhcmFjdGVycyA9XG4gICAgICAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5J1xuICAgIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSlcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5leHBvcnQge1xuICAgIGdldFVuaXF1ZUNvZGV2MixcbiAgICBnZXRVbmlxdWVDb2RldjNcbiAgfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFJQSxTQUFTQSxlQUFlQSxDQUFDQyxNQUFNLEdBQUcsRUFBRTtFQUNsQyxJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxnRUFBZ0U7RUFDbEUsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZjtBQWlCSVEsT0FBQSxDQUFBVixlQUFBLEdBQUFBLGVBQUE7QUFmSjs7OztBQUlBLFNBQVNXLGVBQWVBLENBQUNWLE1BQU0sR0FBRyxDQUFDO0VBQy9CLElBQUlDLE1BQU0sR0FBRyxFQUFFO0VBQ2YsTUFBTUMsVUFBVSxHQUNkLHNDQUFzQztFQUN4QyxNQUFNQyxnQkFBZ0IsR0FBR0QsVUFBVSxDQUFDRixNQUFNO0VBQzFDLEtBQUssSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSixNQUFNLEVBQUVJLENBQUMsSUFBSSxDQUFDLEVBQUU7SUFDbENILE1BQU0sSUFBSUMsVUFBVSxDQUFDRyxNQUFNLENBQUNDLElBQUksQ0FBQ0MsS0FBSyxDQUFDRCxJQUFJLENBQUNFLE1BQU0sRUFBRSxHQUFHTCxnQkFBZ0IsQ0FBQyxDQUFDO0VBQzNFO0VBQ0EsT0FBT0YsTUFBTTtBQUNmO0FBR0VRLE9BQUEsQ0FBQUMsZUFBQSxHQUFBQSxlQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["getUniqueCodev2","length","result","characters","charactersLength","i","charAt","Math","floor","random","exports","getUniqueCodev3"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/My-projects/user-information/server/src/helper/common.ts"],"sourcesContent":["/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n    let result = ''\n    const characters =\n      'abcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i += 1) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\nexport {\n    getUniqueCodev2,\n    getUniqueCodev3\n  }"],"mappings":";;;;;;AAAA;;;;AAIA,SAASA,eAAeA,CAACC,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAiBIQ,OAAA,CAAAV,eAAA,GAAAA,eAAA;AAfJ;;;;AAIA,SAASW,eAAeA,CAACV,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAGEQ,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst fs_1 = __importDefault(require(\"fs\"));\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst email_1 = __importDefault(require(\"../config/email\"));\nconst file_1 = require(\"../helper/file\");\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nconst {\n  APP_NAME\n} = process.env;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nclass SendEmail {\n  static AccountRegister(formData) {\n    const {\n      email\n    } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path_1.default.resolve(__dirname, `../public/template/email/emailverify.html`);\n    const subject = \"MindUp Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.default();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.default.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n  static forgetPassToken(formData, token) {\n    const {\n      email\n    } = formData;\n    const TOKEN = token;\n    const pathTemplate = path_1.default.resolve(__dirname, `../public/template/email/reset-password.html`);\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.default();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.default.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n}\n_a = SendEmail;\nSendEmail.sendResetPasswordEmail = (email, userName, resetLink) => __awaiter(void 0, void 0, void 0, function* () {\n  // Read the HTML template\n  const templatePath = path_1.default.join(__dirname, 'templates', '../public/template/email/reset-password.html');\n  const template = fs_1.default.readFileSync(templatePath, 'utf-8');\n  // Replace placeholders with actual values\n  const htmlContent = template.replace('{{userName}}', userName).replace(/{{resetLink}}/g, resetLink);\n  // Create a transporter\n  const transporter = nodemailer_1.default.createTransport({\n    host: 'smtp.example.com',\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: 'aliakbaresmaeili98@gmail.com',\n      // your SMTP username\n      pass: 'cgop ttip zuqz hqlr' // your SMTP password\n    }\n  });\n  // Send email\n  const info = yield transporter.sendMail({\n    from: '\"Your Company\" <no-reply@yourcompany.com>',\n    to: email,\n    subject: 'Reset Your Password',\n    html: htmlContent\n  });\n  console.log('Message sent: %s', info.messageId);\n});\nexports.default = SendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImhhbmRsZWJhcnNfMSIsInBhdGhfMSIsImVtYWlsXzEiLCJmaWxlXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiQVBQX05BTUUiLCJwcm9jZXNzIiwiZW52Iiwibm9kZW1haWxlcl8xIiwiU2VuZEVtYWlsIiwiQWNjb3VudFJlZ2lzdGVyIiwiZm9ybURhdGEiLCJlbWFpbCIsIlRPS0VOIiwidmVyaWZ5X2NvZGUiLCJwYXRoVGVtcGxhdGUiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInN1YmplY3QiLCJkYXRhVGVtcGxhdGUiLCJFbWFpbCIsInJlYWRIVE1MRmlsZSIsImVycm9yIiwiaHRtbCIsIk5vdEZvdW5kIiwidGVtcGxhdGUiLCJjb21waWxlIiwiaHRtbFRvU2VuZCIsInNlbmQiLCJmb3JnZXRQYXNzVG9rZW4iLCJ0b2tlbiIsInNlbmRSZXNldFBhc3N3b3JkRW1haWwiLCJ1c2VyTmFtZSIsInJlc2V0TGluayIsIl9fYXdhaXRlciIsInRlbXBsYXRlUGF0aCIsImpvaW4iLCJyZWFkRmlsZVN5bmMiLCJodG1sQ29udGVudCIsInJlcGxhY2UiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiZnJvbSIsInRvIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvaGVscGVyL3NlbmRfZW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBoYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IEVtYWlsUHJvdmlkZXIgZnJvbSBcIi4uL2NvbmZpZy9lbWFpbFwiO1xuaW1wb3J0IHsgcmVhZEhUTUxGaWxlIH0gZnJvbSBcIi4uL2hlbHBlci9maWxlXCI7XG5pbXBvcnQgUmVzcG9uc2VFcnJvciBmcm9tIFwiLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlcy91c2VyXCI7XG5jb25zdCB7IEFQUF9OQU1FIH0gPSBwcm9jZXNzLmVudjtcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XG5cbmNsYXNzIFNlbmRFbWFpbCB7XG4gIHB1YmxpYyBzdGF0aWMgQWNjb3VudFJlZ2lzdGVyKGZvcm1EYXRhOiBhbnkpIHtcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YTtcbiAgICBjb25zdCBUT0tFTiA9IGZvcm1EYXRhLnZlcmlmeV9jb2RlO1xuICAgIGNvbnN0IHBhdGhUZW1wbGF0ZSA9IHBhdGgucmVzb2x2ZShcbiAgICAgIF9fZGlybmFtZSxcbiAgICAgIGAuLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvZW1haWx2ZXJpZnkuaHRtbGBcbiAgICApO1xuXG4gICAgY29uc3Qgc3ViamVjdCA9IFwiTWluZFVwIFJlZ2lzdGVyYXRpb25cIjtcbiAgICAvLyBjb25zdCB1cmxUb2tlbiA9IGAke0JBU0VfVVJMX0NMSUVOVH0vZW1haWwvdmVyaWZ5P3Rva2VuPSR7dG9rZW59YFxuICAgIGNvbnN0IGRhdGFUZW1wbGF0ZSA9IHsgQVBQX05BTUUsIFRPS0VOIH07XG4gICAgY29uc3QgRW1haWwgPSBuZXcgRW1haWxQcm92aWRlcigpO1xuXG4gICAgcmVhZEhUTUxGaWxlKHBhdGhUZW1wbGF0ZSwgKGVycm9yOiBFcnJvciwgaHRtbDogYW55KSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuTm90Rm91bmQoXCJlbWFpbCB0ZW1wbGF0ZSBub3QgZm91bmRcIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gaGFuZGxlYmFycy5jb21waWxlKGh0bWwpO1xuICAgICAgY29uc3QgaHRtbFRvU2VuZCA9IHRlbXBsYXRlKGRhdGFUZW1wbGF0ZSk7XG5cbiAgICAgIEVtYWlsLnNlbmQoZW1haWwsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBmb3JnZXRQYXNzVG9rZW4oZm9ybURhdGE6IFVzZXIsIHRva2VuOiBzdHJpbmcpIHtcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBmb3JtRGF0YTtcbiAgICBjb25zdCBUT0tFTiA9IHRva2VuO1xuICAgIGNvbnN0IHBhdGhUZW1wbGF0ZSA9IHBhdGgucmVzb2x2ZShcbiAgICAgIF9fZGlybmFtZSxcbiAgICAgIGAuLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvcmVzZXQtcGFzc3dvcmQuaHRtbGBcbiAgICApO1xuXG4gICAgY29uc3Qgc3ViamVjdCA9IFwiQWxpc2hvcGVlZSBSZWdpc3RlcmF0aW9uXCI7XG4gICAgLy8gY29uc3QgdXJsVG9rZW4gPSBgJHtCQVNFX1VSTF9DTElFTlR9L2VtYWlsL3ZlcmlmeT90b2tlbj0ke3Rva2VufWBcbiAgICBjb25zdCBkYXRhVGVtcGxhdGUgPSB7IEFQUF9OQU1FLCBUT0tFTiB9O1xuICAgIGNvbnN0IEVtYWlsID0gbmV3IEVtYWlsUHJvdmlkZXIoKTtcblxuICAgIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFwiZW1haWwgdGVtcGxhdGUgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZShkYXRhVGVtcGxhdGUpO1xuICAgICAgRW1haWwuc2VuZChlbWFpbFxuICAgICAgICAsIHN1YmplY3QsIGh0bWxUb1NlbmQpO1xuICAgIH0pO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIHNlbmRSZXNldFBhc3N3b3JkRW1haWwgPSBhc3luYyAoZW1haWw6IHN0cmluZywgdXNlck5hbWU6IHN0cmluZywgcmVzZXRMaW5rOiBzdHJpbmcpID0+IHtcbiAgICAvLyBSZWFkIHRoZSBIVE1MIHRlbXBsYXRlXG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJ3RlbXBsYXRlcycsICcuLi9wdWJsaWMvdGVtcGxhdGUvZW1haWwvcmVzZXQtcGFzc3dvcmQuaHRtbCcpO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZnMucmVhZEZpbGVTeW5jKHRlbXBsYXRlUGF0aCwgJ3V0Zi04Jyk7XG4gIFxuICAgIC8vIFJlcGxhY2UgcGxhY2Vob2xkZXJzIHdpdGggYWN0dWFsIHZhbHVlc1xuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gdGVtcGxhdGVcbiAgICAgIC5yZXBsYWNlKCd7e3VzZXJOYW1lfX0nLCB1c2VyTmFtZSlcbiAgICAgIC5yZXBsYWNlKC97e3Jlc2V0TGlua319L2csIHJlc2V0TGluayk7XG4gIFxuICAgIC8vIENyZWF0ZSBhIHRyYW5zcG9ydGVyXG4gICAgY29uc3QgdHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgICBob3N0OiAnc210cC5leGFtcGxlLmNvbScsXG4gICAgICBwb3J0OiA1ODcsXG4gICAgICBzZWN1cmU6IGZhbHNlLCAvLyB0cnVlIGZvciA0NjUsIGZhbHNlIGZvciBvdGhlciBwb3J0c1xuICAgICAgYXV0aDoge1xuICAgICAgICB1c2VyOiAnYWxpYWtiYXJlc21hZWlsaTk4QGdtYWlsLmNvbScsIC8vIHlvdXIgU01UUCB1c2VybmFtZVxuICAgICAgICBwYXNzOiAnY2dvcCB0dGlwIHp1cXogaHFscicsIC8vIHlvdXIgU01UUCBwYXNzd29yZFxuICAgICAgfSxcbiAgICB9KTtcbiAgXG4gICAgLy8gU2VuZCBlbWFpbFxuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgICBmcm9tOiAnXCJZb3VyIENvbXBhbnlcIiA8bm8tcmVwbHlAeW91cmNvbXBhbnkuY29tPicsXG4gICAgICB0bzogZW1haWwsXG4gICAgICBzdWJqZWN0OiAnUmVzZXQgWW91ciBQYXNzd29yZCcsXG4gICAgICBodG1sOiBodG1sQ29udGVudCxcbiAgICB9KTtcbiAgXG4gICAgY29uc29sZS5sb2coJ01lc3NhZ2Ugc2VudDogJXMnLCBpbmZvLm1lc3NhZ2VJZCk7XG4gIH07XG4gIFxufVxuXG5leHBvcnQgZGVmYXVsdCBTZW5kRW1haWw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxZQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLE1BQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsT0FBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxNQUFBLEdBQUFKLE9BQUE7QUFDQSxNQUFBSyxnQkFBQSxHQUFBTixlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNO0VBQUVNO0FBQVEsQ0FBRSxHQUFHQyxPQUFPLENBQUNDLEdBQUc7QUFDaEMsTUFBQUMsWUFBQSxHQUFBVixlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNVSxTQUFTO0VBQ04sT0FBT0MsZUFBZUEsQ0FBQ0MsUUFBYTtJQUN6QyxNQUFNO01BQUVDO0lBQUssQ0FBRSxHQUFHRCxRQUFRO0lBQzFCLE1BQU1FLEtBQUssR0FBR0YsUUFBUSxDQUFDRyxXQUFXO0lBQ2xDLE1BQU1DLFlBQVksR0FBR2QsTUFBQSxDQUFBZSxPQUFJLENBQUNDLE9BQU8sQ0FDL0JDLFNBQVMsRUFDVCwyQ0FBMkMsQ0FDNUM7SUFFRCxNQUFNQyxPQUFPLEdBQUcsc0JBQXNCO0lBQ3RDO0lBQ0EsTUFBTUMsWUFBWSxHQUFHO01BQUVmLFFBQVE7TUFBRVE7SUFBSyxDQUFFO0lBQ3hDLE1BQU1RLEtBQUssR0FBRyxJQUFJbkIsT0FBQSxDQUFBYyxPQUFhLEVBQUU7SUFFakMsSUFBQWIsTUFBQSxDQUFBbUIsWUFBWSxFQUFDUCxZQUFZLEVBQUUsQ0FBQ1EsS0FBWSxFQUFFQyxJQUFTLEtBQUk7TUFDckQsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsZ0JBQUEsQ0FBQVksT0FBYSxDQUFDUyxRQUFRLENBQUMsMEJBQTBCLENBQUM7TUFDOUQ7TUFFQSxNQUFNQyxRQUFRLEdBQUcxQixZQUFBLENBQUFnQixPQUFVLENBQUNXLE9BQU8sQ0FBQ0gsSUFBSSxDQUFDO01BQ3pDLE1BQU1JLFVBQVUsR0FBR0YsUUFBUSxDQUFDTixZQUFZLENBQUM7TUFFekNDLEtBQUssQ0FBQ1EsSUFBSSxDQUFDakIsS0FBSyxFQUFFTyxPQUFPLEVBQUVTLFVBQVUsQ0FBQztJQUN4QyxDQUFDLENBQUM7RUFDSjtFQUVPLE9BQU9FLGVBQWVBLENBQUNuQixRQUFjLEVBQUVvQixLQUFhO0lBQ3pELE1BQU07TUFBRW5CO0lBQUssQ0FBRSxHQUFHRCxRQUFRO0lBQzFCLE1BQU1FLEtBQUssR0FBR2tCLEtBQUs7SUFDbkIsTUFBTWhCLFlBQVksR0FBR2QsTUFBQSxDQUFBZSxPQUFJLENBQUNDLE9BQU8sQ0FDL0JDLFNBQVMsRUFDVCw4Q0FBOEMsQ0FDL0M7SUFFRCxNQUFNQyxPQUFPLEdBQUcsMEJBQTBCO0lBQzFDO0lBQ0EsTUFBTUMsWUFBWSxHQUFHO01BQUVmLFFBQVE7TUFBRVE7SUFBSyxDQUFFO0lBQ3hDLE1BQU1RLEtBQUssR0FBRyxJQUFJbkIsT0FBQSxDQUFBYyxPQUFhLEVBQUU7SUFFakMsSUFBQWIsTUFBQSxDQUFBbUIsWUFBWSxFQUFDUCxZQUFZLEVBQUUsQ0FBQ1EsS0FBWSxFQUFFQyxJQUFTLEtBQUk7TUFDckQsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsTUFBTSxJQUFJbkIsZ0JBQUEsQ0FBQVksT0FBYSxDQUFDUyxRQUFRLENBQUMsMEJBQTBCLENBQUM7TUFDOUQ7TUFFQSxNQUFNQyxRQUFRLEdBQUcxQixZQUFBLENBQUFnQixPQUFVLENBQUNXLE9BQU8sQ0FBQ0gsSUFBSSxDQUFDO01BQ3pDLE1BQU1JLFVBQVUsR0FBR0YsUUFBUSxDQUFDTixZQUFZLENBQUM7TUFDekNDLEtBQUssQ0FBQ1EsSUFBSSxDQUFDakIsS0FBSyxFQUNaTyxPQUFPLEVBQUVTLFVBQVUsQ0FBQztJQUMxQixDQUFDLENBQUM7RUFDSjs7O0FBR2NuQixTQUFBLENBQUF1QixzQkFBc0IsR0FBRyxDQUFPcEIsS0FBYSxFQUFFcUIsUUFBZ0IsRUFBRUMsU0FBaUIsS0FBSUMsU0FBQTtFQUNsRztFQUNBLE1BQU1DLFlBQVksR0FBR25DLE1BQUEsQ0FBQWUsT0FBSSxDQUFDcUIsSUFBSSxDQUFDbkIsU0FBUyxFQUFFLFdBQVcsRUFBRSw4Q0FBOEMsQ0FBQztFQUN0RyxNQUFNUSxRQUFRLEdBQUc3QixJQUFBLENBQUFtQixPQUFFLENBQUNzQixZQUFZLENBQUNGLFlBQVksRUFBRSxPQUFPLENBQUM7RUFFdkQ7RUFDQSxNQUFNRyxXQUFXLEdBQUdiLFFBQVEsQ0FDekJjLE9BQU8sQ0FBQyxjQUFjLEVBQUVQLFFBQVEsQ0FBQyxDQUNqQ08sT0FBTyxDQUFDLGdCQUFnQixFQUFFTixTQUFTLENBQUM7RUFFdkM7RUFDQSxNQUFNTyxXQUFXLEdBQUdqQyxZQUFBLENBQUFRLE9BQVUsQ0FBQzBCLGVBQWUsQ0FBQztJQUM3Q0MsSUFBSSxFQUFFLGtCQUFrQjtJQUN4QkMsSUFBSSxFQUFFLEdBQUc7SUFDVEMsTUFBTSxFQUFFLEtBQUs7SUFBRTtJQUNmQyxJQUFJLEVBQUU7TUFDSkMsSUFBSSxFQUFFLDhCQUE4QjtNQUFFO01BQ3RDQyxJQUFJLEVBQUUscUJBQXFCLENBQUU7O0dBRWhDLENBQUM7RUFFRjtFQUNBLE1BQU1DLElBQUksR0FBRyxNQUFNUixXQUFXLENBQUNTLFFBQVEsQ0FBQztJQUN0Q0MsSUFBSSxFQUFFLDJDQUEyQztJQUNqREMsRUFBRSxFQUFFeEMsS0FBSztJQUNUTyxPQUFPLEVBQUUscUJBQXFCO0lBQzlCSyxJQUFJLEVBQUVlO0dBQ1AsQ0FBQztFQUVGYyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQkFBa0IsRUFBRUwsSUFBSSxDQUFDTSxTQUFTLENBQUM7QUFDakQsQ0FBQztBQUlIQyxPQUFBLENBQUF4QyxPQUFBLEdBQWVQLFNBQVMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["fs_1","__importDefault","require","handlebars_1","path_1","email_1","file_1","response_error_1","APP_NAME","process","env","nodemailer_1","SendEmail","AccountRegister","formData","email","TOKEN","verify_code","pathTemplate","default","resolve","__dirname","subject","dataTemplate","Email","readHTMLFile","error","html","NotFound","template","compile","htmlToSend","send","forgetPassToken","token","sendResetPasswordEmail","userName","resetLink","__awaiter","templatePath","join","readFileSync","htmlContent","replace","transporter","createTransport","host","port","secure","auth","user","pass","info","sendMail","from","to","console","log","messageId","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/My-projects/user-information/server/src/helper/send_email.ts"],"sourcesContent":["import fs from 'fs';\nimport handlebars from \"handlebars\";\nimport path from \"path\";\nimport EmailProvider from \"../config/email\";\nimport { readHTMLFile } from \"../helper/file\";\nimport ResponseError from \"../modules/error/response_error\";\nimport { User } from \"../types/user\";\nconst { APP_NAME } = process.env;\nimport nodemailer from \"nodemailer\";\n\nclass SendEmail {\n  public static AccountRegister(formData: any) {\n    const { email } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../public/template/email/emailverify.html`\n    );\n\n    const subject = \"MindUp Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n\n  public static forgetPassToken(formData: User, token: string) {\n    const { email } = formData;\n    const TOKEN = token;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../public/template/email/reset-password.html`\n    );\n\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email\n        , subject, htmlToSend);\n    });\n  }\n\n\n  public static sendResetPasswordEmail = async (email: string, userName: string, resetLink: string) => {\n    // Read the HTML template\n    const templatePath = path.join(__dirname, 'templates', '../public/template/email/reset-password.html');\n    const template = fs.readFileSync(templatePath, 'utf-8');\n  \n    // Replace placeholders with actual values\n    const htmlContent = template\n      .replace('{{userName}}', userName)\n      .replace(/{{resetLink}}/g, resetLink);\n  \n    // Create a transporter\n    const transporter = nodemailer.createTransport({\n      host: 'smtp.example.com',\n      port: 587,\n      secure: false, // true for 465, false for other ports\n      auth: {\n        user: 'aliakbaresmaeili98@gmail.com', // your SMTP username\n        pass: 'cgop ttip zuqz hqlr', // your SMTP password\n      },\n    });\n  \n    // Send email\n    const info = await transporter.sendMail({\n      from: '\"Your Company\" <no-reply@yourcompany.com>',\n      to: email,\n      subject: 'Reset Your Password',\n      html: htmlContent,\n    });\n  \n    console.log('Message sent: %s', info.messageId);\n  };\n  \n}\n\nexport default SendEmail;\n"],"mappings":"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","ignoreList":[]}},"mtime":1722081194000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst lodash_1 = require(\"lodash\");\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = !(0, lodash_1.isEmpty)(MAILGUN_API_KEY) || !(0, lodash_1.isEmpty)(MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.send = (to, subject, template) => {\n      const dest = Array.isArray(to) ? to.join(\",\") : to;\n      const text = template;\n      // send an e-mail\n      this.sendMail(dest, subject, text);\n    };\n    this.setMailConfig = () => {\n      // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n      const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n      const configTransport = {\n        service: MAIL_DRIVER,\n        auth: {\n          user: gmailEmail,\n          pass: gmailAppPassword\n        }\n      };\n      if (isMailgunAPI) {\n        configTransport.auth.api_key = MAILGUN_API_KEY;\n        configTransport.auth.domain = MAILGUN_DOMAIN;\n      } else {\n        // SMTP Default\n        configTransport.host = MAIL_HOST;\n        configTransport.port = MAIL_PORT;\n        configTransport.auth.user = MAIL_USERNAME;\n        configTransport.auth.pass = MAIL_PASSWORD;\n      }\n      return configTransport;\n    };\n    this.setMailOptions = (dest, subject, text) => {\n      return {\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\n        to: dest,\n        subject,\n        html: text\n      };\n    };\n    this.sendMail = (dest, subject, text) => {\n      this.mailConfig = isMailgunAPI ? (0, nodemailer_mailgun_transport_1.default)(this.setMailConfig()) : this.setMailConfig();\n      this.mailOptions = this.setMailOptions(dest, subject, text);\n      // Nodemailer Transport\n      const transporter = nodemailer_1.default.createTransport(this.mailConfig);\n      transporter.sendMail(this.mailOptions,\n      // @ts-ignore\n      (error, info) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      });\n    };\n  }\n}\nexports.default = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfMSIsInJlcXVpcmUiLCJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJub2RlbWFpbGVyX21haWxndW5fdHJhbnNwb3J0XzEiLCJBUFBfTkFNRSIsIk1BSUxfRFJJVkVSIiwiTUFJTF9IT1NUIiwiTUFJTF9QT1JUIiwiTUFJTF9VU0VSTkFNRSIsIk1BSUxfUEFTU1dPUkQiLCJNQUlMX0FVVEhfVFlQRSIsIk1BSUxHVU5fQVBJX0tFWSIsIk1BSUxHVU5fRE9NQUlOIiwiT0FVVEhfQ0xJRU5UX0lEIiwiT0FVVEhfQ0xJRU5UX1NFQ1JFVCIsIk9BVVRIX1JFRlJFU0hfVE9LRU4iLCJPQVVUSF9SRURJUkVDVF9VUkwiLCJwcm9jZXNzIiwiZW52IiwiaXNNYWlsZ3VuQVBJIiwiaXNFbXB0eSIsIkVtYWlsUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsInNlbmQiLCJ0byIsInN1YmplY3QiLCJ0ZW1wbGF0ZSIsImRlc3QiLCJBcnJheSIsImlzQXJyYXkiLCJqb2luIiwidGV4dCIsInNlbmRNYWlsIiwic2V0TWFpbENvbmZpZyIsImdtYWlsRW1haWwiLCJnbWFpbEFwcFBhc3N3b3JkIiwiY29uZmlnVHJhbnNwb3J0Iiwic2VydmljZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsInNldE1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJtYWlsQ29uZmlnIiwiZGVmYXVsdCIsIm1haWxPcHRpb25zIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29uZmlnXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb25maWcvZW1haWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XG5pbXBvcnQgbWcgZnJvbSBcIm5vZGVtYWlsZXItbWFpbGd1bi10cmFuc3BvcnRcIjtcblxuY29uc3Qge1xuICBBUFBfTkFNRSxcbiAgTUFJTF9EUklWRVIsXG4gIE1BSUxfSE9TVCxcbiAgTUFJTF9QT1JULFxuICBNQUlMX1VTRVJOQU1FLFxuICBNQUlMX1BBU1NXT1JELFxuICBNQUlMX0FVVEhfVFlQRSxcbiAgTUFJTEdVTl9BUElfS0VZLFxuICBNQUlMR1VOX0RPTUFJTixcbiAgT0FVVEhfQ0xJRU5UX0lELFxuICBPQVVUSF9DTElFTlRfU0VDUkVULFxuICBPQVVUSF9SRUZSRVNIX1RPS0VOLFxuICBPQVVUSF9SRURJUkVDVF9VUkwsXG59ID0gcHJvY2Vzcy5lbnY7XG5cbmNvbnN0IGlzTWFpbGd1bkFQSSA9ICFpc0VtcHR5KE1BSUxHVU5fQVBJX0tFWSkgfHwgIWlzRW1wdHkoTUFJTEdVTl9ET01BSU4pO1xuXG5jbGFzcyBFbWFpbFByb3ZpZGVyIHtcbiAgcHJpdmF0ZSBtYWlsQ29uZmlnOiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbztcbiAgcHJpdmF0ZSBtYWlsT3B0aW9uczogbm9kZW1haWxlci5TZW5kTWFpbE9wdGlvbnMgfCB1bmRlZmluZWQ7XG5cbiAgcHVibGljIHNlbmQgPSAoXG4gICAgdG86IHN0cmluZyB8IHN0cmluZ1tdLFxuICAgIHN1YmplY3Q6IHN0cmluZyxcbiAgICB0ZW1wbGF0ZTogc3RyaW5nXG4gICk6IHZvaWQgfCBzdHJpbmdbXSA9PiB7XG4gICAgY29uc3QgZGVzdDogc3RyaW5nID0gQXJyYXkuaXNBcnJheSh0bykgPyB0by5qb2luKFwiLFwiKSA6IHRvO1xuICAgIGNvbnN0IHRleHQ6IHN0cmluZyA9IHRlbXBsYXRlO1xuXG4gICAgLy8gc2VuZCBhbiBlLW1haWxcbiAgICB0aGlzLnNlbmRNYWlsKGRlc3QsIHN1YmplY3QsIHRleHQpO1xuICB9O1xuXG4gIHByaXZhdGUgc2V0TWFpbENvbmZpZyA9ICgpOiBub2RlbWFpbGVyLlNlbnRNZXNzYWdlSW5mbyA9PiB7XG4gICAgLy8gY29uc3QgZ21haWxFbWFpbCA9IFwiYWxpYWtiYXJlc21hZWlsaTk4QGdtYWlsLmNvbVwiO1xuICAgIC8vIGNvbnN0IGdtYWlsQXBwUGFzc3dvcmQgPSBcIm5mZnggaHJnYiB4b2xxIHZzZmFcIjtcblxuICAgICBjb25zdCBnbWFpbEVtYWlsID0gXCJhbGlha2JhcmVzbWFlaWxpOThAZ21haWwuY29tXCI7XG4gICAgY29uc3QgZ21haWxBcHBQYXNzd29yZCA9IFwiY2dvcCB0dGlwIHp1cXogaHFsclwiO1xuICAgIGNvbnN0IGNvbmZpZ1RyYW5zcG9ydDogbm9kZW1haWxlci5TZW50TWVzc2FnZUluZm8gPSB7XG4gICAgICBzZXJ2aWNlOiBNQUlMX0RSSVZFUixcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogZ21haWxFbWFpbCxcbiAgICAgICAgcGFzczogZ21haWxBcHBQYXNzd29yZCxcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoaXNNYWlsZ3VuQVBJKSB7XG4gICAgICBjb25maWdUcmFuc3BvcnQuYXV0aC5hcGlfa2V5ID0gTUFJTEdVTl9BUElfS0VZO1xuICAgICAgY29uZmlnVHJhbnNwb3J0LmF1dGguZG9tYWluID0gTUFJTEdVTl9ET01BSU47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNNVFAgRGVmYXVsdFxuICAgICAgY29uZmlnVHJhbnNwb3J0Lmhvc3QgPSBNQUlMX0hPU1Q7XG4gICAgICBjb25maWdUcmFuc3BvcnQucG9ydCA9IE1BSUxfUE9SVDtcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5hdXRoLnVzZXIgPSBNQUlMX1VTRVJOQU1FO1xuICAgICAgY29uZmlnVHJhbnNwb3J0LmF1dGgucGFzcyA9IE1BSUxfUEFTU1dPUkQ7XG4gICAgfVxuICAgIHJldHVybiBjb25maWdUcmFuc3BvcnQ7XG4gIH07XG5cbiAgcHJpdmF0ZSBzZXRNYWlsT3B0aW9ucyA9IChcbiAgICBkZXN0OiBzdHJpbmcsXG4gICAgc3ViamVjdDogc3RyaW5nLFxuICAgIHRleHQ6IHN0cmluZ1xuICApOiBub2RlbWFpbGVyLlNlbmRNYWlsT3B0aW9ucyA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZyb206IGAke0FQUF9OQU1FfSA8JHtNQUlMX1VTRVJOQU1FfT5gLFxuICAgICAgdG86IGRlc3QsXG4gICAgICBzdWJqZWN0LFxuICAgICAgaHRtbDogdGV4dCxcbiAgICB9O1xuICB9O1xuXG4gIHByaXZhdGUgc2VuZE1haWwgPSAoXG4gICAgZGVzdDogc3RyaW5nLFxuICAgIHN1YmplY3Q6IHN0cmluZyxcbiAgICB0ZXh0OiBzdHJpbmdcbiAgKTogdm9pZCB8IHN0cmluZ1tdID0+IHtcbiAgICB0aGlzLm1haWxDb25maWcgPSBpc01haWxndW5BUElcbiAgICAgID8gbWcodGhpcy5zZXRNYWlsQ29uZmlnKCkpXG4gICAgICA6IHRoaXMuc2V0TWFpbENvbmZpZygpO1xuICAgIHRoaXMubWFpbE9wdGlvbnMgPSB0aGlzLnNldE1haWxPcHRpb25zKGRlc3QsIHN1YmplY3QsIHRleHQpO1xuICAgIC8vIE5vZGVtYWlsZXIgVHJhbnNwb3J0XG4gICAgY29uc3QgdHJhbnNwb3J0ZXI6IG5vZGVtYWlsZXIuVHJhbnNwb3J0ZXIgPSBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydChcbiAgICAgIHRoaXMubWFpbENvbmZpZ1xuICAgICk7XG4gICAgdHJhbnNwb3J0ZXIuc2VuZE1haWwoXG4gICAgICB0aGlzLm1haWxPcHRpb25zLFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgKGVycm9yOiBFcnJvciwgaW5mbzogbm9kZW1haWxlci5TZW50TWVzc2FnZUluZm8pID0+IHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc2Z1bGx5XCIsIGluZm8pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRW1haWxQcm92aWRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLFlBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsOEJBQUEsR0FBQUQsZUFBQSxDQUFBRixPQUFBO0FBRUEsTUFBTTtFQUNKSSxRQUFRO0VBQ1JDLFdBQVc7RUFDWEMsU0FBUztFQUNUQyxTQUFTO0VBQ1RDLGFBQWE7RUFDYkMsYUFBYTtFQUNiQyxjQUFjO0VBQ2RDLGVBQWU7RUFDZkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLG1CQUFtQjtFQUNuQkMsbUJBQW1CO0VBQ25CQztBQUFrQixDQUNuQixHQUFHQyxPQUFPLENBQUNDLEdBQUc7QUFFZixNQUFNQyxZQUFZLEdBQUcsQ0FBQyxJQUFBcEIsUUFBQSxDQUFBcUIsT0FBTyxFQUFDVCxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUFaLFFBQUEsQ0FBQXFCLE9BQU8sRUFBQ1IsY0FBYyxDQUFDO0FBRTFFLE1BQU1TLGFBQWE7RUFBbkJDLFlBQUE7SUFJUyxLQUFBQyxJQUFJLEdBQUcsQ0FDWkMsRUFBcUIsRUFDckJDLE9BQWUsRUFDZkMsUUFBZ0IsS0FDRztNQUNuQixNQUFNQyxJQUFJLEdBQVdDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDTCxFQUFFLENBQUMsR0FBR0EsRUFBRSxDQUFDTSxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUdOLEVBQUU7TUFDMUQsTUFBTU8sSUFBSSxHQUFXTCxRQUFRO01BRTdCO01BQ0EsSUFBSSxDQUFDTSxRQUFRLENBQUNMLElBQUksRUFBRUYsT0FBTyxFQUFFTSxJQUFJLENBQUM7SUFDcEMsQ0FBQztJQUVPLEtBQUFFLGFBQWEsR0FBRyxNQUFpQztNQUN2RDtNQUNBO01BRUMsTUFBTUMsVUFBVSxHQUFHLDhCQUE4QjtNQUNsRCxNQUFNQyxnQkFBZ0IsR0FBRyxxQkFBcUI7TUFDOUMsTUFBTUMsZUFBZSxHQUErQjtRQUNsREMsT0FBTyxFQUFFaEMsV0FBVztRQUNwQmlDLElBQUksRUFBRTtVQUNKQyxJQUFJLEVBQUVMLFVBQVU7VUFDaEJNLElBQUksRUFBRUw7O09BRVQ7TUFDRCxJQUFJaEIsWUFBWSxFQUFFO1FBQ2hCaUIsZUFBZSxDQUFDRSxJQUFJLENBQUNHLE9BQU8sR0FBRzlCLGVBQWU7UUFDOUN5QixlQUFlLENBQUNFLElBQUksQ0FBQ0ksTUFBTSxHQUFHOUIsY0FBYztNQUM5QyxDQUFDLE1BQU07UUFDTDtRQUNBd0IsZUFBZSxDQUFDTyxJQUFJLEdBQUdyQyxTQUFTO1FBQ2hDOEIsZUFBZSxDQUFDUSxJQUFJLEdBQUdyQyxTQUFTO1FBQ2hDNkIsZUFBZSxDQUFDRSxJQUFJLENBQUNDLElBQUksR0FBRy9CLGFBQWE7UUFDekM0QixlQUFlLENBQUNFLElBQUksQ0FBQ0UsSUFBSSxHQUFHL0IsYUFBYTtNQUMzQztNQUNBLE9BQU8yQixlQUFlO0lBQ3hCLENBQUM7SUFFTyxLQUFBUyxjQUFjLEdBQUcsQ0FDdkJsQixJQUFZLEVBQ1pGLE9BQWUsRUFDZk0sSUFBWSxLQUNrQjtNQUM5QixPQUFPO1FBQ0xlLElBQUksRUFBRSxHQUFHMUMsUUFBUSxLQUFLSSxhQUFhLEdBQUc7UUFDdENnQixFQUFFLEVBQUVHLElBQUk7UUFDUkYsT0FBTztRQUNQc0IsSUFBSSxFQUFFaEI7T0FDUDtJQUNILENBQUM7SUFFTyxLQUFBQyxRQUFRLEdBQUcsQ0FDakJMLElBQVksRUFDWkYsT0FBZSxFQUNmTSxJQUFZLEtBQ087TUFDbkIsSUFBSSxDQUFDaUIsVUFBVSxHQUFHN0IsWUFBWSxHQUMxQixJQUFBaEIsOEJBQUEsQ0FBQThDLE9BQUUsRUFBQyxJQUFJLENBQUNoQixhQUFhLEVBQUUsQ0FBQyxHQUN4QixJQUFJLENBQUNBLGFBQWEsRUFBRTtNQUN4QixJQUFJLENBQUNpQixXQUFXLEdBQUcsSUFBSSxDQUFDTCxjQUFjLENBQUNsQixJQUFJLEVBQUVGLE9BQU8sRUFBRU0sSUFBSSxDQUFDO01BQzNEO01BQ0EsTUFBTW9CLFdBQVcsR0FBMkJsRCxZQUFBLENBQUFnRCxPQUFVLENBQUNHLGVBQWUsQ0FDcEUsSUFBSSxDQUFDSixVQUFVLENBQ2hCO01BQ0RHLFdBQVcsQ0FBQ25CLFFBQVEsQ0FDbEIsSUFBSSxDQUFDa0IsV0FBVztNQUNoQjtNQUNBLENBQUNHLEtBQVksRUFBRUMsSUFBZ0MsS0FBSTtRQUNqRCxJQUFJRCxLQUFLLEVBQUU7VUFDVEUsT0FBTyxDQUFDQyxHQUFHLENBQUNILEtBQUssQ0FBQztRQUNwQixDQUFDLE1BQU07VUFDTEUsT0FBTyxDQUFDQyxHQUFHLENBQUMsY0FBYyxFQUFFRixJQUFJLENBQUM7UUFDbkM7TUFDRixDQUFDLENBQ0Y7SUFDSCxDQUFDO0VBQ0g7O0FBRUFHLE9BQUEsQ0FBQVIsT0FBQSxHQUFlNUIsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["lodash_1","require","nodemailer_1","__importDefault","nodemailer_mailgun_transport_1","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","isEmpty","EmailProvider","constructor","send","to","subject","template","dest","Array","isArray","join","text","sendMail","setMailConfig","gmailEmail","gmailAppPassword","configTransport","service","auth","user","pass","api_key","domain","host","port","setMailOptions","from","html","mailConfig","default","mailOptions","transporter","createTransport","error","info","console","log","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\config\\","sources":["D:/My-projects/user-information/server/src/config/email.ts"],"sourcesContent":["import { isEmpty } from \"lodash\";\nimport nodemailer from \"nodemailer\";\nimport mg from \"nodemailer-mailgun-transport\";\n\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL,\n} = process.env;\n\nconst isMailgunAPI = !isEmpty(MAILGUN_API_KEY) || !isEmpty(MAILGUN_DOMAIN);\n\nclass EmailProvider {\n  private mailConfig: nodemailer.SentMessageInfo;\n  private mailOptions: nodemailer.SendMailOptions | undefined;\n\n  public send = (\n    to: string | string[],\n    subject: string,\n    template: string\n  ): void | string[] => {\n    const dest: string = Array.isArray(to) ? to.join(\",\") : to;\n    const text: string = template;\n\n    // send an e-mail\n    this.sendMail(dest, subject, text);\n  };\n\n  private setMailConfig = (): nodemailer.SentMessageInfo => {\n    // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n\n     const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n    const configTransport: nodemailer.SentMessageInfo = {\n      service: MAIL_DRIVER,\n      auth: {\n        user: gmailEmail,\n        pass: gmailAppPassword,\n      },\n    };\n    if (isMailgunAPI) {\n      configTransport.auth.api_key = MAILGUN_API_KEY;\n      configTransport.auth.domain = MAILGUN_DOMAIN;\n    } else {\n      // SMTP Default\n      configTransport.host = MAIL_HOST;\n      configTransport.port = MAIL_PORT;\n      configTransport.auth.user = MAIL_USERNAME;\n      configTransport.auth.pass = MAIL_PASSWORD;\n    }\n    return configTransport;\n  };\n\n  private setMailOptions = (\n    dest: string,\n    subject: string,\n    text: string\n  ): nodemailer.SendMailOptions => {\n    return {\n      from: `${APP_NAME} <${MAIL_USERNAME}>`,\n      to: dest,\n      subject,\n      html: text,\n    };\n  };\n\n  private sendMail = (\n    dest: string,\n    subject: string,\n    text: string\n  ): void | string[] => {\n    this.mailConfig = isMailgunAPI\n      ? mg(this.setMailConfig())\n      : this.setMailConfig();\n    this.mailOptions = this.setMailOptions(dest, subject, text);\n    // Nodemailer Transport\n    const transporter: nodemailer.Transporter = nodemailer.createTransport(\n      this.mailConfig\n    );\n    transporter.sendMail(\n      this.mailOptions,\n      // @ts-ignore\n      (error: Error, info: nodemailer.SentMessageInfo) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      }\n    );\n  };\n}\n\nexport default EmailProvider;\n"],"mappings":"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","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\file.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteUserPic = exports.readHTMLFile = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path, callback) {\n  fs_1.default.readFile(path, {\n    encoding: \"utf-8\"\n  }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nexports.readHTMLFile = readHTMLFile;\nfunction deleteUserPic(userId) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs_1.default.existsSync(path)) {\n    fs_1.default.unlinkSync(path);\n  }\n}\nexports.deleteUserPic = deleteUserPic;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInJlYWRIVE1MRmlsZSIsInBhdGgiLCJjYWxsYmFjayIsImRlZmF1bHQiLCJyZWFkRmlsZSIsImVuY29kaW5nIiwiZXJyIiwiaHRtbCIsImV4cG9ydHMiLCJkZWxldGVVc2VyUGljIiwidXNlcklkIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvaGVscGVyL2ZpbGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuXG4vKipcbiAqXG4gKiBAcGFyYW0gcGF0aCAtIHBhdGggZmlsZSB0ZW1wbGF0ZSBodG1sXG4gKiBAcGFyYW0gY2FsbGJhY2tcbiAqL1xuZnVuY3Rpb24gcmVhZEhUTUxGaWxlKHBhdGg6IGFueSwgY2FsbGJhY2s6IGFueSkge1xuICBmcy5yZWFkRmlsZShwYXRoLCB7IGVuY29kaW5nOiBcInV0Zi04XCIgfSwgZnVuY3Rpb24gKGVyciwgaHRtbCkge1xuICAgIGlmIChlcnIpIHtcbiAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKG51bGwsIGh0bWwpO1xuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBkZWxldGVVc2VyUGljKHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHBhdGggPSBgcHVibGljL3Byb2R1Y3RzLyR7dXNlcklkfS5qcGdgO1xuICBpZiAoZnMuZXhpc3RzU3luYyhwYXRoKSkge1xuICAgIGZzLnVubGlua1N5bmMocGF0aCk7XG4gIH1cbn1cbmV4cG9ydCB7IHJlYWRIVE1MRmlsZSwgZGVsZXRlVXNlclBpYyB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRUE7Ozs7O0FBS0EsU0FBU0MsWUFBWUEsQ0FBQ0MsSUFBUyxFQUFFQyxRQUFhO0VBQzVDTCxJQUFBLENBQUFNLE9BQUUsQ0FBQ0MsUUFBUSxDQUFDSCxJQUFJLEVBQUU7SUFBRUksUUFBUSxFQUFFO0VBQU8sQ0FBRSxFQUFFLFVBQVVDLEdBQUcsRUFBRUMsSUFBSTtJQUMxRCxJQUFJRCxHQUFHLEVBQUU7TUFDUEosUUFBUSxDQUFDSSxHQUFHLENBQUM7SUFDZixDQUFDLE1BQU07TUFDTEosUUFBUSxDQUFDLElBQUksRUFBRUssSUFBSSxDQUFDO0lBQ3RCO0VBQ0YsQ0FBQyxDQUFDO0FBQ0o7QUFPU0MsT0FBQSxDQUFBUixZQUFBLEdBQUFBLFlBQUE7QUFOVCxTQUFTUyxhQUFhQSxDQUFDQyxNQUFjO0VBQ25DLE1BQU1ULElBQUksR0FBRyxtQkFBbUJTLE1BQU0sTUFBTTtFQUM1QyxJQUFJYixJQUFBLENBQUFNLE9BQUUsQ0FBQ1EsVUFBVSxDQUFDVixJQUFJLENBQUMsRUFBRTtJQUN2QkosSUFBQSxDQUFBTSxPQUFFLENBQUNTLFVBQVUsQ0FBQ1gsSUFBSSxDQUFDO0VBQ3JCO0FBQ0Y7QUFDdUJPLE9BQUEsQ0FBQUMsYUFBQSxHQUFBQSxhQUFBIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["fs_1","__importDefault","require","readHTMLFile","path","callback","default","readFile","encoding","err","html","exports","deleteUserPic","userId","existsSync","unlinkSync"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/My-projects/user-information/server/src/helper/file.ts"],"sourcesContent":["import fs from \"fs\";\n\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path: any, callback: any) {\n  fs.readFile(path, { encoding: \"utf-8\" }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nfunction deleteUserPic(userId: string) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs.existsSync(path)) {\n    fs.unlinkSync(path);\n  }\n}\nexport { readHTMLFile, deleteUserPic };\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA;;;;;AAKA,SAASC,YAAYA,CAACC,IAAS,EAAEC,QAAa;EAC5CL,IAAA,CAAAM,OAAE,CAACC,QAAQ,CAACH,IAAI,EAAE;IAAEI,QAAQ,EAAE;EAAO,CAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI;IAC1D,IAAID,GAAG,EAAE;MACPJ,QAAQ,CAACI,GAAG,CAAC;IACf,CAAC,MAAM;MACLJ,QAAQ,CAAC,IAAI,EAAEK,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;AACJ;AAOSC,OAAA,CAAAR,YAAA,GAAAA,YAAA;AANT,SAASS,aAAaA,CAACC,MAAc;EACnC,MAAMT,IAAI,GAAG,mBAAmBS,MAAM,MAAM;EAC5C,IAAIb,IAAA,CAAAM,OAAE,CAACQ,UAAU,CAACV,IAAI,CAAC,EAAE;IACvBJ,IAAA,CAAAM,OAAE,CAACS,UAAU,CAACX,IAAI,CAAC;EACrB;AACF;AACuBO,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nconst internal_server_1 = __importDefault(require(\"./internal_server\"));\nconst unauthorized_1 = __importDefault(require(\"./unauthorized\"));\nconst forbidden_1 = __importDefault(require(\"./forbidden\"));\nconst not_found_1 = __importDefault(require(\"./not_found\"));\nconst bad_request_1 = __importDefault(require(\"./bad_request\"));\nconst ResponseError = {\n  BaseResponse: base_response_1.default,\n  BadRequest: bad_request_1.default,\n  NotFound: not_found_1.default,\n  Forbidden: forbidden_1.default,\n  Unauthorized: unauthorized_1.default,\n  InternalServer: internal_server_1.default\n};\nexports.default = ResponseError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiUmVzcG9uc2VFcnJvciIsIkJhc2VSZXNwb25zZSIsImRlZmF1bHQiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlUmVzcG9uc2UgZnJvbSAnLi9iYXNlX3Jlc3BvbnNlJztcbmltcG9ydCBJbnRlcm5hbFNlcnZlciBmcm9tICcuL2ludGVybmFsX3NlcnZlcic7XG5pbXBvcnQgVW5hdXRob3JpemVkIGZyb20gJy4vdW5hdXRob3JpemVkJztcbmltcG9ydCBGb3JiaWRkZW4gZnJvbSAnLi9mb3JiaWRkZW4nO1xuaW1wb3J0IE5vdEZvdW5kIGZyb20gJy4vbm90X2ZvdW5kJztcbmltcG9ydCBCYWRSZXF1ZXN0IGZyb20gJy4vYmFkX3JlcXVlc3QnO1xuXG5jb25zdCBSZXNwb25zZUVycm9yID0ge1xuICAgIEJhc2VSZXNwb25zZSxcbiAgICBCYWRSZXF1ZXN0LFxuICAgIE5vdEZvdW5kLFxuICAgIEZvcmJpZGRlbixcbiAgICBVbmF1dGhvcml6ZWQsXG4gICAgSW50ZXJuYWxTZXJ2ZXIsXG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlc3BvbnNlRXJyb3JcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsaUJBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsY0FBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRyxXQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFJLFdBQUEsR0FBQUwsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUssYUFBQSxHQUFBTixlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNTSxhQUFhLEdBQUc7RUFDbEJDLFlBQVksRUFBWlQsZUFBQSxDQUFBVSxPQUFZO0VBQ1pDLFVBQVUsRUFBVkosYUFBQSxDQUFBRyxPQUFVO0VBQ1ZFLFFBQVEsRUFBUk4sV0FBQSxDQUFBSSxPQUFRO0VBQ1JHLFNBQVMsRUFBVFIsV0FBQSxDQUFBSyxPQUFTO0VBQ1RJLFlBQVksRUFBWlYsY0FBQSxDQUFBTSxPQUFZO0VBQ1pLLGNBQWMsRUFBZFosaUJBQUEsQ0FBQU87Q0FDSDtBQUVETSxPQUFBLENBQUFOLE9BQUEsR0FBZUYsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","__importDefault","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","ResponseError","BaseResponse","default","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/response_error.ts"],"sourcesContent":["import BaseResponse from './base_response';\nimport InternalServer from './internal_server';\nimport Unauthorized from './unauthorized';\nimport Forbidden from './forbidden';\nimport NotFound from './not_found';\nimport BadRequest from './bad_request';\n\nconst ResponseError = {\n    BaseResponse,\n    BadRequest,\n    NotFound,\n    Forbidden,\n    Unauthorized,\n    InternalServer,\n}\n\nexport default ResponseError\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,cAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,WAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,MAAAI,WAAA,GAAAL,eAAA,CAAAC,OAAA;AACA,MAAAK,aAAA,GAAAN,eAAA,CAAAC,OAAA;AAEA,MAAMM,aAAa,GAAG;EAClBC,YAAY,EAAZT,eAAA,CAAAU,OAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAG,OAAU;EACVE,QAAQ,EAARN,WAAA,CAAAI,OAAQ;EACRG,SAAS,EAATR,WAAA,CAAAK,OAAS;EACTI,YAAY,EAAZV,cAAA,CAAAM,OAAY;EACZK,cAAc,EAAdZ,iBAAA,CAAAO;CACH;AAEDM,OAAA,CAAAN,OAAA,GAAeF,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass BaseResponse extends Error {\n  constructor(message, starusCode = 500) {\n    super(message);\n    this.message = message;\n    this.statusCode = starusCode;\n    Object.setPrototypeOf(this, BaseResponse.prototype);\n  }\n}\nexports.default = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXJ1c0NvZGUiLCJzdGF0dXNDb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvYmFzZV9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBCYXNlUmVzcG9uc2UgZXh0ZW5kcyBFcnJvciB7XG4gICAgcHVibGljIHN0YXR1c0NvZGU6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZywgc3RhcnVzQ29kZSA9IDUwMCkge1xuICAgICAgICBzdXBlcihtZXNzYWdlKVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGFydXNDb2RlO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgQmFzZVJlc3BvbnNlLnByb3RvdHlwZSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VSZXNwb25zZTsiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsTUFBTUEsWUFBYSxTQUFRQyxLQUFLO0VBRzVCQyxZQUFZQyxPQUFlLEVBQUVDLFVBQVUsR0FBRyxHQUFHO0lBQ3pDLEtBQUssQ0FBQ0QsT0FBTyxDQUFDO0lBQ2QsSUFBSSxDQUFDQSxPQUFPLEdBQUdBLE9BQU87SUFDdEIsSUFBSSxDQUFDRSxVQUFVLEdBQUdELFVBQVU7SUFDNUJFLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRVAsWUFBWSxDQUFDUSxTQUFTLENBQUM7RUFDdkQ7O0FBR0pDLE9BQUEsQ0FBQUMsT0FBQSxHQUFlVixZQUFZIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["BaseResponse","Error","constructor","message","starusCode","statusCode","Object","setPrototypeOf","prototype","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/base_response.ts"],"sourcesContent":["class BaseResponse extends Error {\n    public statusCode: number;\n\n    constructor(message: string, starusCode = 500) {\n        super(message)\n        this.message = message;\n        this.statusCode = starusCode;\n        Object.setPrototypeOf(this, BaseResponse.prototype)\n    }\n}\n\nexport default BaseResponse;"],"mappings":";;;;;AAAA,MAAMA,YAAa,SAAQC,KAAK;EAG5BC,YAAYC,OAAe,EAAEC,UAAU,GAAG,GAAG;IACzC,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,UAAU,GAAGD,UAAU;IAC5BE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEP,YAAY,CAACQ,SAAS,CAAC;EACvD;;AAGJC,OAAA,CAAAC,OAAA,GAAeV,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass InternalServer extends base_response_1.default {\n  constructor(message) {\n    super(message, 500);\n    Object.setPrototypeOf(this, InternalServer.prototype);\n  }\n}\nexports.default = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJkZWZhdWx0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9pbnRlcm5hbF9zZXJ2ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VSZXNwb25zZSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmNsYXNzIEludGVybmFsU2VydmVyIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNTAwKTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEludGVybmFsU2VydmVyLnByb3RvdHlwZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBJbnRlcm5hbFNlcnZlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsY0FBZSxTQUFRSCxlQUFBLENBQUFJLE9BQVk7RUFDckNDLFlBQVlDLE9BQWU7SUFDdkIsS0FBSyxDQUFDQSxPQUFPLEVBQUUsR0FBRyxDQUFDO0lBQ25CQyxNQUFNLENBQUNDLGNBQWMsQ0FBQyxJQUFJLEVBQUVMLGNBQWMsQ0FBQ00sU0FBUyxDQUFDO0VBQ3pEOztBQUdKQyxPQUFBLENBQUFOLE9BQUEsR0FBZUQsY0FBYyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["base_response_1","__importDefault","require","InternalServer","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/internal_server.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass InternalServer extends BaseResponse {\n    constructor(message: string) {\n        super(message, 500);\n        Object.setPrototypeOf(this, InternalServer.prototype);\n    }\n}\n\nexport default InternalServer"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,cAAe,SAAQH,eAAA,CAAAI,OAAY;EACrCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,cAAc,CAACM,SAAS,CAAC;EACzD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,cAAc","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass Unauthorized extends base_response_1.default {\n  constructor(message) {\n    super(message, 401);\n    Object.setPrototypeOf(this, Unauthorized.prototype);\n  }\n}\nexports.default = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvdW5hdXRob3JpemVkLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlUmVzcG9uc2UgZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiXG5cbmNsYXNzIFVuYXV0aG9yaXplZCBleHRlbmRzIEJhc2VSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwMSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBVbmF1dGhvcml6ZWQucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVuYXV0aG9yaXplZDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLFlBQWEsU0FBUUgsZUFBQSxDQUFBSSxPQUFZO0VBQ25DQyxZQUFZQyxPQUFlO0lBQ3ZCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztJQUNuQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxZQUFZLENBQUNNLFNBQVMsQ0FBQztFQUN2RDs7QUFHSkMsT0FBQSxDQUFBTixPQUFBLEdBQWVELFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","Unauthorized","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import BaseResponse from \"./base_response\"\n\nclass Unauthorized extends BaseResponse {\n    constructor(message: string) {\n        super(message, 401);\n        Object.setPrototypeOf(this, Unauthorized.prototype);\n    }\n}\n\nexport default Unauthorized;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,YAAa,SAAQH,eAAA,CAAAI,OAAY;EACnCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,YAAY,CAACM,SAAS,CAAC;EACvD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass Forbidden extends base_response_1.default {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.default = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwibWVzc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2ZvcmJpZGRlbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZVJlc3BvbnNlIGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIlxuXG5jbGFzcyBGb3JiaWRkZW4gZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc3NhZ2UsIDQwMylcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEZvcmJpZGRlbi5wcm90b3R5cGUpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9yYmlkZGVuOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsU0FBVSxTQUFRSCxlQUFBLENBQUFJLE9BQVk7RUFDaENDLFlBQVlDLFFBQWdCO0lBQ3hCLEtBQUssQ0FBQ0EsUUFBUSxFQUFFLEdBQUcsQ0FBQztJQUNwQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxTQUFTLENBQUNNLFNBQVMsQ0FBQztFQUNwRDs7QUFHSkMsT0FBQSxDQUFBTixPQUFBLEdBQWVELFNBQVMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","Forbidden","default","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/forbidden.ts"],"sourcesContent":["import BaseResponse from \"./base_response\"\n\nclass Forbidden extends BaseResponse {\n    constructor(messsage: string) {\n        super(messsage, 403)\n        Object.setPrototypeOf(this, Forbidden.prototype);\n    }\n}\n\nexport default Forbidden;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,SAAU,SAAQH,eAAA,CAAAI,OAAY;EAChCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,SAAS","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass NotFound extends base_response_1.default {\n  constructor(message) {\n    super(message, 404);\n    Object.setPrototypeOf(this, NotFound.prototype);\n  }\n}\nexports.default = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJkZWZhdWx0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9ub3RfZm91bmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VSZXNwb25zZSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCI7XG5cbmNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNDA0KTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE5vdEZvdW5kLnByb3RvdHlwZSlcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBOb3RGb3VuZDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLFFBQVMsU0FBUUgsZUFBQSxDQUFBSSxPQUFZO0VBQy9CQyxZQUFZQyxPQUFlO0lBQ3ZCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztJQUNuQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxRQUFRLENBQUNNLFNBQVMsQ0FBQztFQUNuRDs7QUFFSkMsT0FBQSxDQUFBTixPQUFBLEdBQWVELFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","NotFound","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/not_found.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass NotFound extends BaseResponse {\n    constructor(message: string) {\n        super(message, 404);\n        Object.setPrototypeOf(this, NotFound.prototype)\n    }\n}\nexport default NotFound;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,QAAS,SAAQH,eAAA,CAAAI,OAAY;EAC/BC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,QAAQ,CAACM,SAAS,CAAC;EACnD;;AAEJC,OAAA,CAAAN,OAAA,GAAeD,QAAQ","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass BadRequest extends base_response_1.default {\n  constructor(message) {\n    super(message, 400);\n    Object.setPrototypeOf(this, BadRequest.prototype);\n  }\n}\nexports.default = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsImRlZmF1bHQiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2JhZF9yZXF1ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlUmVzcG9uc2UgZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xuXG5jbGFzcyBCYWRSZXF1ZXN0IGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSwgNDAwKVxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgQmFkUmVxdWVzdC5wcm90b3R5cGUpXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQmFkUmVxdWVzdDsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLFVBQVcsU0FBUUgsZUFBQSxDQUFBSSxPQUFZO0VBQ2pDQyxZQUFZQyxPQUFlO0lBQ3ZCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztJQUNuQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxVQUFVLENBQUNNLFNBQVMsQ0FBQztFQUNyRDs7QUFFSkMsT0FBQSxDQUFBTixPQUFBLEdBQWVELFVBQVUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","BadRequest","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/My-projects/user-information/server/src/modules/error/bad_request.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass BadRequest extends BaseResponse {\n    constructor(message: string) {\n        super(message, 400)\n        Object.setPrototypeOf(this, BadRequest.prototype)\n    }\n}\nexport default BadRequest;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,UAAW,SAAQH,eAAA,CAAAI,OAAY;EACjCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,UAAU,CAACM,SAAS,CAAC;EACrD;;AAEJC,OAAA,CAAAN,OAAA,GAAeD,UAAU","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\nexports.default = useValidation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VWYWxpZGF0aW9uIiwic2NoZW1hIiwidmFsdWUiLCJvcHRpb25zIiwidmFsaWRhdGVTeW5jIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJvcnRFYXJseSIsInN0cmlwVW5rbm93biIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2hlbHBlci91c2VfdmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7IFNjaGVtYSwgVmFsaWRhdGVPcHRpb25zIH0gZnJvbSAneXVwJ1xuXG5cbmZ1bmN0aW9uIHVzZVZhbGlkYXRpb248VD4oXG4gIHNjaGVtYTogU2NoZW1hPFQ+LFxuICB2YWx1ZTogVCB8IGFueSxcbiAgb3B0aW9ucz86IFZhbGlkYXRlT3B0aW9uc1xuKTogVCB7XG4gIHJldHVybiBzY2hlbWEudmFsaWRhdGVTeW5jKHZhbHVlLCB7XG4gICAgYWJvcnRFYXJseTogZmFsc2UsXG4gICAgc3RyaXBVbmtub3duOiB0cnVlLFxuICAgIC4uLm9wdGlvbnMsXG4gIH0pXG59XG5cbmV4cG9ydCBkZWZhdWx0IHVzZVZhbGlkYXRpb25cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFJQSxTQUFTQSxhQUFhQSxDQUNwQkMsTUFBaUIsRUFDakJDLEtBQWMsRUFDZEMsT0FBeUI7RUFFekIsT0FBT0YsTUFBTSxDQUFDRyxZQUFZLENBQUNGLEtBQUssRUFBQUcsTUFBQSxDQUFBQyxNQUFBO0lBQzlCQyxVQUFVLEVBQUUsS0FBSztJQUNqQkMsWUFBWSxFQUFFO0VBQUksR0FDZkwsT0FBTyxFQUNWO0FBQ0o7QUFFQU0sT0FBQSxDQUFBQyxPQUFBLEdBQWVWLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/My-projects/user-information/server/src/helper/use_validation.ts"],"sourcesContent":["\nimport { Schema, ValidateOptions } from 'yup'\n\n\nfunction useValidation<T>(\n  schema: Schema<T>,\n  value: T | any,\n  options?: ValidateOptions\n): T {\n  return schema.validateSync(value, {\n    abortEarly: false,\n    stripUnknown: true,\n    ...options,\n  })\n}\n\nexport default useValidation\n"],"mappings":";;;;;AAIA,SAASA,aAAaA,CACpBC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ;AAEAM,OAAA,CAAAC,OAAA,GAAeV,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup = __importStar(require(\"yup\"));\nconst register = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  // lastName: yup.string().required('lastName is required'),\n  // nickName: yup.string().required('nickName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  // phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nconst login = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\nexports.default = {\n  register,\n  login\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwicmVnaXN0ZXIiLCJvYmplY3QiLCJzaGFwZSIsInVzZXJOYW1lIiwic3RyaW5nIiwicmVxdWlyZWQiLCJlbWFpbCIsInRva2VuVmVyaWZ5IiwibnVsbGFibGUiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwibG9naW4iLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NjaGVtYS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB5dXAgZnJvbSAneXVwJztcblxuY29uc3QgcmVnaXN0ZXIgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xuICAgIHVzZXJOYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3VzZXJOYW1lIGlzIHJlcXVpcmVkJyksXG4gICAgLy8gbGFzdE5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnbGFzdE5hbWUgaXMgcmVxdWlyZWQnKSxcbiAgICAvLyBuaWNrTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCduaWNrTmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoJ2ludmFsaWQgZW1haWwnKS5yZXF1aXJlZCgnZW1haWwgaXMgcmVxdWlyZWQnKSxcbiAgICAvLyBwaG9uZU51bWJlcjogeXVwLnN0cmluZygpLm51bGxhYmxlKCksXG4gICAgdG9rZW5WZXJpZnk6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkubWluKDgsICdhdCBsZWFzdCA4IGNoYXJlY3RlcnMnKVxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ2NvbmZpcm1QYXNzd29yZCcpXSwgJ3Bhc3N3b3JkIGFyZSBub3QgdGhlIHNhbWUnKSxcbiAgICBjb25maXJtUGFzc3dvcmQ6IHl1cC5zdHJpbmcoKS5taW4oOCwgJ2F0IGxlYXN0IDggY2hhcmVjdGVycycpXG4gICAgICAgIC5vbmVPZihbeXVwLnJlZigncGFzc3dvcmQnKV0sICdwYXNzd29yZCBhcmUgbm90IHRoZSBzYW1lJylcbn0pO1xuXG5jb25zdCBsb2dpbiA9IHl1cC5vYmplY3QoKVxuICAgIC5zaGFwZSh7XG4gICAgICAgIGVtYWlsOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXG4gICAgICAgIHBhc3N3b3JkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ3Bhc3N3b3JkIGlzIHJlcXVpcmVkJyksXG4gICAgfSkucmVxdWlyZWQoKTtcblxuZXhwb3J0IGRlZmF1bHQgeyByZWdpc3RlciwgbG9naW4gfSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsR0FBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxRQUFRLEdBQUdILEdBQUcsQ0FBQ0ksTUFBTSxFQUFFLENBQUNDLEtBQUssQ0FBQztFQUNoQ0MsUUFBUSxFQUFFTixHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsc0JBQXNCLENBQUM7RUFDdkQ7RUFDQTtFQUNBQyxLQUFLLEVBQUVULEdBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNFLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQ0QsUUFBUSxDQUFDLG1CQUFtQixDQUFDO0VBQ3hFO0VBQ0FFLFdBQVcsRUFBRVYsR0FBRyxDQUFDTyxNQUFNLEVBQUUsQ0FBQ0ksUUFBUSxFQUFFO0VBQ3BDQyxRQUFRLEVBQUVaLEdBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDakRDLEtBQUssQ0FBQyxDQUFDZCxHQUFHLENBQUNlLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsMkJBQTJCLENBQUM7RUFDckVDLGVBQWUsRUFBRWhCLEdBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNNLEdBQUcsQ0FBQyxDQUFDLEVBQUUsdUJBQXVCLENBQUMsQ0FDeERDLEtBQUssQ0FBQyxDQUFDZCxHQUFHLENBQUNlLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLDJCQUEyQjtDQUNoRSxDQUFDO0FBRUYsTUFBTUUsS0FBSyxHQUFHakIsR0FBRyxDQUFDSSxNQUFNLEVBQUUsQ0FDckJDLEtBQUssQ0FBQztFQUNISSxLQUFLLEVBQUVULEdBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUNqREksUUFBUSxFQUFFWixHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsc0JBQXNCO0NBQ3pELENBQUMsQ0FBQ0EsUUFBUSxFQUFFO0FBRWpCVSxPQUFBLENBQUFDLE9BQUEsR0FBZTtFQUFFaEIsUUFBUTtFQUFFYztBQUFLLENBQUUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["yup","__importStar","require","register","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","login","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/My-projects/user-information/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\n\nconst register = yup.object().shape({\n    userName: yup.string().required('userName is required'),\n    // lastName: yup.string().required('lastName is required'),\n    // nickName: yup.string().required('nickName is required'),\n    email: yup.string().email('invalid email').required('email is required'),\n    // phoneNumber: yup.string().nullable(),\n    tokenVerify: yup.string().nullable(),\n    password: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('password')], 'password are not the same')\n});\n\nconst login = yup.object()\n    .shape({\n        email: yup.string().required('email is required'),\n        password: yup.string().required('password is required'),\n    }).required();\n\nexport default { register, login }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAMC,QAAQ,GAAGH,GAAG,CAACI,MAAM,EAAE,CAACC,KAAK,CAAC;EAChCC,QAAQ,EAAEN,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvD;EACA;EACAC,KAAK,EAAET,GAAG,CAACO,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxE;EACAE,WAAW,EAAEV,GAAG,CAACO,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEZ,GAAG,CAACO,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACd,GAAG,CAACe,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEhB,GAAG,CAACO,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACd,GAAG,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEF,MAAME,KAAK,GAAGjB,GAAG,CAACI,MAAM,EAAE,CACrBC,KAAK,CAAC;EACHI,KAAK,EAAET,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEZ,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE;AAEjBU,OAAA,CAAAC,OAAA,GAAe;EAAEhB,QAAQ;EAAEc;AAAK,CAAE","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nconst use_validation_1 = __importDefault(require(\"../../helper/use_validation\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst schema_1 = __importDefault(require(\"./schema\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst common_1 = require(\"../../helper/common\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst response_error_1 = __importDefault(require(\"../../modules/error/response_error\"));\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield (0, db_1.getUserInfo)(email);\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  static confrimEmail(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const userData = (0, use_validation_1.default)(schema_1.default.confirmEmail, formData);\n      const confirmEmailResult = yield (0, db_1.confirmEmail)(userData);\n      return app_response_1.default.appResponse(confirmEmailResult);\n    });\n  }\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      send_email_1.default.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const userEmail = email;\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfileuser(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const currentUser = await UserService.validateUserEmail(userData.email);\n      // if (currentUser) {\n      //   return { message: \"the user already exist !\", code: 400, currentUser };\n      // }\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.tokenVerify = tokenVerify;\n      const result = yield (0, db_1.updateProfileUser)(userData);\n      if (!result) {\n        throw new response_error_1.default.BadRequest(\"Could not update user!\");\n      } else {\n        return {\n          message: null,\n          updateuser: {\n            user: result\n          }\n        };\n      }\n    });\n  }\n  static getUserSkills() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getUserSkills)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.default.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.default)(schema_1.default.checkEmail, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.user_id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.default = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsInVzZV92YWxpZGF0aW9uXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJhcHBfcmVzcG9uc2VfMSIsInNjaGVtYV8xIiwic2VuZF9lbWFpbF8xIiwiY29tbW9uXzEiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsInZhbGlkYXRlVXNlckVtYWlsIiwiZGF0YSIsImNoZWNrVXNlckV4aXN0IiwibGVuZ3RoIiwiY29uZnJpbUVtYWlsIiwiZm9ybURhdGEiLCJ1c2VyRGF0YSIsImNvbmZpcm1FbWFpbCIsImNvbmZpcm1FbWFpbFJlc3VsdCIsImFwcFJlc3BvbnNlIiwiZ2V0VmVyaWZ5Q29kZSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiQWNjb3VudFJlZ2lzdGVyIiwiY2hhbmdlUGFzc3dvcmQiLCJ1c2VyRW1haWwiLCJ1cGRhdGVQcm9maWxldXNlciIsImdlbmVyYXRlVG9rZW4iLCJjb2RlIiwiZ2V0VW5pcXVlQ29kZXYyIiwic2lnbiIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwidXBkYXRlUHJvZmlsZVVzZXIiLCJCYWRSZXF1ZXN0IiwibWVzc2FnZSIsInVwZGF0ZXVzZXIiLCJ1c2VyIiwiZ2V0VXNlclNraWxscyIsImNoZWNrTmlja05hbWUiLCJuaWNrTmFtZSIsImdldERhdGEiLCJzZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbiIsImNoZWNrRW1haWwiLCJjdXJyZW50VXNlciIsInN0YXR1cyIsImVtYWlsQ29uZmlybWVkIiwic2lnbnVwU3RhdHVzIiwiaXNBY3RpdmUiLCJuZXdDb2RlIiwidXBkYXRlVXNlclZlcmlmeUNvZGUiLCJ1c2VyX2lkIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL3NlcmN2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNoZWNrTmlja05hbWUsXG4gIGNoZWNrVXNlckV4aXN0LFxuICBjb25maXJtRW1haWwsXG4gIGdldE9UUCxcbiAgZ2V0VXNlckluZm8sXG4gIGdldFVzZXJTa2lsbHMsXG4gIHVwZGF0ZVByb2ZpbGVVc2VyLFxuICB1cGRhdGVVc2VyVmVyaWZ5Q29kZSxcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuaW1wb3J0IHVzZVZhbGlkYXRpb24gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xuaW1wb3J0IEJ1aWxkUmVzcG9uc2UgZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XG5pbXBvcnQgeyBDb25maXJtRW1haWwsIFVzZXIgfSBmcm9tIFwiLi4vLi4vdHlwZXMvdXNlclwiO1xuaW1wb3J0IHNjaGVtYVVzZXIgZnJvbSBcIi4vc2NoZW1hXCI7XG5pbXBvcnQgU2VuZE1haWwgZnJvbSBcIi4uLy4uL2hlbHBlci9zZW5kX2VtYWlsXCI7XG5pbXBvcnQgeyBnZXRVbmlxdWVDb2RldjIsIGdldFVuaXF1ZUNvZGV2MyB9IGZyb20gXCIuLi8uLi9oZWxwZXIvY29tbW9uXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBtcyBmcm9tIFwibXNcIjtcbmltcG9ydCBSZXNwb25zZUVycm9yIGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XG5cbmNvbnN0IHsgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sIEpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiB9OiBhbnkgPSBwcm9jZXNzLmVudjtcbmNvbnN0IEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCA9IHByb2Nlc3MuZW52LkpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCB8fCBcIjFkXCI7IC8vIDEgRGF5c1xuXG5jb25zdCBleHBpcmVzSW4gPSBtcyhKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQpIC8gMTAwMDtcblxuY2xhc3MgVXNlclNlcnZpY2Uge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJJbmZvKGVtYWlsOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYXdhaXQgZ2V0VXNlckluZm8oZW1haWwpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0gZW1haWxcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdmFsaWRhdGVVc2VyRW1haWwoZW1haWw6IHN0cmluZykge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjaGVja1VzZXJFeGlzdChlbWFpbCk7XG5cbiAgICBpZiAoZGF0YS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBkYXRhWzBdIGFzIFVzZXI7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBmb3JtRGF0YVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhc3luYyBjb25mcmltRW1haWwoZm9ybURhdGE6IENvbmZpcm1FbWFpbCkge1xuICAgIGNvbnN0IHVzZXJEYXRhID0gdXNlVmFsaWRhdGlvbihzY2hlbWFVc2VyLmNvbmZpcm1FbWFpbCwgZm9ybURhdGEpO1xuICAgIGNvbnN0IGNvbmZpcm1FbWFpbFJlc3VsdCA9IGF3YWl0IGNvbmZpcm1FbWFpbCh1c2VyRGF0YSk7XG4gICAgcmV0dXJuIEJ1aWxkUmVzcG9uc2UuYXBwUmVzcG9uc2UoY29uZmlybUVtYWlsUmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIGZvcm1EYXRhXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFZlcmlmeUNvZGUodXNlckRhdGE6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xuICAgIC8vIGNvbnN0IHVzZXJEYXRhID0gdXNlVmFsaWRhdGlvbihzY2hlbWFVc2VyLmNvbmZpcm1FbWFpbCx1c2VyRGF0YSlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRPVFAodXNlckRhdGEsIHRva2VuVmVyaWZ5KTtcbiAgICBTZW5kTWFpbC5BY2NvdW50UmVnaXN0ZXIocmVzdWx0KTtcblxuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0gZW1haWxcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgY2hhbmdlUGFzc3dvcmQoZW1haWw6IHN0cmluZykge1xuICAgIGNvbnN0IHVzZXJFbWFpbCA9IGVtYWlsO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0gdXNlckRhdGFcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUHJvZmlsZXVzZXIodXNlckRhdGE6IFVzZXIpIHtcbiAgICAvLyBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IFVzZXJTZXJ2aWNlLnZhbGlkYXRlVXNlckVtYWlsKHVzZXJEYXRhLmVtYWlsKTtcbiAgICAvLyBpZiAoY3VycmVudFVzZXIpIHtcbiAgICAvLyAgIHJldHVybiB7IG1lc3NhZ2U6IFwidGhlIHVzZXIgYWxyZWFkeSBleGlzdCAhXCIsIGNvZGU6IDQwMCwgY3VycmVudFVzZXIgfTtcbiAgICAvLyB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZVRva2VuID0ge1xuICAgICAgY29kZTogZ2V0VW5pcXVlQ29kZXYyKCksXG4gICAgfTtcblxuICAgIGNvbnN0IHRva2VuVmVyaWZ5ID0gand0LnNpZ24oXG4gICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlbmVyYXRlVG9rZW4pKSxcbiAgICAgIEpXVF9TRUNSRVRfQUNDRVNTX1RPS0VOLFxuICAgICAge1xuICAgICAgICBleHBpcmVzSW4sXG4gICAgICB9XG4gICAgKTtcblxuICAgIHVzZXJEYXRhLnZlcmlmeV9jb2RlID0gZ2V0VW5pcXVlQ29kZXYzKCk7XG4gICAgdXNlckRhdGEudG9rZW5WZXJpZnkgPSB0b2tlblZlcmlmeTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlVXNlcih1c2VyRGF0YSk7XG4gICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLkJhZFJlcXVlc3QoXCJDb3VsZCBub3QgdXBkYXRlIHVzZXIhXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiBudWxsLFxuICAgICAgICB1cGRhdGV1c2VyOiB7XG4gICAgICAgICAgdXNlcjogcmVzdWx0LFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJTa2lsbHMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldFVzZXJTa2lsbHMoKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIGVtYWlsXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrTmlja05hbWUobmlja05hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGdldERhdGEgPSBhd2FpdCBjaGVja05pY2tOYW1lKCk7XG4gICAgaWYgKGdldERhdGFbMF0ubmlja05hbWUgPT09IG5pY2tOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIG5pY2tOYW1lIGlzIGFscmVheSBleGlzdCFcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsOiBzdHJpbmcpIHtcbiAgICB1c2VWYWxpZGF0aW9uKHNjaGVtYVVzZXIuY2hlY2tFbWFpbCwgeyBlbWFpbDogZW1haWwgfSk7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS52YWxpZGF0ZVVzZXJFbWFpbChlbWFpbCk7XG4gICAgaWYgKCFjdXJyZW50VXNlcikgcmV0dXJuIHsgc3RhdHVzOiAxLCBtZXNzYWdlOiBcImVtYWlsIGlzIG5vdCB2YWxpZCAhXCIgfTtcblxuICAgIGlmIChjdXJyZW50VXNlci5lbWFpbENvbmZpcm1lZCA9PT0gMClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogMixcbiAgICAgICAgbWVzc2FnZTogXCJ0aGlzIGVtYWlsIGFkZHJlc3MgaXMgbm90IGNvbmZpcm1lZCB5ZXQgIVwiLFxuICAgICAgfTtcbiAgICBpZiAoY3VycmVudFVzZXIuc2lnbnVwU3RhdHVzID09PSAwKVxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiAzLCBtZXNzYWdlOiBcInNpZ251cCBwcm9jZXNzIGlzIG5vdCBjb21wbGV0ZSB5ZXQgIVwiIH07XG4gICAgLy8gVE9ETyBmb3IgZml4IGlzQWN0aXZlIHRvIGJvb2xlYW5cbiAgICBpZiAoY3VycmVudFVzZXIuaXNBY3RpdmUgPT09IDApXG4gICAgICByZXR1cm4geyBzdGF0dXM6IDQsIG1lc3NhZ2U6IFwidGhpcyBhY2NvdW50IGlzIG5vdCBhY3RpdmUgIVwiIH07XG4gICAgY29uc3QgbmV3Q29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xuICAgIGF3YWl0IHVwZGF0ZVVzZXJWZXJpZnlDb2RlKGN1cnJlbnRVc2VyLnVzZXJfaWQsIG5ld0NvZGUpO1xuICAgIC8vIHNlbmQgZm9yZ290IHBhc3MgdG9rZW4gY29kZVxuICAgIC8vIFNlbmRNYWlsLnNlbmRSZXNldFBhc3N3b3JkRW1haWwoY3VycmVudFVzZXIsIG5ld0NvZGUpO1xuICAgIHJldHVybiB7IHN0YXR1czogNSwgbWVzc2FnZTogXCJjb2RlIGhhcyBiZWVuIHNlbmQgc3VjY2Vzc2Z1bGx5ICFcIiB9O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBVUEsTUFBQUMsZ0JBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFFQSxNQUFBSSxRQUFBLEdBQUFGLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFLLFlBQUEsR0FBQUgsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQU0sUUFBQSxHQUFBTixPQUFBO0FBQ0EsTUFBQU8sY0FBQSxHQUFBTCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBUSxJQUFBLEdBQUFOLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFTLGdCQUFBLEdBQUFQLGVBQUEsQ0FBQUYsT0FBQTtBQUVBLE1BQU07RUFBRVUsdUJBQXVCO0VBQUVDO0FBQXdCLENBQUUsR0FBUUMsT0FBTyxDQUFDQyxHQUFHO0FBQzlFLE1BQU1DLHdCQUF3QixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msd0JBQXdCLElBQUksSUFBSSxDQUFDLENBQUM7QUFFL0UsTUFBTUMsU0FBUyxHQUFHLElBQUFQLElBQUEsQ0FBQVEsT0FBRSxFQUFDRix3QkFBd0IsQ0FBQyxHQUFHLElBQUk7QUFFckQsTUFBTUcsV0FBVztFQUNSLE9BQWFDLFdBQVdBLENBQUNDLEtBQWE7O01BQzNDLE9BQU8sTUFBTSxJQUFBcEIsSUFBQSxDQUFBbUIsV0FBVyxFQUFDQyxLQUFLLENBQUM7SUFDakMsQ0FBQzs7RUFDRDs7O0VBR08sT0FBYUMsaUJBQWlCQSxDQUFDRCxLQUFhOztNQUNqRCxNQUFNRSxJQUFJLEdB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","map":{"version":3,"names":["db_1","require","use_validation_1","__importDefault","app_response_1","schema_1","send_email_1","common_1","jsonwebtoken_1","ms_1","response_error_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","validateUserEmail","data","checkUserExist","length","confrimEmail","formData","userData","confirmEmail","confirmEmailResult","appResponse","getVerifyCode","tokenVerify","result","getOTP","AccountRegister","changePassword","userEmail","updateProfileuser","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","updateProfileUser","BadRequest","message","updateuser","user","getUserSkills","checkNickName","nickName","getData","sendFrogetPasswordToken","checkEmail","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","user_id","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/My-projects/user-information/server/src/controller/user/sercvice.ts"],"sourcesContent":["import {\n  checkNickName,\n  checkUserExist,\n  confirmEmail,\n  getOTP,\n  getUserInfo,\n  getUserSkills,\n  updateProfileUser,\n  updateUserVerifyCode,\n} from \"../../bin/db\";\nimport useValidation from \"../../helper/use_validation\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport { ConfirmEmail, User } from \"../../types/user\";\nimport schemaUser from \"./schema\";\nimport SendMail from \"../../helper/send_email\";\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\nimport jwt from \"jsonwebtoken\";\nimport ms from \"ms\";\nimport ResponseError from \"../../modules/error/response_error\";\n\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\n\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\n\nclass UserService {\n  public static async getUserInfo(email: string) {\n    return await getUserInfo(email);\n  }\n  /**\n   * @param email\n   */\n  public static async validateUserEmail(email: string) {\n    const data = await checkUserExist(email);\n\n    if (data.length) {\n      return data[0] as User;\n    }\n    return null;\n  }\n\n  /**\n   * @param formData\n   */\n  public static async confrimEmail(formData: ConfirmEmail) {\n    const userData = useValidation(schemaUser.confirmEmail, formData);\n    const confirmEmailResult = await confirmEmail(userData);\n    return BuildResponse.appResponse(confirmEmailResult);\n  }\n  /**\n   * @param formData\n   */\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\n    const result = await getOTP(userData, tokenVerify);\n    SendMail.AccountRegister(result);\n\n    if (result) {\n      return result;\n    }\n    return null;\n  }\n  /**\n   * @param email\n   */\n  public static async changePassword(email: string) {\n    const userEmail = email;\n  }\n  /**\n   * @param userData\n   */\n  public static async updateProfileuser(userData: User) {\n    // const currentUser = await UserService.validateUserEmail(userData.email);\n    // if (currentUser) {\n    //   return { message: \"the user already exist !\", code: 400, currentUser };\n    // }\n\n    const generateToken = {\n      code: getUniqueCodev2(),\n    };\n\n    const tokenVerify = jwt.sign(\n      JSON.parse(JSON.stringify(generateToken)),\n      JWT_SECRET_ACCESS_TOKEN,\n      {\n        expiresIn,\n      }\n    );\n\n    userData.verify_code = getUniqueCodev3();\n    userData.tokenVerify = tokenVerify;\n    const result = await updateProfileUser(userData);\n    if (!result) {\n      throw new ResponseError.BadRequest(\"Could not update user!\");\n    } else {\n      return {\n        message: null,\n        updateuser: {\n          user: result,\n        },\n      };\n    }\n  }\n\n  public static async getUserSkills() {\n    const data = await getUserSkills();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n  /**\n   * @param email\n   */\n  public static async checkNickName(nickName: string) {\n    const getData = await checkNickName();\n    if (getData[0].nickName === nickName) {\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\n    } else {\n      return;\n    }\n  }\n\n  public static async sendFrogetPasswordToken(email: string) {\n    useValidation(schemaUser.checkEmail, { email: email });\n    const currentUser = await UserService.validateUserEmail(email);\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\n\n    if (currentUser.emailConfirmed === 0)\n      return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\",\n      };\n    if (currentUser.signupStatus === 0)\n      return { status: 3, message: \"signup process is not complete yet !\" };\n    // TODO for fix isActive to boolean\n    if (currentUser.isActive === 0)\n      return { status: 4, message: \"this account is not active !\" };\n    const newCode = getUniqueCodev3();\n    await updateUserVerifyCode(currentUser.user_id, newCode);\n    // send forgot pass token code\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\n    return { status: 5, message: \"code has been send successfully !\" };\n  }\n}\n\nexport default UserService;\n"],"mappings":"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","ignoreList":[]}},"mtime":1722081269000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst sercvice_1 = __importDefault(require(\"./sercvice\"));\n// ***** checkNickName\npublic_1.default.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.default)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.default.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.default.post(\"/getUserInfo\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const data = req.body.email;\n      const userData = yield sercvice_1.default.getUserInfo(data);\n      const buildResponse = yield app_response_1.default.get(userData);\n      return res.json(buildResponse);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n});\n// ***** confirm\npublic_1.default.post(\"/user/confirm\", (0, async_handler_1.default)(function confirmEmail(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.default.confrimEmail(formData);\n    res.status(result.code).json(result);\n  });\n}));\n// ***** getOTP\npublic_1.default.get(\"/user/getOTP/:email\", (0, async_handler_1.default)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.default.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.default.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.default.put(`/user/updateProfile`, (0, async_handler_1.default)(function updateProfileUser(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.default.updateProfileuser(formData);\n    const buildResponse = yield app_response_1.default.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** getSkills\npublic_1.default.get(`/user/getSkills`, (0, async_handler_1.default)(function getUserSkills(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield sercvice_1.default.getUserSkills();\n    const buildResponse = app_response_1.default.get(result);\n    if (buildResponse) {\n      res.status(200).json(buildResponse);\n    }\n  });\n}));\n// ***** forgot-passsword\npublic_1.default.get('/user/forgot-passsword/:email', (0, async_handler_1.default)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.default.sendFrogetPasswordToken(email);\n    return res.json(data);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsImRlZmF1bHQiLCJnZXQiLCJjaGVja05pY2tOYW1lIiwicmVxIiwicmVzIiwiZm9ybURhdGEiLCJwYXJhbXMiLCJuaWNrbmFtZSIsInJlc3VsdCIsImpzb24iLCJwb3N0IiwiZ2V0QWxsVXNlckRhdGEiLCJkYXRhIiwiYm9keSIsImVtYWlsIiwidXNlckRhdGEiLCJnZXRVc2VySW5mbyIsImJ1aWxkUmVzcG9uc2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJjb25maXJtRW1haWwiLCJjb25mcmltRW1haWwiLCJzdGF0dXMiLCJjb2RlIiwiZ2V0T1RQIiwidmVyaWZ5X2NvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJnZXRWZXJpZnlDb2RlIiwicHV0IiwidXBkYXRlUHJvZmlsZVVzZXIiLCJ1cGRhdGVQcm9maWxldXNlciIsImdldFVzZXJTa2lsbHMiLCJmb3JnZXRQc3Nzd29yZCIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgYXN5bmNIYW5kbGVyIGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuL3NlcmN2aWNlXCI7XG5cbi8vICoqKioqIGNoZWNrTmlja05hbWVcbnJvdXRlcy5nZXQoXG4gIFwiL3VzZXIvY2hlY2tOaWNrTmFtZS86bmlja25hbWVcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGNoZWNrTmlja05hbWUocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEucGFyYW1zLm5pY2tuYW1lO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEpO1xuICAgIHJlcy5qc29uKHJlc3VsdCk7XG4gIH0pXG4pO1xuLy8gKioqKiogZ2V0VXNlckluZm9cbnJvdXRlcy5wb3N0KFxuICBcIi9nZXRVc2VySW5mb1wiLFxuICBhc3luYyBmdW5jdGlvbiBnZXRBbGxVc2VyRGF0YShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IHJlcS5ib2R5LmVtYWlsO1xuICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VySW5mbyhkYXRhKTtcbiAgICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldCh1c2VyRGF0YSk7XG4gICAgICByZXR1cm4gcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICB9XG4gIH1cbik7XG4vLyAqKioqKiBjb25maXJtXG5yb3V0ZXMucG9zdChcbiAgXCIvdXNlci9jb25maXJtXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5jb25mcmltRW1haWwoZm9ybURhdGEpO1xuICAgIHJlcy5zdGF0dXMocmVzdWx0LmNvZGUpLmpzb24ocmVzdWx0KTtcbiAgfSlcbik7XG4vLyAqKioqKiBnZXRPVFBcbnJvdXRlcy5nZXQoXG4gIFwiL3VzZXIvZ2V0T1RQLzplbWFpbFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLnBhcmFtcy5lbWFpbDtcbiAgICBjb25zdCB2ZXJpZnlfY29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFZlcmlmeUNvZGUoZm9ybURhdGEsIHZlcmlmeV9jb2RlKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4vLyAqKioqKiB1cGRhdGVQcm9maWxlXG5yb3V0ZXMucHV0KFxuICBgL3VzZXIvdXBkYXRlUHJvZmlsZWAsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVByb2ZpbGV1c2VyKGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQocmVzdWx0KTtcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG4vLyAqKioqKiBnZXRTa2lsbHNcbnJvdXRlcy5nZXQoXG4gIGAvdXNlci9nZXRTa2lsbHNgLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclNraWxscyhyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VyU2tpbGxzKCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KHJlc3VsdCk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG4vLyAqKioqKiBmb3Jnb3QtcGFzc3N3b3JkXG5cblxuXG4gIHJvdXRlcy5nZXQoXG4gICAgJy91c2VyL2ZvcmdvdC1wYXNzc3dvcmQvOmVtYWlsJyxcbiAgICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZm9yZ2V0UHNzc3dvcmQocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWxcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBVc2VyU2VydmljZS5zZW5kRnJvZ2V0UGFzc3dvcmRUb2tlbihlbWFpbClcbiAgICAgIHJldHVybiByZXMuanNvbihkYXRhKVxuICAgIH0pXG4gIClcbiAgXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLGNBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxVQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtB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","map":{"version":3,"names":["async_handler_1","__importDefault","require","common_1","app_response_1","public_1","sercvice_1","default","get","checkNickName","req","res","formData","params","nickname","result","json","post","getAllUserData","data","body","email","userData","getUserInfo","buildResponse","error","console","log","confirmEmail","confrimEmail","status","code","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfileUser","updateProfileuser","getUserSkills","forgetPsssword","sendFrogetPasswordToken"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/My-projects/user-information/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport asyncHandler from \"../../helper/async-handler\";\nimport { getUniqueCodev3 } from \"../../helper/common\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport UserService from \"./sercvice\";\n\n// ***** checkNickName\nroutes.get(\n  \"/user/checkNickName/:nickname\",\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\n    const formData = req.params.nickname;\n    const result = await UserService.checkNickName(formData);\n    res.json(result);\n  })\n);\n// ***** getUserInfo\nroutes.post(\n  \"/getUserInfo\",\n  async function getAllUserData(req: Request, res: Response) {\n    try {\n      const data = req.body.email;\n      const userData = await UserService.getUserInfo(data);\n      const buildResponse = await BuildResponse.get(userData);\n      return res.json(buildResponse);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n);\n// ***** confirm\nroutes.post(\n  \"/user/confirm\",\n  asyncHandler(async function confirmEmail(req: Request, res: Response) {\n    const formData = req.body;\n    const result = await UserService.confrimEmail(formData);\n    res.status(result.code).json(result);\n  })\n);\n// ***** getOTP\nroutes.get(\n  \"/user/getOTP/:email\",\n  asyncHandler(async function getOTP(req: Request, res: Response) {\n    const formData = req.params.email;\n    const verify_code = getUniqueCodev3();\n    const result = await UserService.getVerifyCode(formData, verify_code);\n    const buildResponse = await BuildResponse.get(result);\n    res.json(buildResponse);\n  })\n);\n// ***** updateProfile\nroutes.put(\n  `/user/updateProfile`,\n  asyncHandler(async function updateProfileUser(req: Request, res: Response) {\n    const formData = req.body;\n    const result = await UserService.updateProfileuser(formData);\n    const buildResponse = await BuildResponse.get(result);\n    res.json(buildResponse);\n  })\n);\n// ***** getSkills\nroutes.get(\n  `/user/getSkills`,\n  asyncHandler(async function getUserSkills(req: Request, res: Response) {\n    const result = await UserService.getUserSkills();\n    const buildResponse = BuildResponse.get(result);\n    if (buildResponse) {\n      res.status(200).json(buildResponse);\n    }\n  })\n);\n// ***** forgot-passsword\n\n\n\n  routes.get(\n    '/user/forgot-passsword/:email',\n    asyncHandler(async function forgetPsssword(req: any, res: any) {\n      const email = req.params.email\n      const data = await UserService.sendFrogetPasswordToken(email)\n      return res.json(data)\n    })\n  )\n  \n"],"mappings":"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","ignoreList":[]}},"mtime":1722065909000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nconst asyncHandler = express_async_handler_1.default;\nexports.default = asyncHandler;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJhc3luY0hhbmRsZXIiLCJkZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9oZWxwZXIvYXN5bmMtaGFuZGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzc0FzeW5jSGFuZGxlciBmcm9tICdleHByZXNzLWFzeW5jLWhhbmRsZXInXG5cbmNvbnN0IGFzeW5jSGFuZGxlciA9IGV4cHJlc3NBc3luY0hhbmRsZXJcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmNIYW5kbGVyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSx1QkFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxZQUFZLEdBQUdILHVCQUFBLENBQUFJLE9BQW1CO0FBRXhDQyxPQUFBLENBQUFELE9BQUEsR0FBZUQsWUFBWSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","asyncHandler","default","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/My-projects/user-information/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\n\nconst asyncHandler = expressAsyncHandler\n\nexport default asyncHandler\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,YAAY,GAAGH,uBAAA,CAAAI,OAAmB;AAExCC,OAAA,CAAAD,OAAA,GAAeD,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = require(\"./service\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\npublic_1.default.get(\"/navItem\", (0, async_handler_1.default)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsImRlZmF1bHQiLCJnZXQiLCJnZXROYXZJdGVtcyIsInJlcSIsInJlcyIsImRhdGEiLCJOYXZJdGVtU2VydmljZSIsImdldEFsbE5hdkl0ZW1zIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9uYXYtaXRlbXMvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXN5bmNIYW5kbGVyIGZyb20gXCIuLi8uLi9oZWxwZXIvYXN5bmMtaGFuZGxlclwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IHsgTmF2SXRlbVNlcnZpY2UgfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcblxucm91dGVzLmdldChcbiAgXCIvbmF2SXRlbVwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IE5hdkl0ZW1TZXJ2aWNlLmdldEFsbE5hdkl0ZW1zKCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfVxuICB9KVxuKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxTQUFBLEdBQUFGLE9BQUE7QUFDQSxNQUFBRyxjQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQUVBQyxRQUFBLENBQUFHLE9BQU0sQ0FBQ0MsR0FBRyxDQUNSLFVBQVUsRUFDVixJQUFBUCxlQUFBLENBQUFNLE9BQVksRUFBQyxTQUFlRSxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLElBQUksR0FBRyxNQUFNUCxTQUFBLENBQUFRLGNBQWMsQ0FBQ0MsY0FBYyxFQUFFO0lBQ2xELE1BQU1DLGFBQWEsR0FBR1QsY0FBQSxDQUFBQyxPQUFhLENBQUNDLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO0lBQzdDLElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDRixhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","__importDefault","require","public_1","service_1","app_response_1","default","get","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","status","json"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\nav-items\\","sources":["D:/My-projects/user-information/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\nimport routes from \"../../routes/public\";\nimport { NavItemService } from \"./service\";\nimport BuildResponse from \"../../modules/response/app_response\";\n\nroutes.get(\n  \"/navItem\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await NavItemService.getAllNavItems();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEAC,QAAA,CAAAG,OAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGT,cAAA,CAAAC,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcbmF2LWl0ZW1zXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL25hdi1pdGVtcy9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldE5hdkl0ZW1zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuXG5jbGFzcyBOYXZJdGVtU2VydmljZSB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0QWxsTmF2SXRlbXMoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldE5hdkl0ZW1zKCk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBva2AsIGRhdGEgfTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG5leHBvcnQgeyAgTmF2SXRlbVNlcnZpY2UgIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLGNBQWM7RUFDWCxPQUFhQyxjQUFjQSxDQUFBOztNQUNoQyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFLLFdBQVcsR0FBRTtNQUNoQyxJQUFJRCxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQztNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7OztBQUlPRyxPQUFBLENBQUFMLGNBQUEsR0FBQUEsY0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\nav-items\\","sources":["D:/My-projects/user-information/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\n\nclass NavItemService {\n  public static async getAllNavItems() {\n    const data = await getNavItems();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n}\n\n\nexport {  NavItemService  };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,cAAc;EACX,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAIOG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = __importDefault(require(\"./service\"));\npublic_1.default.post(\"/insertAppointment\", (0, async_handler_1.default)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield service_1.default.insertEvent(eventData);\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.default.get(\"/getAppointment\", (0, async_handler_1.default)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.default.getEventData();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.default.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.default)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.default.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.default.deleted({});\n    return res.status(200).json(buildResponse);\n  });\n}));\npublic_1.default.put(\"/updateAppointment/update\", (0, async_handler_1.default)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.default.updated(data);\n    return res.status(201).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsImRlZmF1bHQiLCJwb3N0IiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsImJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJqc29uIiwiZ2V0RXZlbnREYXRhIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJ1cGRhdGVkIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhcHBvaW50bWVudFxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hcHBvaW50bWVudC9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGFzeW5jSGFuZGxlciBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IENhbGVuZGFyU2VydmljZSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5cbnJvdXRlcy5wb3N0KFxuICBcIi9pbnNlcnRBcHBvaW50bWVudFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RXZlbnQocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZXZlbnREYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5pbnNlcnRFdmVudChldmVudERhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG5cbnJvdXRlcy5nZXQoXG4gIFwiL2dldEFwcG9pbnRtZW50XCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBnZXRFdmVudERhdGEocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS5nZXRFdmVudERhdGEoKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH0pXG4pO1xuXG5yb3V0ZXMuZGVsZXRlKFxuICBcIi9kZWxldGVBcHBvaW50bWVudC9kZWxldGUvOmlkXCIsXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBkZWxldGVBcHBvaW50bWVudChcbiAgICByZXE6IFJlcXVlc3QsXG4gICAgcmVzOiBSZXNwb25zZSxcbiAgICBuZXh0OiBOZXh0RnVuY3Rpb25cbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zO1xuICAgIGF3YWl0IENhbGVuZGFyU2VydmljZS5kZWxldGVBcHBvaW50bWVudEl0ZW0oaWQpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmRlbGV0ZWQoe30pO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfSlcbik7XG5cbnJvdXRlcy5wdXQoXG4gIFwiL3VwZGF0ZUFwcG9pbnRtZW50L3VwZGF0ZVwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlQXBwb2ludG1lbnRJdGVtKFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlXG4gICkgOiBQcm9taXNlPGFueT57XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQ2FsZW5kYXJTZXJ2aWNlLnVwZGF0ZUFwcG9pbnRtZW50SXRlbShmb3JtRGF0YSk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsZUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxjQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsU0FBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxPQUFNLENBQUNDLElBQUksQ0FDVCxvQkFBb0IsRUFDcEIsSUFBQVAsZUFBQSxDQUFBTSxPQUFZLEVBQUMsU0FBZUUsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxTQUFTLEdBQUdGLEdBQUcsQ0FBQ0csSUFBSTtJQUMxQixNQUFNQyxJQUFJLEdBQUcsTUFBTVIsU0FBQSxDQUFBQyxPQUFlLENBQUNFLFdBQVcsQ0FBQ0csU0FBUyxDQUFDO0lBQ3pELE1BQU1HLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUNTLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDO0lBQzdDLElBQUlDLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURWLFFBQUEsQ0FBQUUsT0FBTSxDQUFDUyxHQUFHLENBQ1IsaUJBQWlCLEVBQ2pCLElBQUFmLGVBQUEsQ0FBQU0sT0FBWSxFQUFDLFNBQWVZLFlBQVlBLENBQUNULEdBQVEsRUFBRUMsR0FBUTs7SUFDekQsTUFBTUcsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQUMsT0FBZSxDQUFDWSxZQUFZLEVBQUU7SUFDakQsTUFBTUosYUFBYSxHQUFHWCxjQUFBLENBQUFHLE9BQWEsQ0FBQ1MsR0FBRyxDQUFDRixJQUFJLENBQUM7SUFDN0MsSUFBSUMsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFYsUUFBQSxDQUFBRSxPQUFNLENBQUNhLE1BQU0sQ0FDWCwrQkFBK0IsRUFDL0IsSUFBQW5CLGVBQUEsQ0FBQU0sT0FBWSxFQUFDLFNBQWVjLGlCQUFpQkEsQ0FDM0NYLEdBQVksRUFDWkMsR0FBYSxFQUNiVyxJQUFrQjs7SUFFbEIsTUFBTTtNQUFFQztJQUFFLENBQUUsR0FBR2IsR0FBRyxDQUFDYyxNQUFNO0lBQ3pCLE1BQU1sQixTQUFBLENBQUFDLE9BQWUsQ0FBQ2tCLHFCQUFxQixDQUFDRixFQUFFLENBQUM7SUFDL0MsTUFBTVIsYUFBYSxHQUFHWCxjQUFBLENBQUFHLE9BQWEsQ0FBQ21CLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDL0MsT0FBT2YsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0VBQzVDLENBQUM7Q0FBQSxDQUFDLENBQ0g7QUFFRFYsUUFBQSxDQUFBRSxPQUFNLENBQUNvQixHQUFHLENBQ1IsMkJBQTJCLEVBQzNCLElBQUExQixlQUFBLENBQUFNLE9BQVksRUFBQyxTQUFlcUIscUJBQXFCQSxDQUMvQ2xCLEdBQVksRUFDWkMsR0FBYTs7SUFFYixNQUFNa0IsUUFBUSxHQUFHbkIsR0FBRyxDQUFDRyxJQUFJO0lBQ3pCLE1BQU1DLElBQUksR0FBRyxNQUFNUixTQUFBLENBQUFDLE9BQWUsQ0FBQ3FCLHFCQUFxQixDQUFDQyxRQUFRLENBQUM7SUFDbEUsTUFBTWQsYUFBYSxHQUFHWCxjQUFBLENBQUFHLE9BQWEsQ0FBQ3VCLE9BQU8sQ0FBQ2hCLElBQUksQ0FBQztJQUNqRCxPQUFPSCxHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7RUFDNUMsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","__importDefault","require","app_response_1","public_1","service_1","default","post","insertEvent","req","res","eventData","body","data","buildResponse","get","status","json","getEventData","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","updated"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\appointment\\","sources":["D:/My-projects/user-information/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport asyncHandler from \"../../helper/async-handler\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport CalendarService from \"./service\";\n\nroutes.post(\n  \"/insertAppointment\",\n  asyncHandler(async function insertEvent(req: any, res: any) {\n    const eventData = req.body;\n    const data = await CalendarService.insertEvent(eventData);\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nroutes.get(\n  \"/getAppointment\",\n  asyncHandler(async function getEventData(req: any, res: any) {\n    const data = await CalendarService.getEventData();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nroutes.delete(\n  \"/deleteAppointment/delete/:id\",\n  asyncHandler(async function deleteAppointment(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { id } = req.params;\n    await CalendarService.deleteAppointmentItem(id);\n    const buildResponse = BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  })\n);\n\nroutes.put(\n  \"/updateAppointment/update\",\n  asyncHandler(async function updateAppointmentItem(\n    req: Request,\n    res: Response\n  ) : Promise<any>{\n    const formData = req.body;\n    const data = await CalendarService.updateAppointmentItem(formData);\n    const buildResponse = BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,SAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACE,WAAW,CAACG,SAAS,CAAC;IACzD,MAAMG,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7C,IAAIC,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACS,GAAG,CACR,iBAAiB,EACjB,IAAAf,eAAA,CAAAM,OAAY,EAAC,SAAeY,YAAYA,CAACT,GAAQ,EAAEC,GAAQ;;IACzD,MAAMG,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACY,YAAY,EAAE;IACjD,MAAMJ,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7C,IAAIC,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACa,MAAM,CACX,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAM,OAAY,EAAC,SAAec,iBAAiBA,CAC3CX,GAAY,EACZC,GAAa,EACbW,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGb,GAAG,CAACc,MAAM;IACzB,MAAMlB,SAAA,CAAAC,OAAe,CAACkB,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMR,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACmB,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACoB,GAAG,CACR,2BAA2B,EAC3B,IAAA1B,eAAA,CAAAM,OAAY,EAAC,SAAeqB,qBAAqBA,CAC/ClB,GAAY,EACZC,GAAa;;IAEb,MAAMkB,QAAQ,GAAGnB,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACqB,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMd,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACuB,OAAO,CAAChB,IAAI,CAAC;IACjD,OAAOH,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nclass CalendarService {\n  static insertEvent(eventData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.saveAppointment)(eventData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.default = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkNhbGVuZGFyU2VydmljZSIsImluc2VydEV2ZW50IiwiZXZlbnREYXRhIiwiZGF0YSIsInNhdmVBcHBvaW50bWVudCIsIm1lc3NhZ2UiLCJnZXRFdmVudERhdGEiLCJnZXRBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50SXRlbSIsImlkIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJ1cGRhdGVBcHBvaW50bWVudEl0ZW0iLCJkYXRhQXBwaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFwcG9pbnRtZW50XFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL2FwcG9pbnRtZW50L3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZGVsZXRlQXBwb2ludG1lbnQsXG4gIGdldEFwcG9pbnRtZW50LFxuICBzYXZlQXBwb2ludG1lbnQsXG4gIHVwZGF0ZUFwcG9pbnRtZW50LFxufSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XG5cbmNsYXNzIENhbGVuZGFyU2VydmljZSB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgaW5zZXJ0RXZlbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc2F2ZUFwcG9pbnRtZW50KGV2ZW50RGF0YSk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEV2ZW50RGF0YSgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0QXBwb2ludG1lbnQoKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBkZWxldGVBcHBvaW50bWVudEl0ZW0oaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkZWxldGVBcHBvaW50bWVudChpZCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHVwZGF0ZUFwcG9pbnRtZW50SXRlbShkYXRhQXBwaW50bWVudDogSUFwcG9pbnRtZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZUFwcG9pbnRtZW50KGRhdGFBcHBpbnRtZW50KTtcbiAgICBkYXRhO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBDYWxlbmRhclNlcnZpY2U7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBUUEsTUFBTUMsZUFBZTtFQUNaLE9BQWFDLFdBQVdBLENBQUNDLFNBQXVCOztNQUNyRCxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBTCxJQUFBLENBQUFNLGVBQWUsRUFBQ0YsU0FBUyxDQUFDO01BQzdDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUUsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhRyxZQUFZQSxDQUFBOztNQUM5QixNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBTCxJQUFBLENBQUFTLGNBQWMsR0FBRTtNQUNuQyxJQUFJSixJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQztJQUNGLENBQUM7O0VBRU0sT0FBYUsscUJBQXFCQSxDQUFDQyxFQUFVOztNQUNsRCxNQUFNTixJQUFJLEdBQUcsTUFBTSxJQUFBTCxJQUFBLENBQUFZLGlCQUFpQixFQUFDRCxFQUFFLENBQUM7TUFDeEMsT0FBT04sSUFBSTtJQUNiLENBQUM7O0VBRU0sT0FBYVEscUJBQXFCQSxDQUFDQyxjQUE0Qjs7TUFDcEUsTUFBTVQsSUFBSSxHQUFHLE1BQU0sSUFBQUwsSUFBQSxDQUFBZSxpQkFBaUIsRUFBQ0QsY0FBYyxDQUFDO01BQ3BEVCxJQUFJO0lBQ04sQ0FBQzs7O0FBRUhXLE9BQUEsQ0FBQUMsT0FBQSxHQUFlZixlQUFlIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","CalendarService","insertEvent","eventData","data","saveAppointment","message","getEventData","getAppointment","deleteAppointmentItem","id","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\appointment\\","sources":["D:/My-projects/user-information/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\n  deleteAppointment,\n  getAppointment,\n  saveAppointment,\n  updateAppointment,\n} from \"../../bin/db\";\nimport { IAppointment } from \"../../types/appointment.interface\";\n\nclass CalendarService {\n  public static async insertEvent(eventData: IAppointment) {\n    const data = await saveAppointment(eventData);\n    if (data) {\n      return { message: \"ok\", data };\n    } else {\n      return null;\n    }\n  }\n\n  public static async getEventData() {\n    const data = await getAppointment();\n    if (data) {\n      return { message: \"ok\", data };\n    }\n  }\n\n  public static async deleteAppointmentItem(id: string) {\n    const data = await deleteAppointment(id);\n    return data;\n  }\n\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\n    const data = await updateAppointment(dataAppintment);\n    data;\n  }\n}\nexport default CalendarService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAQA,MAAMC,eAAe;EACZ,OAAaC,WAAWA,CAACC,SAAuB;;MACrD,MAAMC,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAM,eAAe,EAACF,SAAS,CAAC;MAC7C,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaG,YAAYA,CAAA;;MAC9B,MAAMH,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAS,cAAc,GAAE;MACnC,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaK,qBAAqBA,CAACC,EAAU;;MAClD,MAAMN,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAY,iBAAiB,EAACD,EAAE,CAAC;MACxC,OAAON,IAAI;IACb,CAAC;;EAEM,OAAaQ,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMT,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAe,iBAAiB,EAACD,cAAc,CAAC;MACpDT,IAAI;IACN,CAAC;;;AAEHW,OAAA,CAAAC,OAAA,GAAef,eAAe","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst services_1 = require(\"./services\");\npublic_1.default.get(\"/customers\", (0, async_handler_1.default)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.CustomersService.getCustomers();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJkZWZhdWx0IiwiZ2V0IiwiZ2V0TmF2SXRlbXMiLCJyZXEiLCJyZXMiLCJkYXRhIiwiQ3VzdG9tZXJzU2VydmljZSIsImdldEN1c3RvbWVycyIsImJ1aWxkUmVzcG9uc2UiLCJzdGF0dXMiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjdXN0b21lcnNcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY3VzdG9tZXJzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzeW5jSGFuZGxlciBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuaW1wb3J0IHsgQ3VzdG9tZXJzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzXCI7XG5cbnJvdXRlcy5nZXQoXG4gIFwiL2N1c3RvbWVyc1wiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEN1c3RvbWVyc1NlcnZpY2UuZ2V0Q3VzdG9tZXJzKCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfVxuICB9KVxuKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLFVBQUEsR0FBQUgsT0FBQTtBQUVBRSxRQUFBLENBQUFFLE9BQU0sQ0FBQ0MsR0FBRyxDQUNSLFlBQVksRUFDWixJQUFBUCxlQUFBLENBQUFNLE9BQVksRUFBQyxTQUFlRSxXQUFXQSxDQUFDQyxHQUFRLEVBQUVDLEdBQVE7O0lBQ3hELE1BQU1DLElBQUksR0FBRyxNQUFNTixVQUFBLENBQUFPLGdCQUFnQixDQUFDQyxZQUFZLEVBQUU7SUFDbEQsTUFBTUMsYUFBYSxHQUFHWCxjQUFBLENBQUFHLE9BQWEsQ0FBQ0MsR0FBRyxDQUFDSSxJQUFJLENBQUM7SUFDN0MsSUFBSUcsYUFBYSxFQUFFO01BQ2pCLE9BQU9KLEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNGLGFBQWEsQ0FBQztJQUM1QztFQUNGLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","__importDefault","require","app_response_1","public_1","services_1","default","get","getNavItems","req","res","data","CustomersService","getCustomers","buildResponse","status","json"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\customers\\","sources":["D:/My-projects/user-information/server/src/controller/customers/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport { CustomersService } from \"./services\";\n\nroutes.get(\n  \"/customers\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await CustomersService.getCustomers();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,OAAM,CAACC,GAAG,CACR,YAAY,EACZ,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMN,UAAA,CAAAO,gBAAgB,CAACC,YAAY,EAAE;IAClD,MAAMC,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomersService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass CustomersService {\n  static getCustomers() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getCustomers)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.CustomersService = CustomersService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkN1c3RvbWVyc1NlcnZpY2UiLCJnZXRDdXN0b21lcnMiLCJkYXRhIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGN1c3RvbWVyc1xcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9jdXN0b21lcnMvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0Q3VzdG9tZXJzIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuXG5cbmNsYXNzIEN1c3RvbWVyc1NlcnZpY2Uge1xuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0Q3VzdG9tZXJzKCkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEN1c3RvbWVycygpO1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbmV4cG9ydCB7IEN1c3RvbWVyc1NlcnZpY2UgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBR0EsTUFBTUMsZ0JBQWdCO0VBQ1gsT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxZQUFZLEdBQUU7TUFDakMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOzs7QUFHSUUsT0FBQSxDQUFBSixnQkFBQSxHQUFBQSxnQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","CustomersService","getCustomers","data","message","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\customers\\","sources":["D:/My-projects/user-information/server/src/controller/customers/services.ts"],"sourcesContent":["import { getCustomers } from \"../../bin/db\";\n\n\nclass CustomersService {\n    public static async getCustomers() {\n      const data = await getCustomers();\n      if (data) {\n        return { message: `ok`, data };\n      }\n      return null;\n    }\n  }\n\nexport { CustomersService };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAGA,MAAMC,gBAAgB;EACX,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,YAAY,GAAE;MACjC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAGIE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\npublic_1.default.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.default.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJwdWJsaWNfMSIsImRlZmF1bHQiLCJnZXQiLCJ1c2VyQWRtaW4iLCJyZXEiLCJyZXMiLCJkYXRhIiwiVXNlckFkbWluIiwiZ2V0VXNlckFkbWluIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IFVzZXJBZG1pbiB9IGZyb20gXCIuL3NlcnZpY2VcIjtcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xuXG5cbnJvdXRlcy5nZXQoXG4gIGAvZ2V0VXNlckFkbWluYCxcbiAgYXN5bmMgZnVuY3Rpb24gdXNlckFkbWluKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBVc2VyQWRtaW4uZ2V0VXNlckFkbWluKCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIHJlcy5zdGF0dXMoYnVpbGRSZXNwb25zZS5jb2RlKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9XG4pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBQyxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBRyxRQUFBLEdBQUFELGVBQUEsQ0FBQUYsT0FBQTtBQUdBRyxRQUFBLENBQUFDLE9BQU0sQ0FBQ0MsR0FBRyxDQUNSLGVBQWUsRUFDZixTQUFlQyxTQUFTQSxDQUFDQyxHQUFZLEVBQUVDLEdBQWE7O0lBQ2xELE1BQU1DLElBQUksR0FBRyxNQUFNVixTQUFBLENBQUFXLFNBQVMsQ0FBQ0MsWUFBWSxFQUFFO0lBQzNDLE1BQU1DLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUNDLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO0lBQzdDRCxHQUFHLENBQUNLLE1BQU0sQ0FBQ0QsYUFBYSxDQUFDRSxJQUFJLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7RUFDcEQsQ0FBQztDQUFBLENBQ0YiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["service_1","require","app_response_1","__importDefault","public_1","default","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","status","code","json"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\admin\\","sources":["D:/My-projects/user-information/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport { UserAdmin } from \"./service\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\n\n\nroutes.get(\n  `/getUserAdmin`,\n  async function userAdmin(req: Request, res: Response) {\n    const data = await UserAdmin.getUserAdmin();\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAC,eAAA,CAAAF,OAAA;AACA,MAAAG,QAAA,GAAAD,eAAA,CAAAF,OAAA;AAGAG,QAAA,CAAAC,OAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMV,SAAA,CAAAW,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACK,MAAM,CAACD,aAAa,CAACE,IAAI,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGFkbWluXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL2FkbWluL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QWRtaW5zIH0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuXG5jbGFzcyBVc2VyQWRtaW4ge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFVzZXJBZG1pbigpIHtcbiAgICBjb25zdCBhZG1pbiA9IGF3YWl0IGdldEFkbWlucygpO1xuICAgIGlmIChhZG1pbikge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBhZG1pbiB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgVXNlckFkbWluIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUVBLE1BQU1DLFNBQVM7RUFDTixPQUFhQyxZQUFZQSxDQUFBOztNQUM5QixNQUFNQyxLQUFLLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFLLFNBQVMsR0FBRTtNQUMvQixJQUFJRCxLQUFLLEVBQUU7UUFDVCxPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUssQ0FBRTtNQUNqQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQUdNRyxPQUFBLENBQUFMLFNBQUEsR0FBQUEsU0FBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\admin\\","sources":["D:/My-projects/user-information/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\n\nclass UserAdmin {\n  public static async getUserAdmin() {\n    const admin = await getAdmins();\n    if (admin) {\n      return { message: \"ok\", admin };\n    } else {\n      return null;\n    }\n  }\n}\n\nexport { UserAdmin };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorYup;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXBfMSIsInJlcXVpcmUiLCJFeHByZXNzRXJyb3JZdXAiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvcnMiLCJqb2luIiwiaW5uZXIiLCJsZW5ndGgiLCJyZWR1Y2UiLCJhY2MiLCJjdXJWYWwiLCJwYXRoIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfeXVwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHsgVmFsaWRhdGlvbkVycm9yIH0gZnJvbSBcInl1cFwiO1xuXG5hc3luYyBmdW5jdGlvbiBFeHByZXNzRXJyb3JZdXAoXG4gICAgZXJyOiBhbnksXG4gICAgcmVxOiBSZXF1ZXN0LFxuICAgIHJlczogUmVzcG9uc2UsXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgVmFsaWRhdGlvbkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBZVVAgVkFMSURBVElPTicpO1xuICAgICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IDQyMixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5lcnJvcnMuam9pbignPGJyLz4nKSB8fCAnWXVwIFZhbGlkYXRpb24gRXJyb3IgIScsXG4gICAgICAgICAgICBlcnJvcnM6XG4gICAgICAgICAgICAgICAgZXJyLmlubmVyLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgPyBlcnIuaW5uZXIucmVkdWNlKChhY2M6IGFueSwgY3VyVmFsOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY1tgJHtjdXJWYWwucGF0aH1gXSA9IGN1clZhbC5tZXNzYWdlIHx8IGN1clZhbC50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgICAgICAgICAgICAgIH0sIHt9KVxuICAgICAgICAgICAgICAgICAgICA6IHsgW2Ake2Vyci5wYXRofWBdOiBlcnIubWVzc2FnZSB8fCBlcnIudHlwZSB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDIyKS5qc29uKGVycm9yKTtcbiAgICB9XG4gICAgbmV4dChlcnIpXG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwcmVzc0Vycm9yWXVwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBLFNBQWVDLGVBQWVBLENBQzFCQyxHQUFRLEVBQ1JDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjs7SUFFbEIsSUFBSUgsR0FBRyxZQUFZSCxLQUFBLENBQUFPLGVBQWUsRUFBRTtNQUNoQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsc0JBQXNCLENBQUM7TUFDbkMsTUFBTUMsS0FBSyxHQUFHO1FBQ1ZDLElBQUksRUFBRSxHQUFHO1FBQ1RDLE9BQU8sRUFBRVQsR0FBRyxDQUFDVSxNQUFNLENBQUNDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSx3QkFBd0I7UUFDN0RELE1BQU0sRUFDRlYsR0FBRyxDQUFDWSxLQUFLLENBQUNDLE1BQU0sR0FBRyxDQUFDLEdBQ2RiLEdBQUcsQ0FBQ1ksS0FBSyxDQUFDRSxNQUFNLENBQUMsQ0FBQ0MsR0FBUSxFQUFFQyxNQUFXLEtBQUk7VUFDekNELEdBQUcsQ0FBQyxHQUFHQyxNQUFNLENBQUNDLElBQUksRUFBRSxDQUFDLEdBQUdELE1BQU0sQ0FBQ1AsT0FBTyxJQUFJTyxNQUFNLENBQUNFLElBQUk7VUFDckQsT0FBT0gsR0FBRztRQUNkLENBQUMsRUFBRSxFQUFFLENBQUMsR0FDSjtVQUFFLENBQUMsR0FBR2YsR0FBRyxDQUFDaUIsSUFBSSxFQUFFLEdBQUdqQixHQUFHLENBQUNTLE9BQU8sSUFBSVQsR0FBRyxDQUFDa0I7UUFBSTtPQUN2RDtNQUNELE9BQU9oQixHQUFHLENBQUNpQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ2IsS0FBSyxDQUFDO0lBQ3RDO0lBQ0FKLElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBRWIsQ0FBQzs7QUFFRHFCLE9BQUEsQ0FBQUMsT0FBQSxHQUFldkIsZUFBZSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["yup_1","require","ExpressErrorYup","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/My-projects/user-information/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { ValidationError } from \"yup\";\n\nasync function ExpressErrorYup(\n    err: any,\n    req: Request,\n    res: Response,\n    next: NextFunction\n) {\n    if (err instanceof ValidationError) {\n        console.log('ERROR YUP VALIDATION');\n        const error = {\n            code: 422,\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\n            errors:\n                err.inner.length > 0\n                    ? err.inner.reduce((acc: any, curVal: any) => {\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\n                        return acc\n                    }, {})\n                    : { [`${err.path}`]: err.message || err.type }\n        }\n        return res.status(422).json(error);\n    }\n    next(err)\n\n}\n\nexport default ExpressErrorYup"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,KAAA,GAAAC,OAAA;AAEA,SAAeC,eAAeA,CAC1BC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYH,KAAA,CAAAO,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC;;AAEDqB,OAAA,CAAAC,OAAA,GAAevB,eAAe","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://181.215.68.165\", \"http://181.215.68.165:8080\", \"http://mindup-server.com\", \"https://mindup-server.com\", \"https://mindupapp.com\"];\nexports.default = allowedOrigins;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbGxvd2VkT3JpZ2lucyIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb25zdGFudHNcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnN0YW50cy9jb25zdGFudHNfYWxsb3dlZF9vcmdpbmFsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGFsbG93ZWRPcmlnaW5zID0gW1xuICAgICdodHRwOi8vbG9jYWxob3N0OjQyMDAnLCAvLyBGcm9udGVuZCBXZWJcbiAgICAnaHR0cDovL2xvY2FsaG9zdDozMDAwJywgLy8gRnJvbnRlbmQgV2ViXG4gICAgXCJodHRwOi8vMTgxLjIxNS42OC4xNjVcIixcbiAgICBcImh0dHA6Ly8xODEuMjE1LjY4LjE2NTo4MDgwXCIsXG4gICAgXCJodHRwOi8vbWluZHVwLXNlcnZlci5jb21cIixcbiAgICBcImh0dHBzOi8vbWluZHVwLXNlcnZlci5jb21cIixcbiAgICBcImh0dHBzOi8vbWluZHVwYXBwLmNvbVwiXG4gIF1cbiAgXG4gIGV4cG9ydCBkZWZhdWx0IGFsbG93ZWRPcmlnaW5zXG4gICJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxNQUFNQSxjQUFjLEdBQUcsQ0FDbkIsdUJBQXVCO0FBQUU7QUFDekIsdUJBQXVCO0FBQUU7QUFDekIsdUJBQXVCLEVBQ3ZCLDRCQUE0QixFQUM1QiwwQkFBMEIsRUFDMUIsMkJBQTJCLEVBQzNCLHVCQUF1QixDQUN4QjtBQUVEQyxPQUFBLENBQUFDLE9BQUEsR0FBZUYsY0FBYyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["allowedOrigins","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\constants\\","sources":["D:/My-projects/user-information/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["const allowedOrigins = [\n    'http://localhost:4200', // Frontend Web\n    'http://localhost:3000', // Frontend Web\n    \"http://181.215.68.165\",\n    \"http://181.215.68.165:8080\",\n    \"http://mindup-server.com\",\n    \"https://mindup-server.com\",\n    \"https://mindupapp.com\"\n  ]\n  \n  export default allowedOrigins\n  "],"mappings":";;;;;AAAA,MAAMA,cAAc,GAAG,CACnB,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,uBAAuB,EACvB,4BAA4B,EAC5B,0BAA0B,EAC1B,2BAA2B,EAC3B,uBAAuB,CACxB;AAEDC,OAAA,CAAAC,OAAA,GAAeF,cAAc","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = require(\"lodash\");\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nfunction generateErrorResponseError(e, code) {\n  return (0, lodash_1.isObject)(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.default.BaseResponse) {\n      return res.status(err.statusCode).json(generateErrorResponseError(err, err.statusCode));\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiaXNPYmplY3QiLCJtZXNzYWdlIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZGVmYXVsdCIsIk11bHRlckVycm9yIiwic3RhdHVzIiwianNvbiIsIkJhc2VSZXNwb25zZSIsInN0YXR1c0NvZGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtaWRkbGV3YXJlc1xcIiwic291cmNlcyI6WyJEOi9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgUmVzcG9uc2VFcnJvciBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuZnVuY3Rpb24gZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZTogRXJyb3IsIGNvZGU6IE51bWJlcikge1xuICByZXR1cm4gaXNPYmplY3QoZS5tZXNzYWdlKSA/IGUubWVzc2FnZSA6IHsgY29kZSwgbWVzc2FnZTogZS5tZXNzYWdlIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yUmVzcG9uc2UoXG4gIGVycjogYW55LFxuICByZXE6IFJlcXVlc3QsXG4gIHJlczogUmVzcG9uc2UsXG4gIG5leHQ6IE5leHRGdW5jdGlvblxuKSB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBtdWx0ZXIuTXVsdGVyRXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZ2VuZXJhdGVFcnJvclJlc3BvbnNlRXJyb3IoZXJyLCA0MDApKVxuICB9XG5cbiAgaWYgKGVyciBpbnN0YW5jZW9mIFJlc3BvbnNlRXJyb3IuQmFzZVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc1xuICAgICAgLnN0YXR1cyhlcnIuc3RhdHVzQ29kZSlcbiAgICAgIC5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgZXJyLnN0YXR1c0NvZGUpKVxuICB9XG4gIG5leHQoZXJyKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFeHByZXNzRXJyb3JSZXNwb25zZVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFELE9BQUE7QUFFQSxNQUFBRSxnQkFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFFQSxTQUFTRywwQkFBMEJBLENBQUNDLENBQVEsRUFBRUMsSUFBWTtFQUN4RCxPQUFPLElBQUFKLFFBQUEsQ0FBQUssUUFBUSxFQUFDRixDQUFDLENBQUNHLE9BQU8sQ0FBQyxHQUFHSCxDQUFDLENBQUNHLE9BQU8sR0FBRztJQUFFRixJQUFJO0lBQUVFLE9BQU8sRUFBRUgsQ0FBQyxDQUFDRztFQUFPLENBQUU7QUFDdkU7QUFFQSxTQUFlQyxvQkFBb0JBLENBQ2pDQyxHQUFRLEVBQ1JDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjs7SUFFbEIsSUFBSUgsR0FBRyxZQUFZWCxRQUFBLENBQUFlLE9BQU0sQ0FBQ0MsV0FBVyxFQUFFO01BQ3JDLE9BQU9ILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNiLDBCQUEwQixDQUFDTSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbkU7SUFFQSxJQUFJQSxHQUFHLFlBQVlQLGdCQUFBLENBQUFXLE9BQWEsQ0FBQ0ksWUFBWSxFQUFFO01BQzdDLE9BQU9OLEdBQUcsQ0FDUEksTUFBTSxDQUFDTixHQUFHLENBQUNTLFVBQVUsQ0FBQyxDQUN0QkYsSUFBSSxDQUFDYiwwQkFBMEIsQ0FBQ00sR0FBRyxFQUFFQSxHQUFHLENBQUNTLFVBQVUsQ0FBQyxDQUFDO0lBQzFEO0lBQ0FOLElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ1gsQ0FBQzs7QUFFRFUsT0FBQSxDQUFBTixPQUFBLEdBQWVMLG9CQUFvQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","isObject","message","ExpressErrorResponse","err","req","res","next","default","MulterError","status","json","BaseResponse","statusCode","exports"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/My-projects/user-information/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\nimport { isObject } from 'lodash';\nimport { NextFunction, Request, Response } from 'express';\nimport ResponseError from '../modules/error/response_error';\n\nfunction generateErrorResponseError(e: Error, code: Number) {\n  return isObject(e.message) ? e.message : { code, message: e.message }\n}\n\nasync function ExpressErrorResponse(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof multer.MulterError) {\n    return res.status(400).json(generateErrorResponseError(err, 400))\n  }\n\n  if (err instanceof ResponseError.BaseResponse) {\n    return res\n      .status(err.statusCode)\n      .json(generateErrorResponseError(err, err.statusCode))\n  }\n  next(err)\n}\n\nexport default ExpressErrorResponse\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AAEA,MAAAE,gBAAA,GAAAH,eAAA,CAAAC,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAO,IAAAJ,QAAA,CAAAK,QAAQ,EAACF,CAAC,CAACG,OAAO,CAAC,GAAGH,CAAC,CAACG,OAAO,GAAG;IAAEF,IAAI;IAAEE,OAAO,EAAEH,CAAC,CAACG;EAAO,CAAE;AACvE;AAEA,SAAeC,oBAAoBA,CACjCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAe,OAAM,CAACC,WAAW,EAAE;MACrC,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAW,OAAa,CAACI,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPI,MAAM,CAACN,GAAG,CAACS,UAAU,CAAC,CACtBF,IAAI,CAACb,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACS,UAAU,CAAC,CAAC;IAC1D;IACAN,IAAI,CAACH,GAAG,CAAC;EACX,CAAC;;AAEDU,OAAA,CAAAN,OAAA,GAAeL,oBAAoB","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_sequelize.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst lodash_1 = require(\"lodash\");\nconst sequelize_1 = require(\"sequelize\");\nfunction msg(message) {\n  return `Sequelize Error: ${message}`;\n}\nfunction ExpressErrorSequelize(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof sequelize_1.BaseError) {\n      if (err instanceof sequelize_1.EmptyResultError) {\n        return res.status(404).json({\n          code: 404,\n          message: msg('Data not found')\n        });\n      }\n      if (err instanceof sequelize_1.ValidationError) {\n        console.log('ERROR SEQUELIZE VALIDATION!!!');\n        const errors = (0, lodash_1.get)(err, 'errors', []);\n        const errorMessage = (0, lodash_1.get)(errors, '0.message', null);\n        const dataError = {\n          code: 400,\n          message: errorMessage ? `Validation error: ${errorMessage}` : err.message,\n          errors: errors.reduce((acc, curVal) => {\n            acc[curVal.path] = curVal.message;\n            return acc;\n          }, {})\n        };\n        console.log(dataError.message, dataError.errors);\n        return res.status(400).json(dataError);\n      }\n      return res.status(500).json({\n        code: 500,\n        message: msg(err.message)\n      });\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorSequelize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfMSIsInJlcXVpcmUiLCJzZXF1ZWxpemVfMSIsIm1zZyIsIm1lc3NhZ2UiLCJFeHByZXNzRXJyb3JTZXF1ZWxpemUiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiQmFzZUVycm9yIiwiRW1wdHlSZXN1bHRFcnJvciIsInN0YXR1cyIsImpzb24iLCJjb2RlIiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9ycyIsImdldCIsImVycm9yTWVzc2FnZSIsImRhdGFFcnJvciIsInJlZHVjZSIsImFjYyIsImN1clZhbCIsInBhdGgiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3Jfc2VxdWVsaXplLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBFbXB0eVJlc3VsdEVycm9yLCBCYXNlRXJyb3IsIFZhbGlkYXRpb25FcnJvciB9IGZyb20gJ3NlcXVlbGl6ZSc7XG5cbmZ1bmN0aW9uIG1zZyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGBTZXF1ZWxpemUgRXJyb3I6ICR7bWVzc2FnZX1gXG59XG5cbmFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NFcnJvclNlcXVlbGl6ZShcbiAgZXJyOiBhbnksXG4gIHJlcTogUmVxdWVzdCxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEJhc2VFcnJvcikge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFbXB0eVJlc3VsdEVycm9yKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IG1zZygnRGF0YSBub3QgZm91bmQnKSxcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgY29uc29sZS5sb2coJ0VSUk9SIFNFUVVFTElaRSBWQUxJREFUSU9OISEhJylcbiAgICAgIGNvbnN0IGVycm9yczogYW55W10gPSBnZXQoZXJyLCAnZXJyb3JzJywgW10pXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBnZXQoZXJyb3JzLCAnMC5tZXNzYWdlJywgbnVsbClcblxuICAgICAgY29uc3QgZGF0YUVycm9yID0ge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZVxuICAgICAgICAgID8gYFZhbGlkYXRpb24gZXJyb3I6ICR7ZXJyb3JNZXNzYWdlfWBcbiAgICAgICAgICA6IGVyci5tZXNzYWdlLFxuICAgICAgICBlcnJvcnM6IGVycm9ycy5yZWR1Y2U8YW55PigoYWNjLCBjdXJWYWwpID0+IHtcbiAgICAgICAgICBhY2NbY3VyVmFsLnBhdGhdID0gY3VyVmFsLm1lc3NhZ2VcbiAgICAgICAgICByZXR1cm4gYWNjXG4gICAgICAgIH0sIHt9KSxcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5sb2coZGF0YUVycm9yLm1lc3NhZ2UsIGRhdGFFcnJvci5lcnJvcnMpXG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbihkYXRhRXJyb3IpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIGNvZGU6IDUwMCxcbiAgICAgIG1lc3NhZ2U6IG1zZyhlcnIubWVzc2FnZSksXG4gICAgfSlcbiAgfVxuXG4gIG5leHQoZXJyKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFeHByZXNzRXJyb3JTZXF1ZWxpemVcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFFQSxTQUFTRSxHQUFHQSxDQUFDQyxPQUFlO0VBQzFCLE9BQU8sb0JBQW9CQSxPQUFPLEVBQUU7QUFDdEM7QUFFQSxTQUFlQyxxQkFBcUJBLENBQ2xDQyxHQUFRLEVBQ1JDLEdBQVksRUFDWkMsR0FBYSxFQUNiQyxJQUFrQjs7SUFFbEIsSUFBSUgsR0FBRyxZQUFZSixXQUFBLENBQUFRLFNBQVMsRUFBRTtNQUM1QixJQUFJSixHQUFHLFlBQVlKLFdBQUEsQ0FBQVMsZ0JBQWdCLEVBQUU7UUFDbkMsT0FBT0gsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUMxQkMsSUFBSSxFQUFFLEdBQUc7VUFDVFYsT0FBTyxFQUFFRCxHQUFHLENBQUMsZ0JBQWdCO1NBQzlCLENBQUM7TUFDSjtNQUVBLElBQUlHLEdBQUcsWUFBWUosV0FBQSxDQUFBYSxlQUFlLEVBQUU7UUFDbENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtCQUErQixDQUFDO1FBQzVDLE1BQU1DLE1BQU0sR0FBVSxJQUFBbEIsUUFBQSxDQUFBbUIsR0FBRyxFQUFDYixHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsQ0FBQztRQUM1QyxNQUFNYyxZQUFZLEdBQUcsSUFBQXBCLFFBQUEsQ0FBQW1CLEdBQUcsRUFBQ0QsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLENBQUM7UUFFbkQsTUFBTUcsU0FBUyxHQUFHO1VBQ2hCUCxJQUFJLEVBQUUsR0FBRztVQUNUVixPQUFPLEVBQUVnQixZQUFZLEdBQ2pCLHFCQUFxQkEsWUFBWSxFQUFFLEdBQ25DZCxHQUFHLENBQUNGLE9BQU87VUFDZmMsTUFBTSxFQUFFQSxNQUFNLENBQUNJLE1BQU0sQ0FBTSxDQUFDQyxHQUFHLEVBQUVDLE1BQU0sS0FBSTtZQUN6Q0QsR0FBRyxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQyxHQUFHRCxNQUFNLENBQUNwQixPQUFPO1lBQ2pDLE9BQU9tQixHQUFHO1VBQ1osQ0FBQyxFQUFFLEVBQUU7U0FDTjtRQUVEUCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0ksU0FBUyxDQUFDakIsT0FBTyxFQUFFaUIsU0FBUyxDQUFDSCxNQUFNLENBQUM7UUFFaEQsT0FBT1YsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ1EsU0FBUyxDQUFDO01BQ3hDO01BRUEsT0FBT2IsR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztRQUMxQkMsSUFBSSxFQUFFLEdBQUc7UUFDVFYsT0FBTyxFQUFFRCxHQUFHLENBQUNHLEdBQUcsQ0FBQ0YsT0FBTztPQUN6QixDQUFDO0lBQ0o7SUFFQUssSUFBSSxDQUFDSCxHQUFHLENBQUM7RUFDWCxDQUFDOztBQUVEb0IsT0FBQSxDQUFBQyxPQUFBLEdBQWV0QixxQkFBcUIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["lodash_1","require","sequelize_1","msg","message","ExpressErrorSequelize","err","req","res","next","BaseError","EmptyResultError","status","json","code","ValidationError","console","log","errors","get","errorMessage","dataError","reduce","acc","curVal","path","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/My-projects/user-information/server/src/middlewares/express_error_sequelize.ts"],"sourcesContent":["import { get } from 'lodash';\nimport { NextFunction, Request, Response } from 'express';\nimport { EmptyResultError, BaseError, ValidationError } from 'sequelize';\n\nfunction msg(message: string) {\n  return `Sequelize Error: ${message}`\n}\n\nasync function ExpressErrorSequelize(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof BaseError) {\n    if (err instanceof EmptyResultError) {\n      return res.status(404).json({\n        code: 404,\n        message: msg('Data not found'),\n      })\n    }\n\n    if (err instanceof ValidationError) {\n      console.log('ERROR SEQUELIZE VALIDATION!!!')\n      const errors: any[] = get(err, 'errors', [])\n      const errorMessage = get(errors, '0.message', null)\n\n      const dataError = {\n        code: 400,\n        message: errorMessage\n          ? `Validation error: ${errorMessage}`\n          : err.message,\n        errors: errors.reduce<any>((acc, curVal) => {\n          acc[curVal.path] = curVal.message\n          return acc\n        }, {}),\n      }\n\n      console.log(dataError.message, dataError.errors)\n\n      return res.status(400).json(dataError)\n    }\n\n    return res.status(500).json({\n      code: 500,\n      message: msg(err.message),\n    })\n  }\n\n  next(err)\n}\n\nexport default ExpressErrorSequelize\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AAEA,MAAAC,WAAA,GAAAD,OAAA;AAEA,SAASE,GAAGA,CAACC,OAAe;EAC1B,OAAO,oBAAoBA,OAAO,EAAE;AACtC;AAEA,SAAeC,qBAAqBA,CAClCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYJ,WAAA,CAAAQ,SAAS,EAAE;MAC5B,IAAIJ,GAAG,YAAYJ,WAAA,CAAAS,gBAAgB,EAAE;QACnC,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAC1BC,IAAI,EAAE,GAAG;UACTV,OAAO,EAAED,GAAG,CAAC,gBAAgB;SAC9B,CAAC;MACJ;MAEA,IAAIG,GAAG,YAAYJ,WAAA,CAAAa,eAAe,EAAE;QAClCC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC5C,MAAMC,MAAM,GAAU,IAAAlB,QAAA,CAAAmB,GAAG,EAACb,GAAG,EAAE,QAAQ,EAAE,EAAE,CAAC;QAC5C,MAAMc,YAAY,GAAG,IAAApB,QAAA,CAAAmB,GAAG,EAACD,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC;QAEnD,MAAMG,SAAS,GAAG;UAChBP,IAAI,EAAE,GAAG;UACTV,OAAO,EAAEgB,YAAY,GACjB,qBAAqBA,YAAY,EAAE,GACnCd,GAAG,CAACF,OAAO;UACfc,MAAM,EAAEA,MAAM,CAACI,MAAM,CAAM,CAACC,GAAG,EAAEC,MAAM,KAAI;YACzCD,GAAG,CAACC,MAAM,CAACC,IAAI,CAAC,GAAGD,MAAM,CAACpB,OAAO;YACjC,OAAOmB,GAAG;UACZ,CAAC,EAAE,EAAE;SACN;QAEDP,OAAO,CAACC,GAAG,CAACI,SAAS,CAACjB,OAAO,EAAEiB,SAAS,CAACH,MAAM,CAAC;QAEhD,OAAOV,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACQ,SAAS,CAAC;MACxC;MAEA,OAAOb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BC,IAAI,EAAE,GAAG;QACTV,OAAO,EAAED,GAAG,CAACG,GAAG,CAACF,OAAO;OACzB,CAAC;IACJ;IAEAK,IAAI,CAACH,GAAG,CAAC;EACX,CAAC;;AAEDoB,OAAA,CAAAC,OAAA,GAAetB,qBAAqB","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    res.once('finish', () => {\n      const {\n        _transaction\n      } = req;\n      for (let i = 1; i <= Object.keys(_transaction).length; i += 1) {\n        const txn = _transaction[i];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentianlly can lead to bug`);\n          console.log('AUTO COMMIT!!!');\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\nexports.default = ExpressAutoHandleTransaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsIm9uY2UiLCJfdHJhbnNhY3Rpb24iLCJpIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsInR4biIsImZpbmlzaGVkIiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiY29tbWl0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2F1dG9faGFuZGxlX3RyYW5zYWN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zYWN0aW9uIH0gZnJvbSAnc2VxdWVsaXplJ1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXNwb25zZSwgUmVxdWVzdCB9IGZyb20gJ2V4cHJlc3MnXG5cbmFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb24oXG4gIHJlcTogYW55LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb25cbikge1xuICByZXMub25jZSgnZmluaXNoJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgX3RyYW5zYWN0aW9uIH0gPSByZXFcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBPYmplY3Qua2V5cyhfdHJhbnNhY3Rpb24pLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCB0eG4gPSBfdHJhbnNhY3Rpb25baV0gYXMgVHJhbnNhY3Rpb24gJiB7XG4gICAgICAgIGZpbmlzaGVkPzogc3RyaW5nXG4gICAgICB9XG4gICAgICBpZiAoIXR4bj8uZmluaXNoZWQpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSByZXEub3JpZ2luYWxVcmxcbiAgICAgICAgY29uc29sZS53YXJuKGBlbmRwb2ludCAke2VuZHBvaW50fSBwb3RlbnRpYW5sbHkgY2FuIGxlYWQgdG8gYnVnYClcbiAgICAgICAgY29uc29sZS5sb2coJ0FVVE8gQ09NTUlUISEhJylcbiAgICAgICAgdHhuLmNvbW1pdCgpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIG5leHQoKVxufVxuXG5leHBvcnQgZGVmYXVsdCBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0EsU0FBZUEsNEJBQTRCQSxDQUN6Q0MsR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQkQsR0FBRyxDQUFDRSxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQUs7TUFDdEIsTUFBTTtRQUFFQztNQUFZLENBQUUsR0FBR0osR0FBRztNQUM1QixLQUFLLElBQUlLLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsSUFBSUMsTUFBTSxDQUFDQyxJQUFJLENBQUNILFlBQVksQ0FBQyxDQUFDSSxNQUFNLEVBQUVILENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDN0QsTUFBTUksR0FBRyxHQUFHTCxZQUFZLENBQUNDLENBQUMsQ0FFekI7UUFDRCxJQUFJLEVBQUNJLEdBQUcsYUFBSEEsR0FBRyx1QkFBSEEsR0FBRyxDQUFFQyxRQUFRLEdBQUU7VUFDbEIsTUFBTUMsUUFBUSxHQUFHWCxHQUFHLENBQUNZLFdBQVc7VUFDaENDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLFlBQVlILFFBQVEsK0JBQStCLENBQUM7VUFDakVFLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixDQUFDO1VBQzdCTixHQUFHLENBQUNPLE1BQU0sRUFBRTtRQUNkO01BQ0Y7SUFDRixDQUFDLENBQUM7SUFFRmQsSUFBSSxFQUFFO0VBQ1IsQ0FBQzs7QUFFRGUsT0FBQSxDQUFBQyxPQUFBLEdBQWVuQiw0QkFBNEIiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["ExpressAutoHandleTransaction","req","res","next","once","_transaction","i","Object","keys","length","txn","finished","endpoint","originalUrl","console","warn","log","commit","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/My-projects/user-information/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from 'sequelize'\nimport { NextFunction, Response, Request } from 'express'\n\nasync function ExpressAutoHandleTransaction(\n  req: any,\n  res: Response,\n  next: NextFunction\n) {\n  res.once('finish', () => {\n    const { _transaction } = req\n    for (let i = 1; i <= Object.keys(_transaction).length; i += 1) {\n      const txn = _transaction[i] as Transaction & {\n        finished?: string\n      }\n      if (!txn?.finished) {\n        const endpoint = req.originalUrl\n        console.warn(`endpoint ${endpoint} potentianlly can lead to bug`)\n        console.log('AUTO COMMIT!!!')\n        txn.commit()\n      }\n    }\n  })\n\n  next()\n}\n\nexport default ExpressAutoHandleTransaction\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAeA,4BAA4BA,CACzCC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElBD,GAAG,CAACE,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAEC;MAAY,CAAE,GAAGJ,GAAG;MAC5B,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIC,MAAM,CAACC,IAAI,CAACH,YAAY,CAAC,CAACI,MAAM,EAAEH,CAAC,IAAI,CAAC,EAAE;QAC7D,MAAMI,GAAG,GAAGL,YAAY,CAACC,CAAC,CAEzB;QACD,IAAI,EAACI,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGX,GAAG,CAACY,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,+BAA+B,CAAC;UACjEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFd,IAAI,EAAE;EACR,CAAC;;AAEDe,OAAA,CAAAC,OAAA,GAAenB,4BAA4B","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst services_1 = __importDefault(require(\"./services\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\npublic_1.default.post(`/admin/add-patient`, (0, async_handler_1.default)(function addPatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.default.addPatient(formData);\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJkZWZhdWx0IiwicG9zdCIsImFkZFBhdGllbnQiLCJyZXEiLCJyZXMiLCJmb3JtRGF0YSIsImJvZHkiLCJkYXRhIiwiYnVpbGRSZXNwb25zZSIsImdldCIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHBhdGllbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzeW5jSGFuZGxlciBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IHJvdXRlcyBmcm9tIFwiLi4vLi4vcm91dGVzL3B1YmxpY1wiO1xyXG5pbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBQYXRpZW50U2VydmljZSBmcm9tIFwiLi9zZXJ2aWNlc1wiO1xyXG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuXHJcbnJvdXRlcy5wb3N0KFxyXG4gIGAvYWRtaW4vYWRkLXBhdGllbnRgLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBhZGRQYXRpZW50KHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBQYXRpZW50U2VydmljZS5hZGRQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YVxyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFBRSxVQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLGNBQUEsR0FBQUosZUFBQSxDQUFBQyxPQUFBO0FBRUFDLFFBQUEsQ0FBQUcsT0FBTSxDQUFDQyxJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCLElBQUFQLGVBQUEsQ0FBQU0sT0FBWSxFQUFDLFNBQWVFLFVBQVVBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDaEUsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1ULFVBQUEsQ0FBQUUsT0FBYyxDQUFDRSxVQUFVLENBQUNHLFFBQVEsQ0FBQztJQUN0RCxNQUFNRyxhQUFhLEdBQUdULGNBQUEsQ0FBQUMsT0FBYSxDQUFDUyxHQUFHLENBQUNGLElBQUksQ0FBQztJQUM3QyxJQUFJQyxhQUFhLEVBQUU7TUFDakIsT0FBT0osR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0lBQzVDO0lBQ0EsT0FBT0gsUUFBUTtFQUNqQixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","__importDefault","require","public_1","services_1","app_response_1","default","post","addPatient","req","res","formData","body","data","buildResponse","get","status","json"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\patients\\","sources":["D:/My-projects/user-information/server/src/controller/patients/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\r\nimport routes from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport PatientService from \"./services\";\r\nimport BuildResponse from \"../../modules/response/app_response\";\r\n\r\nroutes.post(\r\n  `/admin/add-patient`,\r\n  asyncHandler(async function addPatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.addPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AAEA,MAAAE,UAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,cAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEAC,QAAA,CAAAG,OAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,UAAUA,CAACC,GAAY,EAAEC,GAAa;;IAChE,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMT,UAAA,CAAAE,OAAc,CAACE,UAAU,CAACG,QAAQ,CAAC;IACtD,MAAMG,aAAa,GAAGT,cAAA,CAAAC,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7C,IAAIC,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;IACA,OAAOH,QAAQ;EACjB,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1722156938854},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nclass PatientService {\n  static addPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addPatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          formData\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.default = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlBhdGllbnRTZXJ2aWNlIiwiYWRkUGF0aWVudCIsImZvcm1EYXRhIiwiZGF0YSIsIm1lc3NhZ2UiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxccGF0aWVudHNcXCIsInNvdXJjZXMiOlsiRDovTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvcGF0aWVudHMvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWRkUGF0aWVudCB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi8uLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuXHJcbmNsYXNzIFBhdGllbnRTZXJ2aWNlIHtcclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGFkZFBhdGllbnQoZm9ybURhdGE6IFBhdGllbnREVE8pIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhZGRQYXRpZW50KGZvcm1EYXRhKTtcclxuICAgIGlmIChkYXRhKSB7XHJcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZm9ybURhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGF0aWVudFNlcnZpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBR0EsTUFBTUMsY0FBYztFQUNYLE9BQWFDLFVBQVVBLENBQUNDLFFBQW9COztNQUNqRCxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFBTCxJQUFBLENBQUFHLFVBQVUsRUFBQ0MsUUFBUSxDQUFDO01BQ3ZDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUY7UUFBUSxDQUFFO01BQ3BDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7O0FBR0hHLE9BQUEsQ0FBQUMsT0FBQSxHQUFlTixjQUFjIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["db_1","require","PatientService","addPatient","formData","data","message","exports","default"],"sourceRoot":"D:\\My-projects\\user-information\\server\\src\\controller\\patients\\","sources":["D:/My-projects/user-information/server/src/controller/patients/services.ts"],"sourcesContent":["import { addPatient } from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\n\r\nclass PatientService {\r\n  public static async addPatient(formData: PatientDTO) {\r\n    const data = await addPatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", formData };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default PatientService"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAGA,MAAMC,cAAc;EACX,OAAaC,UAAUA,CAACC,QAAoB;;MACjD,MAAMC,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAG,UAAU,EAACC,QAAQ,CAAC;MACvC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAEF;QAAQ,CAAE;MACpC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGHG,OAAA,CAAAC,OAAA,GAAeN,cAAc","ignoreList":[]}},"mtime":1722156938856},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\app.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable no-unused-vars */\nconst hpp_1 = __importDefault(require(\"hpp\"));\nconst cors_1 = __importDefault(require(\"cors\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst helmet_1 = __importDefault(require(\"helmet\"));\nconst request_ip_1 = __importDefault(require(\"request-ip\"));\nconst compression_1 = __importDefault(require(\"compression\"));\nconst http_errors_1 = __importDefault(require(\"http-errors\"));\nconst cookie_parser_1 = __importDefault(require(\"cookie-parser\"));\nconst index_1 = __importDefault(require(\"./routes/index\"));\nconst express_useragent_1 = __importDefault(require(\"express-useragent\"));\nconst express_error_yup_1 = __importDefault(require(\"./middlewares/express_error_yup\"));\nconst express_1 = __importDefault(require(\"express\"));\nconst constants_allowed_orginal_1 = __importDefault(require(\"./constants/constants_allowed_orginal\"));\nconst express_error_response_1 = __importDefault(require(\"./middlewares/express_error_response\"));\nconst express_error_sequelize_1 = __importDefault(require(\"./middlewares/express_error_sequelize\"));\nconst express_auto_handle_transaction_1 = __importDefault(require(\"./middlewares/express_auto_handle_transaction\"));\n// TODO: change to .ts\nconst optCors = {\n  origin: constants_allowed_orginal_1.default\n};\nconst app = (0, express_1.default)();\n// view engine setup\napp.set('views', path_1.default.join(`${__dirname}/../`, 'views'));\n// app.set('view engine', 'pug')\napp.use((0, helmet_1.default)());\napp.use((0, cors_1.default)(optCors));\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express_1.default.urlencoded({\n  extended: false\n})); // TODO :  check it should be false or true\napp.use(express_1.default.json({\n  limit: '200mb',\n  type: 'application/json'\n}));\napp.use((0, cookie_parser_1.default)());\napp.use((0, compression_1.default)());\napp.use(express_1.default.static(path_1.default.join(`${__dirname}/../`, 'public')));\napp.use((0, hpp_1.default)());\napp.use(express_useragent_1.default.express());\napp.use(request_ip_1.default.mw());\n// TODO : add this later\n// Initial Route\napp.use(index_1.default);\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', express_error_yup_1.default);\napp.use('/v1', express_error_sequelize_1.default);\napp.use('/v1', express_error_response_1.default);\napp.use(express_auto_handle_transaction_1.default);\n// catch 404 and forward to error handler\napp.use(function (req, res, next) {\n  next((0, http_errors_1.default)(404));\n});\n// error handler\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJocHBfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJjb3JzXzEiLCJwYXRoXzEiLCJoZWxtZXRfMSIsInJlcXVlc3RfaXBfMSIsImNvbXByZXNzaW9uXzEiLCJodHRwX2Vycm9yc18xIiwiY29va2llX3BhcnNlcl8xIiwiaW5kZXhfMSIsImV4cHJlc3NfdXNlcmFnZW50XzEiLCJleHByZXNzX2Vycm9yX3l1cF8xIiwiZXhwcmVzc18xIiwiY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbF8xIiwiZXhwcmVzc19lcnJvcl9yZXNwb25zZV8xIiwiZXhwcmVzc19lcnJvcl9zZXF1ZWxpemVfMSIsImV4cHJlc3NfYXV0b19oYW5kbGVfdHJhbnNhY3Rpb25fMSIsIm9wdENvcnMiLCJvcmlnaW4iLCJkZWZhdWx0IiwiYXBwIiwic2V0Iiwiam9pbiIsIl9fZGlybmFtZSIsInVzZSIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsImpzb24iLCJsaW1pdCIsInR5cGUiLCJzdGF0aWMiLCJleHByZXNzIiwibXciLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIiwibG9jYWxzIiwibWVzc2FnZSIsImVycm9yIiwiZ2V0Iiwic3RhdHVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2FwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuaW1wb3J0IGhwcCBmcm9tICdocHAnO1xuaW1wb3J0IGNvcnMgZnJvbSAnY29ycyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBoZWxtZXQgZnJvbSAnaGVsbWV0JztcbmltcG9ydCByZXF1ZXN0SXAgZnJvbSAncmVxdWVzdC1pcCc7XG5pbXBvcnQgY29tcHJlc3Npb24gZnJvbSAnY29tcHJlc3Npb24nO1xuaW1wb3J0IGNyZWF0ZUVycm9yIGZyb20gJ2h0dHAtZXJyb3JzJztcbmltcG9ydCBjb29raWVQYXJzZXIgZnJvbSAnY29va2llLXBhcnNlcic7XG5pbXBvcnQgaW5kZXhSb3V0ZXIgZnJvbSAnLi9yb3V0ZXMvaW5kZXgnO1xuaW1wb3J0IHVzZXJBZ2VudCBmcm9tICdleHByZXNzLXVzZXJhZ2VudCc7XG5pbXBvcnQgRXhwcmVzc0Vycm9yWXVwIGZyb20gJy4vbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl95dXAnO1xuaW1wb3J0IGV4cHJlc3MsIHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGFsbG93ZWRPcmlnaW5zIGZyb20gJy4vY29uc3RhbnRzL2NvbnN0YW50c19hbGxvd2VkX29yZ2luYWwnO1xuaW1wb3J0IEV4cHJlc3NFcnJvclJlc3BvbnNlIGZyb20gJy4vbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9yZXNwb25zZSc7XG5pbXBvcnQgRXhwcmVzc0Vycm9yU2VxdWVsaXplIGZyb20gJy4vbWlkZGxld2FyZXMvZXhwcmVzc19lcnJvcl9zZXF1ZWxpemUnO1xuaW1wb3J0IEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb24gZnJvbSAnLi9taWRkbGV3YXJlcy9leHByZXNzX2F1dG9faGFuZGxlX3RyYW5zYWN0aW9uJztcblxuLy8gVE9ETzogY2hhbmdlIHRvIC50c1xuY29uc3Qgb3B0Q29yczogY29ycy5Db3JzT3B0aW9ucyA9IHtcbiAgb3JpZ2luOiBhbGxvd2VkT3JpZ2lucyxcbn1cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKVxuXG4vLyB2aWV3IGVuZ2luZSBzZXR1cFxuYXBwLnNldCgndmlld3MnLCBwYXRoLmpvaW4oYCR7X19kaXJuYW1lfS8uLi9gLCAndmlld3MnKSlcbi8vIGFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ3B1ZycpXG5cbmFwcC51c2UoaGVsbWV0KCkpXG5hcHAudXNlKGNvcnMob3B0Q29ycykpXG4vLyBhcHAudXNlKGxvZ2dlcignY29tYmluZWQnLCB7IHN0cmVhbTogd2luc3RvblN0cmVhbSB9KSlcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKSAvLyBUT0RPIDogIGNoZWNrIGl0IHNob3VsZCBiZSBmYWxzZSBvciB0cnVlXG5hcHAudXNlKFxuICBleHByZXNzLmpzb24oe1xuICAgIGxpbWl0OiAnMjAwbWInLFxuICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgfSlcbilcbmFwcC51c2UoY29va2llUGFyc2VyKCkpXG5hcHAudXNlKGNvbXByZXNzaW9uKCkpXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihgJHtfX2Rpcm5hbWV9Ly4uL2AsICdwdWJsaWMnKSkpXG5hcHAudXNlKGhwcCgpKVxuYXBwLnVzZSh1c2VyQWdlbnQuZXhwcmVzcygpKVxuYXBwLnVzZShyZXF1ZXN0SXAubXcoKSlcbi8vIFRPRE8gOiBhZGQgdGhpcyBsYXRlclxuXG5cbi8vIEluaXRpYWwgUm91dGVcbmFwcC51c2UoaW5kZXhSb3V0ZXIpXG5cbi8vIGFwcC51c2UoJy92MScsIGhhbmRsZVJvbGxiYWNrVHJhbnNhY3Rpb24pXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JZdXApXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JTZXF1ZWxpemUpXG5hcHAudXNlKCcvdjEnLCBFeHByZXNzRXJyb3JSZXNwb25zZSlcbmFwcC51c2UoRXhwcmVzc0F1dG9IYW5kbGVUcmFuc2FjdGlvbilcblxuLy8gY2F0Y2ggNDA0IGFuZCBmb3J3YXJkIHRvIGVycm9yIGhhbmRsZXJcbmFwcC51c2UoZnVuY3Rpb24gKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogTmV4dEZ1bmN0aW9uKSB7XG4gIG5leHQoY3JlYXRlRXJyb3IoNDA0KSlcbn0pXG5cbi8vIGVycm9yIGhhbmRsZXJcbmFwcC51c2UoZnVuY3Rpb24gKGVycjogYW55LCByZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UsIG5leHQ6IE5leHRGdW5jdGlvbikge1xuICAvLyBzZXQgbG9jYWxzLCBvbmx5IHByb3ZpZGluZyBlcnJvciBpbiBkZXZlbG9wbWVudFxuICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZVxuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge31cblxuICAvLyByZW5kZXIgdGhlIGVycm9yIHBhZ2VcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCk7XG4gIHJlcy5qc29uKHtcbiAgICBtZXNzYWdlOiBlcnIubWVzc2FnZSxcbiAgICBlcnJvcjogZXJyXG4gIH0pO1xufSlcblxubW9kdWxlLmV4cG9ydHMgPSBhcHBcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0EsTUFBQUEsS0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxNQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLE1BQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxZQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFLLGFBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQU0sYUFBQSxHQUFBUCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBTyxlQUFBLEdBQUFSLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFRLE9BQUEsR0FBQVQsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQVMsbUJBQUEsR0FBQVYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQVUsbUJBQUEsR0FBQVgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQVcsU0FBQSxHQUFBWixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBWSwyQkFBQSxH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","map":{"version":3,"names":["hpp_1","__importDefault","require","cors_1","path_1","helmet_1","request_ip_1","compression_1","http_errors_1","cookie_parser_1","index_1","express_useragent_1","express_error_yup_1","express_1","constants_allowed_orginal_1","express_error_response_1","express_error_sequelize_1","express_auto_handle_transaction_1","optCors","origin","default","app","set","join","__dirname","use","urlencoded","extended","json","limit","type","static","express","mw","req","res","next","err","locals","message","error","get","status","module","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\","sources":["D:/Personal/My-projects/user-information/server/src/app.ts"],"sourcesContent":["/* eslint-disable no-unused-vars */\nimport hpp from 'hpp';\nimport cors from 'cors';\nimport path from 'path';\nimport helmet from 'helmet';\nimport requestIp from 'request-ip';\nimport compression from 'compression';\nimport createError from 'http-errors';\nimport cookieParser from 'cookie-parser';\nimport indexRouter from './routes/index';\nimport userAgent from 'express-useragent';\nimport ExpressErrorYup from './middlewares/express_error_yup';\nimport express, { NextFunction, Request, Response } from 'express';\nimport allowedOrigins from './constants/constants_allowed_orginal';\nimport ExpressErrorResponse from './middlewares/express_error_response';\nimport ExpressErrorSequelize from './middlewares/express_error_sequelize';\nimport ExpressAutoHandleTransaction from './middlewares/express_auto_handle_transaction';\n\n// TODO: change to .ts\nconst optCors: cors.CorsOptions = {\n  origin: allowedOrigins,\n}\nconst app = express()\n\n// view engine setup\napp.set('views', path.join(`${__dirname}/../`, 'views'))\n// app.set('view engine', 'pug')\n\napp.use(helmet())\napp.use(cors(optCors))\n// app.use(logger('combined', { stream: winstonStream }))\napp.use(express.urlencoded({ extended: false })) // TODO :  check it should be false or true\napp.use(\n  express.json({\n    limit: '200mb',\n    type: 'application/json',\n  })\n)\napp.use(cookieParser())\napp.use(compression())\napp.use(express.static(path.join(`${__dirname}/../`, 'public')))\napp.use(hpp())\napp.use(userAgent.express())\napp.use(requestIp.mw())\n// TODO : add this later\n\n\n// Initial Route\napp.use(indexRouter)\n\n// app.use('/v1', handleRollbackTransaction)\napp.use('/v1', ExpressErrorYup)\napp.use('/v1', ExpressErrorSequelize)\napp.use('/v1', ExpressErrorResponse)\napp.use(ExpressAutoHandleTransaction)\n\n// catch 404 and forward to error handler\napp.use(function (req: Request, res: Response, next: NextFunction) {\n  next(createError(404))\n})\n\n// error handler\napp.use(function (err: any, req: Request, res: Response, next: NextFunction) {\n  // set locals, only providing error in development\n  res.locals.message = err.message\n  res.locals.error = req.app.get('env') === 'development' ? err : {}\n\n  // render the error page\n  res.status(err.status || 500);\n  res.json({\n    message: err.message,\n    error: err\n  });\n})\n\nmodule.exports = app\n"],"mappings":"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","ignoreList":[]}},"mtime":1722387615981},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\index.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_1 = __importDefault(require(\"express\"));\nconst public_1 = __importDefault(require(\"./public\"));\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nconst router = express_1.default.Router();\n/* Home Page. */\nrouter.get('/', function (req, res, next) {\n  return res.send(`<h1>Welcome To BeED Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`);\n});\n/* Forbidden Page. */\nrouter.get('/v1', function (req, res, next) {\n  throw new response_error_1.default.Forbidden('forbidden, wrong access endpoint');\n});\n/* Declare Route */\nrouter.use('/v1', public_1.default);\nexports.default = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwicm91dGVyIiwiZGVmYXVsdCIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJzZW5kIiwiRm9yYmlkZGVuIiwidXNlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXHJvdXRlc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvcm91dGVzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBwdWJsaWNSb3V0ZSBmcm9tICcuL3B1YmxpYyc7XG5pbXBvcnQgUmVzcG9uc2VFcnJvciBmcm9tICcuLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLyogSG9tZSBQYWdlLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuXG4gICAgcmV0dXJuIHJlcy5zZW5kKGA8aDE+V2VsY29tZSBUbyBCZUVEIFN1cHBvcnQgQ2VudGVyIHNlcnZlcjwvaDE+PGJyLz48YnIvPlxuICAgICAgICAgICAgICAgICAgICA8aDM+RmluZCBBcGkgZG9jcyBIZXJlIDo8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8aDM+PGE+L3YxL2FwaS1kb2NzPC9hPjwvaDM+YClcbiAgfSlcblxuLyogRm9yYmlkZGVuIFBhZ2UuICovXG5yb3V0ZXIuZ2V0KCcvdjEnLCBmdW5jdGlvbiAocmVxLCByZXMsIG5leHQgKSB7XG4gICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuRm9yYmlkZGVuKCdmb3JiaWRkZW4sIHdyb25nIGFjY2VzcyBlbmRwb2ludCcpXG4gIH0pXG5cbi8qIERlY2xhcmUgUm91dGUgKi9cbnJvdXRlci51c2UoJy92MScsIHB1YmxpY1JvdXRlKVxuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXJcblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsU0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLGdCQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1HLE1BQU0sR0FBR0wsU0FBQSxDQUFBTSxPQUFPLENBQUNDLE1BQU0sRUFBRTtBQUUvQjtBQUNBRixNQUFNLENBQUNHLEdBQUcsQ0FBQyxHQUFHLEVBQUUsVUFBVUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUk7RUFFcEMsT0FBT0QsR0FBRyxDQUFDRSxJQUFJLENBQUM7O2lEQUU2QixDQUFDO0FBQ2hELENBQUMsQ0FBQztBQUVKO0FBQ0FQLE1BQU0sQ0FBQ0csR0FBRyxDQUFDLEtBQUssRUFBRSxVQUFVQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSTtFQUN0QyxNQUFNLElBQUlQLGdCQUFBLENBQUFFLE9BQWEsQ0FBQ08sU0FBUyxDQUFDLGtDQUFrQyxDQUFDO0FBQ3ZFLENBQUMsQ0FBQztBQUVKO0FBQ0FSLE1BQU0sQ0FBQ1MsR0FBRyxDQUFDLEtBQUssRUFBRVgsUUFBQSxDQUFBRyxPQUFXLENBQUM7QUFFOUJTLE9BQUEsQ0FBQVQsT0FBQSxHQUFlRCxNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express_1","__importDefault","require","public_1","response_error_1","router","default","Router","get","req","res","next","send","Forbidden","use","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\routes\\","sources":["D:/Personal/My-projects/user-information/server/src/routes/index.ts"],"sourcesContent":["import  express from 'express';\nimport publicRoute from './public';\nimport ResponseError from '../modules/error/response_error';\n\nconst router = express.Router();\n\n/* Home Page. */\nrouter.get('/', function (req, res, next) {\n\n    return res.send(`<h1>Welcome To BeED Support Center server</h1><br/><br/>\n                    <h3>Find Api docs Here :</h3>\n                    <h3><a>/v1/api-docs</a></h3>`)\n  })\n\n/* Forbidden Page. */\nrouter.get('/v1', function (req, res, next ) {\n    throw new ResponseError.Forbidden('forbidden, wrong access endpoint')\n  })\n\n/* Declare Route */\nrouter.use('/v1', publicRoute)\n\nexport default router\n\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,gBAAA,GAAAH,eAAA,CAAAC,OAAA;AAEA,MAAMG,MAAM,GAAGL,SAAA,CAAAM,OAAO,CAACC,MAAM,EAAE;AAE/B;AACAF,MAAM,CAACG,GAAG,CAAC,GAAG,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EAEpC,OAAOD,GAAG,CAACE,IAAI,CAAC;;iDAE6B,CAAC;AAChD,CAAC,CAAC;AAEJ;AACAP,MAAM,CAACG,GAAG,CAAC,KAAK,EAAE,UAAUC,GAAG,EAAEC,GAAG,EAAEC,IAAI;EACtC,MAAM,IAAIP,gBAAA,CAAAE,OAAa,CAACO,SAAS,CAAC,kCAAkC,CAAC;AACvE,CAAC,CAAC;AAEJ;AACAR,MAAM,CAACS,GAAG,CAAC,KAAK,EAAEX,QAAA,CAAAG,OAAW,CAAC;AAE9BS,OAAA,CAAAT,OAAA,GAAeD,MAAM","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\routes\\\\public.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_1 = __importDefault(require(\"express\"));\nconst router = express_1.default.Router();\nexports.default = router;\n//  APIs\nrequire(\"../controller/auth/controller\");\nrequire(\"../controller/user/controller\");\nrequire(\"../controller/nav-items/controller\");\nrequire(\"../controller/appointment/controller\");\nrequire(\"../controller/admin/controller\");\nrequire(\"../controller/patients/controller\");\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicm91dGVyIiwiZGVmYXVsdCIsIlJvdXRlciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxyb3V0ZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL3JvdXRlcy9wdWJsaWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuXHJcbmNvbnN0IHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XHJcblxyXG4vLyAgQVBJc1xyXG5yZXF1aXJlKFwiLi4vY29udHJvbGxlci9hdXRoL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3VzZXIvY29udHJvbGxlclwiKTtcclxucmVxdWlyZShcIi4uL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FwcG9pbnRtZW50L2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL2FkbWluL2NvbnRyb2xsZXJcIik7XHJcbnJlcXVpcmUoXCIuLi9jb250cm9sbGVyL3BhdGllbnRzL2NvbnRyb2xsZXJcIik7XHJcblxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsU0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxNQUFNLEdBQUdILFNBQUEsQ0FBQUksT0FBTyxDQUFDQyxNQUFNLEVBQUU7QUFFL0JDLE9BQUEsQ0FBQUYsT0FBQSxHQUFlRCxNQUFNO0FBRXJCO0FBQ0FELE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUN4Q0EsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQ3hDQSxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFDN0NBLE9BQU8sQ0FBQyxzQ0FBc0MsQ0FBQztBQUMvQ0EsT0FBTyxDQUFDLGdDQUFnQyxDQUFDO0FBQ3pDQSxPQUFPLENBQUMsbUNBQW1DLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_1","__importDefault","require","router","default","Router","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\routes\\","sources":["D:/Personal/My-projects/user-information/server/src/routes/public.ts"],"sourcesContent":["import express from \"express\";\r\n\r\nconst router = express.Router();\r\n\r\nexport default router;\r\n\r\n//  APIs\r\nrequire(\"../controller/auth/controller\");\r\nrequire(\"../controller/user/controller\");\r\nrequire(\"../controller/nav-items/controller\");\r\nrequire(\"../controller/appointment/controller\");\r\nrequire(\"../controller/admin/controller\");\r\nrequire(\"../controller/patients/controller\");\r\n\r\n\r\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,SAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,MAAM,GAAGH,SAAA,CAAAI,OAAO,CAACC,MAAM,EAAE;AAE/BC,OAAA,CAAAF,OAAA,GAAeD,MAAM;AAErB;AACAD,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,+BAA+B,CAAC;AACxCA,OAAO,CAAC,oCAAoC,CAAC;AAC7CA,OAAO,CAAC,sCAAsC,CAAC;AAC/CA,OAAO,CAAC,gCAAgC,CAAC;AACzCA,OAAO,CAAC,mCAAmC,CAAC","ignoreList":[]}},"mtime":1722385965660},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = __importDefault(require(\"./service\"));\npublic_1.default.post(`/auth/sign-up`, function signUp(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.signUp(formData);\n    const buildResponse = app_response_1.default.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\npublic_1.default.post(\"/auth/sign-in\", function signIn(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.signIn(formData);\n    const buildResponse = yield app_response_1.default.get(data);\n    if (buildResponse.statusCode === 400) {\n      res.status(buildResponse.statusCode).json(buildResponse);\n    } else {\n      res.json(buildResponse);\n    }\n  });\n});\n// routes.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBfcmVzcG9uc2VfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsImRlZmF1bHQiLCJwb3N0Iiwic2lnblVwIiwicmVxIiwicmVzIiwiZm9ybURhdGEiLCJib2R5IiwiZGF0YSIsImJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJjb2RlIiwianNvbiIsInNpZ25JbiIsInN0YXR1c0NvZGUiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhdXRoXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL2F1dGgvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcbmltcG9ydCBBdXRoU2VydmljZSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5cbnJvdXRlcy5wb3N0KFxuICBgL2F1dGgvc2lnbi11cGAsXG4gIGFzeW5jIGZ1bmN0aW9uIHNpZ25VcChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBBdXRoU2VydmljZS5zaWduVXAoZm9ybURhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfVxuKTtcblxucm91dGVzLnBvc3QoXG4gIFwiL2F1dGgvc2lnbi1pblwiLFxuICBhc3luYyBmdW5jdGlvbiBzaWduSW4ocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgQXV0aFNlcnZpY2Uuc2lnbkluKGZvcm1EYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gNDAwKSB7XG4gICAgICByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2Uuc3RhdHVzQ29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfVxuICB9XG4pO1xuXG4vLyByb3V0ZXMucG9zdChcbi8vICAgYC9hdXRoL3JlZnJlc2gtdG9rZW5gLFxuLy8gICBBdXRob3JpemF0aW9uLFxuLy8gICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gYXV0aFJlZnJlc2hUb2tlbihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbi8vICAgICBjb25zdCB7IGVtYWlsLCByZWZyZXNoVG9rZW4gfSA9IHJlcS5ib2R5KCk7XG4vLyAgIH0pXG4vLyApO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsTUFBQUEsY0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxRQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLFNBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUFDLFFBQUEsQ0FBQUUsT0FBTSxDQUFDQyxJQUFJLENBQ1QsZUFBZSxFQUNmLFNBQWVDLE1BQU1BLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDL0MsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQUMsT0FBVyxDQUFDRSxNQUFNLENBQUNHLFFBQVEsQ0FBQztJQUMvQyxNQUFNRyxhQUFhLEdBQUdiLGNBQUEsQ0FBQUssT0FBYSxDQUFDUyxHQUFHLENBQUNGLElBQUksQ0FBQztJQUM3Q0gsR0FBRyxDQUFDTSxNQUFNLENBQUNGLGFBQWEsQ0FBQ0csSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0osYUFBYSxDQUFDO0VBQ3BELENBQUM7Q0FBQSxDQUNGO0FBRURWLFFBQUEsQ0FBQUUsT0FBTSxDQUFDQyxJQUFJLENBQ1QsZUFBZSxFQUNmLFNBQWVZLE1BQU1BLENBQUNWLEdBQVksRUFBRUMsR0FBYTs7SUFDL0MsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDekIsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQUMsT0FBVyxDQUFDYSxNQUFNLENBQUNSLFFBQVEsQ0FBQztJQUMvQyxNQUFNRyxhQUFhLEdBQUcsTUFBTWIsY0FBQSxDQUFBSyxPQUFhLENBQUNTLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDO0lBQ25ELElBQUlDLGFBQWEsQ0FBQ00sVUFBVSxLQUFLLEdBQUcsRUFBRTtNQUNwQ1YsR0FBRyxDQUFDTSxNQUFNLENBQUNGLGFBQWEsQ0FBQ00sVUFBVSxDQUFDLENBQUNGLElBQUksQ0FBQ0osYUFBYSxDQUFDO0lBQzFELENBQUMsTUFBTTtNQUNMSixHQUFHLENBQUNRLElBQUksQ0FBQ0osYUFBYSxDQUFDO0lBQ3pCO0VBQ0YsQ0FBQztDQUFBLENBQ0Y7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["app_response_1","__importDefault","require","public_1","service_1","default","post","signUp","req","res","formData","body","data","buildResponse","get","status","code","json","signIn","statusCode"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/auth/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport AuthService from \"./service\";\n\nroutes.post(\n  `/auth/sign-up`,\n  async function signUp(req: Request, res: Response) {\n    const formData = req.body;\n    const data = await AuthService.signUp(formData);\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n\nroutes.post(\n  \"/auth/sign-in\",\n  async function signIn(req: Request, res: Response) {\n    const formData = req.body;\n    const data = await AuthService.signIn(formData);\n    const buildResponse = await BuildResponse.get(data);\n    if (buildResponse.statusCode === 400) {\n      res.status(buildResponse.statusCode).json(buildResponse);\n    } else {\n      res.json(buildResponse);\n    }\n  }\n);\n\n// routes.post(\n//   `/auth/refresh-token`,\n//   Authorization,\n//   asyncHandler(async function authRefreshToken(req: Request, res: Response) {\n//     const { email, refreshToken } = req.body();\n//   })\n// );\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,cAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAH,eAAA,CAAAC,OAAA;AAEAC,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,eAAe,EACf,SAAeC,MAAMA,CAACC,GAAY,EAAEC,GAAa;;IAC/C,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAW,CAACE,MAAM,CAACG,QAAQ,CAAC;IAC/C,MAAMG,aAAa,GAAGb,cAAA,CAAAK,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7CH,GAAG,CAACM,MAAM,CAACF,aAAa,CAACG,IAAI,CAAC,CAACC,IAAI,CAACJ,aAAa,CAAC;EACpD,CAAC;CAAA,CACF;AAEDV,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,eAAe,EACf,SAAeY,MAAMA,CAACV,GAAY,EAAEC,GAAa;;IAC/C,MAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAW,CAACa,MAAM,CAACR,QAAQ,CAAC;IAC/C,MAAMG,aAAa,GAAG,MAAMb,cAAA,CAAAK,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IACnD,IAAIC,aAAa,CAACM,UAAU,KAAK,GAAG,EAAE;MACpCV,GAAG,CAACM,MAAM,CAACF,aAAa,CAACM,UAAU,CAAC,CAACF,IAAI,CAACJ,aAAa,CAAC;IAC1D,CAAC,MAAM;MACLJ,GAAG,CAACQ,IAAI,CAACJ,aAAa,CAAC;IACzB;EACF,CAAC;CAAA,CACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\response\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\response\\\\app_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass BuildResponse {\n  static baseResponse(dataResponse) {\n    const {\n        message = \"data has been received!\",\n        code = 200\n      } = dataResponse,\n      rest = __rest(dataResponse, [\"message\", \"code\"]);\n    return Object.assign({\n      code,\n      message\n    }, rest);\n  }\n  /**\n   * Response Success\n   */\n  static get(dataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n  /**\n   * Response Create\n   */\n  static created(dataResponse) {\n    return this.baseResponse(Object.assign({\n      codde: 201,\n      message: \"data has beed added\"\n    }, dataResponse));\n  }\n  /**\n   * Response Update\n   */\n  static updated(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"the data has beed updated\"\n    }, dataResponse));\n  }\n  /**\n   * Response Delete\n   */\n  static deleted(dataResponse) {\n    return this.baseResponse(Object.assign({\n      message: \"data has been deleted\"\n    }, dataResponse));\n  }\n  static appResponse(data) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null\n    };\n  }\n}\nexports.default = BuildResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdWlsZFJlc3BvbnNlIiwiYmFzZVJlc3BvbnNlIiwiZGF0YVJlc3BvbnNlIiwibWVzc2FnZSIsImNvZGUiLCJyZXN0IiwiX19yZXN0IiwiT2JqZWN0IiwiYXNzaWduIiwiZ2V0IiwiY3JlYXRlZCIsImNvZGRlIiwidXBkYXRlZCIsImRlbGV0ZWQiLCJhcHBSZXNwb25zZSIsImRhdGEiLCJzdGF0dXMiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImlzU3VjY2Vzc2Z1bGwiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXHJlc3BvbnNlXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSZXNwb25zZSB9IGZyb20gXCIuLi8uLi90eXBlcy9yZXNwb25zZS5pbnRlcmZhY2VcIjtcblxudHlwZSBEYXRhUmVzcG9uc2UgPVxuICB8IHtcbiAgICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICAgIGNvZGU/OiBudW1iZXI7XG4gICAgfVxuICB8IGFueTtcblxuY2xhc3MgQnVpbGRSZXNwb25zZSB7XG4gIHByaXZhdGUgc3RhdGljIGJhc2VSZXNwb25zZShkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIGNvbnN0IHtcbiAgICAgIG1lc3NhZ2UgPSBcImRhdGEgaGFzIGJlZW4gcmVjZWl2ZWQhXCIsXG4gICAgICBjb2RlID0gMjAwLFxuICAgICAgLi4ucmVzdFxuICAgIH0gPSBkYXRhUmVzcG9uc2U7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgLi4ucmVzdCxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIFN1Y2Nlc3NcbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyBnZXQoZGF0YVJlc3BvbnNlOiBEYXRhUmVzcG9uc2UpIHtcbiAgICByZXR1cm4gdGhpcy5iYXNlUmVzcG9uc2UoZGF0YVJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBDcmVhdGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBjb2RkZTogMjAxLFxuICAgICAgbWVzc2FnZTogXCJkYXRhIGhhcyBiZWVkIGFkZGVkXCIsXG4gICAgICAuLi5kYXRhUmVzcG9uc2UsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzcG9uc2UgVXBkYXRlXG4gICAqL1xuXG4gIHB1YmxpYyBzdGF0aWMgdXBkYXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcInRoZSBkYXRhIGhhcyBiZWVkIHVwZGF0ZWRcIixcbiAgICAgIC4uLmRhdGFSZXNwb25zZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNwb25zZSBEZWxldGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZGVsZXRlZChkYXRhUmVzcG9uc2U6IERhdGFSZXNwb25zZSkge1xuICAgIHJldHVybiB0aGlzLmJhc2VSZXNwb25zZSh7XG4gICAgICBtZXNzYWdlOiBcImRhdGEgaGFzIGJlZW4gZGVsZXRlZFwiLFxuICAgICAgLi4uZGF0YVJlc3BvbnNlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhcHBSZXNwb25zZShkYXRhOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29kZTogZGF0YS5jb2RlID8gZGF0YS5jb2RlIDogMjAwLFxuICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlID8gZGF0YS5tZXNzYWdlIDogXCJcIixcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgPyBkYXRhLnN0YXR1cyA6IDAsXG4gICAgICBzaG93VG9Vc2VyOiBkYXRhLnNob3dUb1VzZXIgPyBkYXRhLnNob3dUb1VzZXIgOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VDb2RlOiBkYXRhLm1lc3NhZ2VDb2RlID8gZGF0YS5tZXNzYWdlQ29kZSA6IFwiXCIsXG4gICAgICBtZXNzYWdlS2luZDogZGF0YS5tZXNzYWdlS2luZCA/IGRhdGEubWVzc2FnZUtpbmQgOiBudWxsLFxuICAgICAgaXNTdWNjZXNzZnVsbDogZGF0YS5pc1N1Y2Nlc3NmdWxsID8gZGF0YS5pc1N1Y2Nlc3NmdWxsIDogZmFsc2UsXG4gICAgICBkYXRhOiBkYXRhLmRhdGEgPyBkYXRhLmRhdGEgOiBudWxsLFxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQnVpbGRSZXNwb25zZTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQVNBLE1BQU1BLGFBQWE7RUFDVCxPQUFPQyxZQUFZQSxDQUFDQyxZQUEwQjtJQUNwRCxNQUFNO1FBQ0pDLE9BQU8sR0FBRyx5QkFBeUI7UUFDbkNDLElBQUksR0FBRztNQUFHLElBRVJGLFlBQVk7TUFEWEcsSUFBSSxHQUFBQyxNQUFBLENBQ0xKLFlBQVksRUFKVixtQkFJTCxDQUFlO0lBQ2hCLE9BQUFLLE1BQUEsQ0FBQUMsTUFBQTtNQUNFSixJQUFJO01BQ0pEO0lBQU8sR0FDSkUsSUFBSTtFQUVYO0VBRUE7OztFQUlPLE9BQU9JLEdBQUdBLENBQUNQLFlBQTBCO0lBQzFDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUNDLFlBQVksQ0FBQztFQUN4QztFQUVBOzs7RUFHTyxPQUFPUSxPQUFPQSxDQUFDUixZQUEwQjtJQUM5QyxPQUFPLElBQUksQ0FBQ0QsWUFBWSxDQUFBTSxNQUFBLENBQUFDLE1BQUE7TUFDdEJHLEtBQUssRUFBRSxHQUFHO01BQ1ZSLE9BQU8sRUFBRTtJQUFxQixHQUMzQkQsWUFBWSxFQUNmO0VBQ0o7RUFFQTs7O0VBSU8sT0FBT1UsT0FBT0EsQ0FBQ1YsWUFBMEI7SUFDOUMsT0FBTyxJQUFJLENBQUNELFlBQVksQ0FBQU0sTUFBQSxDQUFBQyxNQUFBO01BQ3RCTCxPQUFPLEVBQUU7SUFBMkIsR0FDakNELFlBQVksRUFDZjtFQUNKO0VBRUE7OztFQUdPLE9BQU9XLE9BQU9BLENBQUNYLFlBQTBCO0lBQzlDLE9BQU8sSUFBSSxDQUFDRCxZQUFZLENBQUFNLE1BQUEsQ0FBQUMsTUFBQTtNQUN0QkwsT0FBTyxFQUFFO0lBQXVCLEdBQzdCRCxZQUFZLEVBQ2Y7RUFDSjtFQUVPLE9BQU9ZLFdBQVdBLENBQUNDLElBQVM7SUFDakMsT0FBTztNQUNMWCxJQUFJLEVBQUVXLElBQUksQ0FBQ1gsSUFBSSxHQUFHVyxJQUFJLENBQUNYLElBQUksR0FBRyxHQUFHO01BQ2pDRCxPQUFPLEVBQUVZLElBQUksQ0FBQ1osT0FBTyxHQUFHWSxJQUFJLENBQUNaLE9BQU8sR0FBRyxFQUFFO01BQ3pDYSxNQUFNLEVBQUVELElBQUksQ0FBQ0MsTUFBTSxHQUFHRCxJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO01BQ3JDQyxVQUFVLEVBQUVGLElBQUksQ0FBQ0UsVUFBVSxHQUFHRixJQUFJLENBQUNFLFVBQVUsR0FBRyxLQUFLO01BQ3JEQyxXQUFXLEVBQUVILElBQUksQ0FBQ0csV0FBVyxHQUFHSCxJQUFJLENBQUNHLFdBQVcsR0FBRyxFQUFFO01BQ3JEQyxXQUFXLEVBQUVKLElBQUksQ0FBQ0ksV0FBVyxHQUFHSixJQUFJLENBQUNJLFdBQVcsR0FBRyxJQUFJO01BQ3ZEQyxhQUFhLEVBQUVMLElBQUksQ0FBQ0ssYUFBYSxHQUFHTCxJQUFJLENBQUNLLGFBQWEsR0FBRyxLQUFLO01BQzlETCxJQUFJLEVBQUVBLElBQUksQ0FBQ0EsSUFBSSxHQUFHQSxJQUFJLENBQUNBLElBQUksR0FBRztLQUNoQjtFQUNsQjs7QUFHRk0sT0FBQSxDQUFBQyxPQUFBLEdBQWV0QixhQUFhIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["BuildResponse","baseResponse","dataResponse","message","code","rest","__rest","Object","assign","get","created","codde","updated","deleted","appResponse","data","status","showToUser","messageCode","messageKind","isSuccessfull","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\response\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/response/app_response.ts"],"sourcesContent":["import { AppResponse } from \"../../types/response.interface\";\n\ntype DataResponse =\n  | {\n      message: string;\n      code?: number;\n    }\n  | any;\n\nclass BuildResponse {\n  private static baseResponse(dataResponse: DataResponse) {\n    const {\n      message = \"data has been received!\",\n      code = 200,\n      ...rest\n    } = dataResponse;\n    return {\n      code,\n      message,\n      ...rest,\n    };\n  }\n\n  /**\n   * Response Success\n   */\n\n  public static get(dataResponse: DataResponse) {\n    return this.baseResponse(dataResponse);\n  }\n\n  /**\n   * Response Create\n   */\n  public static created(dataResponse: DataResponse) {\n    return this.baseResponse({\n      codde: 201,\n      message: \"data has beed added\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Update\n   */\n\n  public static updated(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"the data has beed updated\",\n      ...dataResponse,\n    });\n  }\n\n  /**\n   * Response Delete\n   */\n  public static deleted(dataResponse: DataResponse) {\n    return this.baseResponse({\n      message: \"data has been deleted\",\n      ...dataResponse,\n    });\n  }\n\n  public static appResponse(data: any) {\n    return {\n      code: data.code ? data.code : 200,\n      message: data.message ? data.message : \"\",\n      status: data.status ? data.status : 0,\n      showToUser: data.showToUser ? data.showToUser : false,\n      messageCode: data.messageCode ? data.messageCode : \"\",\n      messageKind: data.messageKind ? data.messageKind : null,\n      isSuccessfull: data.isSuccessfull ? data.isSuccessfull : false,\n      data: data.data ? data.data : null,\n    } as AppResponse;\n  }\n}\n\nexport default BuildResponse;\n"],"mappings":";;;;;;;;;;;;;AASA,MAAMA,aAAa;EACT,OAAOC,YAAYA,CAACC,YAA0B;IACpD,MAAM;QACJC,OAAO,GAAG,yBAAyB;QACnCC,IAAI,GAAG;MAAG,IAERF,YAAY;MADXG,IAAI,GAAAC,MAAA,CACLJ,YAAY,EAJV,mBAIL,CAAe;IAChB,OAAAK,MAAA,CAAAC,MAAA;MACEJ,IAAI;MACJD;IAAO,GACJE,IAAI;EAEX;EAEA;;;EAIO,OAAOI,GAAGA,CAACP,YAA0B;IAC1C,OAAO,IAAI,CAACD,YAAY,CAACC,YAAY,CAAC;EACxC;EAEA;;;EAGO,OAAOQ,OAAOA,CAACR,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBG,KAAK,EAAE,GAAG;MACVR,OAAO,EAAE;IAAqB,GAC3BD,YAAY,EACf;EACJ;EAEA;;;EAIO,OAAOU,OAAOA,CAACV,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAA2B,GACjCD,YAAY,EACf;EACJ;EAEA;;;EAGO,OAAOW,OAAOA,CAACX,YAA0B;IAC9C,OAAO,IAAI,CAACD,YAAY,CAAAM,MAAA,CAAAC,MAAA;MACtBL,OAAO,EAAE;IAAuB,GAC7BD,YAAY,EACf;EACJ;EAEO,OAAOY,WAAWA,CAACC,IAAS;IACjC,OAAO;MACLX,IAAI,EAAEW,IAAI,CAACX,IAAI,GAAGW,IAAI,CAACX,IAAI,GAAG,GAAG;MACjCD,OAAO,EAAEY,IAAI,CAACZ,OAAO,GAAGY,IAAI,CAACZ,OAAO,GAAG,EAAE;MACzCa,MAAM,EAAED,IAAI,CAACC,MAAM,GAAGD,IAAI,CAACC,MAAM,GAAG,CAAC;MACrCC,UAAU,EAAEF,IAAI,CAACE,UAAU,GAAGF,IAAI,CAACE,UAAU,GAAG,KAAK;MACrDC,WAAW,EAAEH,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACG,WAAW,GAAG,EAAE;MACrDC,WAAW,EAAEJ,IAAI,CAACI,WAAW,GAAGJ,IAAI,CAACI,WAAW,GAAG,IAAI;MACvDC,aAAa,EAAEL,IAAI,CAACK,aAAa,GAAGL,IAAI,CAACK,aAAa,GAAG,KAAK;MAC9DL,IAAI,EAAEA,IAAI,CAACA,IAAI,GAAGA,IAAI,CAACA,IAAI,GAAG;KAChB;EAClB;;AAGFM,OAAA,CAAAC,OAAA,GAAetB,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst db_1 = require(\"../../bin/db\");\nconst common_1 = require(\"../../helper/common\");\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst use_validation_1 = __importDefault(require(\"../../helper/use_validation\"));\nconst response_error_1 = __importDefault(require(\"../../modules/error/response_error\"));\nconst schema_1 = __importDefault(require(\"./schema\"));\nconst sercvice_1 = __importDefault(require(\"../user/sercvice\"));\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED = process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass AuthService {\n  static signUp(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const currentUser = yield sercvice_1.default.validateUserEmail(formData.email);\n      if (currentUser) {\n        return {\n          message: \"the user already exist !\",\n          code: 400,\n          currentUser\n        };\n      }\n      // const getNickName = await UserService.checkNickName(formData.email);\n      // if (getNickName === formData.email) {\n      //   return {\n      //     message: \"the nickname is already exist!\",\n      //     code: 400,\n      //     getNickName,\n      //   };\n      // }\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      formData.verify_code = (0, common_1.getUniqueCodev3)();\n      formData.tokenVerify = tokenVerify;\n      (0, use_validation_1.default)(schema_1.default.register, formData);\n      const newUserId = yield (0, db_1.createUser)(formData);\n      if (!newUserId) throw new response_error_1.default.BadRequest(\"Cannot add user in the database !\");\n      send_email_1.default.AccountRegister(formData);\n      return {\n        message: null,\n        newUser: {\n          user_id: newUserId,\n          email: formData.email\n        }\n      };\n    });\n  }\n  static signIn(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        const checkValidation = (0, use_validation_1.default)(schema_1.default.login, formData);\n        const userData = yield (0, db_1.getUserByPassword)(checkValidation.email, checkValidation.password);\n        if (!userData) {\n          throw new response_error_1.default.BadRequest(\"account not found or has been deleted\");\n        } else if (userData.emailConfirmed === 0) {\n          throw new response_error_1.default.BadRequest(\"email is not confirm\");\n        }\n        const comparePassword = true;\n        if (comparePassword) {\n          const payloadToken = {\n            user_id: userData === null || userData === void 0 ? void 0 : userData.user_id,\n            email: userData === null || userData === void 0 ? void 0 : userData.email,\n            firstName: userData.firstName,\n            lastName: userData.lastName\n          };\n          return {\n            message: \"Login successfully\",\n            token_type: \"Bearer\",\n            payloadToken: payloadToken\n          };\n        } else {\n          throw new response_error_1.default.Unauthorized(\"Invalid password\");\n        }\n      } catch (error) {\n        console.error(\"Error during sign-in\", error);\n        return error;\n      }\n    });\n  }\n}\nexports.default = AuthService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqc29ud2VidG9rZW5fMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJtc18xIiwiZGJfMSIsImNvbW1vbl8xIiwic2VuZF9lbWFpbF8xIiwidXNlX3ZhbGlkYXRpb25fMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJzY2hlbWFfMSIsInNlcmN2aWNlXzEiLCJKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiIsIkpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQiLCJKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIkF1dGhTZXJ2aWNlIiwic2lnblVwIiwiZm9ybURhdGEiLCJjdXJyZW50VXNlciIsInZhbGlkYXRlVXNlckVtYWlsIiwiZW1haWwiLCJtZXNzYWdlIiwiY29kZSIsImdlbmVyYXRlVG9rZW4iLCJnZXRVbmlxdWVDb2RldjIiLCJ0b2tlblZlcmlmeSIsInNpZ24iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJ2ZXJpZnlfY29kZSIsImdldFVuaXF1ZUNvZGV2MyIsInJlZ2lzdGVyIiwibmV3VXNlcklkIiwiY3JlYXRlVXNlciIsIkJhZFJlcXVlc3QiLCJBY2NvdW50UmVnaXN0ZXIiLCJuZXdVc2VyIiwidXNlcl9pZCIsInNpZ25JbiIsImNoZWNrVmFsaWRhdGlvbiIsImxvZ2luIiwidXNlckRhdGEiLCJnZXRVc2VyQnlQYXNzd29yZCIsInBhc3N3b3JkIiwiZW1haWxDb25maXJtZWQiLCJjb21wYXJlUGFzc3dvcmQiLCJwYXlsb2FkVG9rZW4iLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInRva2VuX3R5cGUiLCJVbmF1dGhvcml6ZWQiLCJlcnJvciIsImNvbnNvbGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXV0aFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hdXRoL3NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgbXMgZnJvbSBcIm1zXCI7XG5pbXBvcnQgeyBjcmVhdGVVc2VyLCBnZXRVc2VyQnlQYXNzd29yZCB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MiwgZ2V0VW5pcXVlQ29kZXYzIH0gZnJvbSBcIi4uLy4uL2hlbHBlci9jb21tb25cIjtcbmltcG9ydCBTZW5kTWFpbCBmcm9tIFwiLi4vLi4vaGVscGVyL3NlbmRfZW1haWxcIjtcbmltcG9ydCB1c2VWYWxpZGF0aW9uIGZyb20gXCIuLi8uLi9oZWxwZXIvdXNlX3ZhbGlkYXRpb25cIjtcbmltcG9ydCBSZXNwb25zZUVycm9yIGZyb20gXCIuLi8uLi9tb2R1bGVzL2Vycm9yL3Jlc3BvbnNlX2Vycm9yXCI7XG5pbXBvcnQgeyBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcbmltcG9ydCBzY2hlbWFBdXRoIGZyb20gXCIuL3NjaGVtYVwiO1xuaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gXCIuLi91c2VyL3NlcmN2aWNlXCI7XG5cbmNvbnN0IHsgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sIEpXVF9TRUNSRVRfUkVGUkVTSF9UT0tFTiB9OiBhbnkgPSBwcm9jZXNzLmVudjtcblxuY29uc3QgSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEID0gcHJvY2Vzcy5lbnYuSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIHx8IFwiMWRcIjsgLy8gMSBEYXlzXG5jb25zdCBKV1RfUkVGUkVTSF9UT0tFTl9FWFBJUkVEID1cbiAgcHJvY2Vzcy5lbnYuSldUX1JFRlJFU0hfVE9LRU5fRVhQSVJFRCB8fCBcIjMwZFwiOyAvLyAzMCBEYXlzXG5cbmNvbnN0IGV4cGlyZXNJbiA9IG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwO1xuXG5jbGFzcyBBdXRoU2VydmljZSB7XG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2lnblVwKGZvcm1EYXRhOiBDcmVhdGVVc2VyKSB7XG4gICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS52YWxpZGF0ZVVzZXJFbWFpbChmb3JtRGF0YS5lbWFpbCk7XG4gICAgaWYgKGN1cnJlbnRVc2VyKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcInRoZSB1c2VyIGFscmVhZHkgZXhpc3QgIVwiLCBjb2RlOiA0MDAsIGN1cnJlbnRVc2VyIH07XG4gICAgfVxuXG4gICAgLy8gY29uc3QgZ2V0Tmlja05hbWUgPSBhd2FpdCBVc2VyU2VydmljZS5jaGVja05pY2tOYW1lKGZvcm1EYXRhLmVtYWlsKTtcbiAgICAvLyBpZiAoZ2V0Tmlja05hbWUgPT09IGZvcm1EYXRhLmVtYWlsKSB7XG4gICAgLy8gICByZXR1cm4ge1xuICAgIC8vICAgICBtZXNzYWdlOiBcInRoZSBuaWNrbmFtZSBpcyBhbHJlYWR5IGV4aXN0IVwiLFxuICAgIC8vICAgICBjb2RlOiA0MDAsXG4gICAgLy8gICAgIGdldE5pY2tOYW1lLFxuICAgIC8vICAgfTtcbiAgICAvLyB9XG4gICAgY29uc3QgZ2VuZXJhdGVUb2tlbiA9IHtcbiAgICAgIGNvZGU6IGdldFVuaXF1ZUNvZGV2MigpLFxuICAgIH07XG4gICAgY29uc3QgdG9rZW5WZXJpZnkgPSBqd3Quc2lnbihcbiAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZ2VuZXJhdGVUb2tlbikpLFxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXG4gICAgICB7XG4gICAgICAgIGV4cGlyZXNJbixcbiAgICAgIH1cbiAgICApO1xuXG4gICAgZm9ybURhdGEudmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcbiAgICBmb3JtRGF0YS50b2tlblZlcmlmeSA9IHRva2VuVmVyaWZ5O1xuICAgIHVzZVZhbGlkYXRpb24oc2NoZW1hQXV0aC5yZWdpc3RlciwgZm9ybURhdGEpO1xuICAgIGNvbnN0IG5ld1VzZXJJZCA9IGF3YWl0IGNyZWF0ZVVzZXIoZm9ybURhdGEpO1xuICAgIGlmICghbmV3VXNlcklkKVxuICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcIkNhbm5vdCBhZGQgdXNlciBpbiB0aGUgZGF0YWJhc2UgIVwiKTtcbiAgICBTZW5kTWFpbC5BY2NvdW50UmVnaXN0ZXIoZm9ybURhdGEpO1xuICAgIHJldHVybiB7XG4gICAgICBtZXNzYWdlOiBudWxsLFxuICAgICAgbmV3VXNlcjoge1xuICAgICAgICB1c2VyX2lkOiBuZXdVc2VySWQsXG4gICAgICAgIGVtYWlsOiBmb3JtRGF0YS5lbWFpbCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgc2lnbkluKGZvcm1EYXRhOiBVc2VyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNoZWNrVmFsaWRhdGlvbiA9IHVzZVZhbGlkYXRpb24oc2NoZW1hQXV0aC5sb2dpbiwgZm9ybURhdGEpO1xuXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IGdldFVzZXJCeVBhc3N3b3JkKFxuICAgICAgICBjaGVja1ZhbGlkYXRpb24uZW1haWwsXG4gICAgICAgIGNoZWNrVmFsaWRhdGlvbi5wYXNzd29yZFxuICAgICAgKTtcbiAgICAgIGlmICghdXNlckRhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IFJlc3BvbnNlRXJyb3IuQmFkUmVxdWVzdChcbiAgICAgICAgICBcImFjY291bnQgbm90IGZvdW5kIG9yIGhhcyBiZWVuIGRlbGV0ZWRcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICh1c2VyRGF0YS5lbWFpbENvbmZpcm1lZCA9PT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiZW1haWwgaXMgbm90IGNvbmZpcm1cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbXBhcmVQYXNzd29yZCA9IHRydWU7XG4gICAgICBpZiAoY29tcGFyZVBhc3N3b3JkKSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWRUb2tlbiA9IHtcbiAgICAgICAgICB1c2VyX2lkOiB1c2VyRGF0YT8udXNlcl9pZCxcbiAgICAgICAgICBlbWFpbDogdXNlckRhdGE/LmVtYWlsLFxuICAgICAgICAgIGZpcnN0TmFtZTogdXNlckRhdGEuZmlyc3ROYW1lLFxuICAgICAgICAgIGxhc3ROYW1lOiB1c2VyRGF0YS5sYXN0TmFtZSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTG9naW4gc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICAgICAgdG9rZW5fdHlwZTogXCJCZWFyZXJcIixcbiAgICAgICAgICBwYXlsb2FkVG9rZW46IHBheWxvYWRUb2tlbixcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLlVuYXV0aG9yaXplZChcIkludmFsaWQgcGFzc3dvcmRcIik7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgc2lnbi1pblwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gZXJyb3I7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsY0FBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxJQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLElBQUEsR0FBQUYsT0FBQTtBQUNBLE1BQUFHLFFBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLFlBQUEs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","map":{"version":3,"names":["jsonwebtoken_1","__importDefault","require","ms_1","db_1","common_1","send_email_1","use_validation_1","response_error_1","schema_1","sercvice_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","JWT_REFRESH_TOKEN_EXPIRED","expiresIn","default","AuthService","signUp","formData","currentUser","validateUserEmail","email","message","code","generateToken","getUniqueCodev2","tokenVerify","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","register","newUserId","createUser","BadRequest","AccountRegister","newUser","user_id","signIn","checkValidation","login","userData","getUserByPassword","password","emailConfirmed","comparePassword","payloadToken","firstName","lastName","token_type","Unauthorized","error","console","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/auth/service.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\";\nimport ms from \"ms\";\nimport { createUser, getUserByPassword } from \"../../bin/db\";\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\nimport SendMail from \"../../helper/send_email\";\nimport useValidation from \"../../helper/use_validation\";\nimport ResponseError from \"../../modules/error/response_error\";\nimport { CreateUser, User } from \"../../types/user\";\nimport schemaAuth from \"./schema\";\nimport UserService from \"../user/sercvice\";\n\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\n\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst JWT_REFRESH_TOKEN_EXPIRED =\n  process.env.JWT_REFRESH_TOKEN_EXPIRED || \"30d\"; // 30 Days\n\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\n\nclass AuthService {\n  public static async signUp(formData: CreateUser) {\n    const currentUser = await UserService.validateUserEmail(formData.email);\n    if (currentUser) {\n      return { message: \"the user already exist !\", code: 400, currentUser };\n    }\n\n    // const getNickName = await UserService.checkNickName(formData.email);\n    // if (getNickName === formData.email) {\n    //   return {\n    //     message: \"the nickname is already exist!\",\n    //     code: 400,\n    //     getNickName,\n    //   };\n    // }\n    const generateToken = {\n      code: getUniqueCodev2(),\n    };\n    const tokenVerify = jwt.sign(\n      JSON.parse(JSON.stringify(generateToken)),\n      JWT_SECRET_ACCESS_TOKEN,\n      {\n        expiresIn,\n      }\n    );\n\n    formData.verify_code = getUniqueCodev3();\n    formData.tokenVerify = tokenVerify;\n    useValidation(schemaAuth.register, formData);\n    const newUserId = await createUser(formData);\n    if (!newUserId)\n      throw new ResponseError.BadRequest(\"Cannot add user in the database !\");\n    SendMail.AccountRegister(formData);\n    return {\n      message: null,\n      newUser: {\n        user_id: newUserId,\n        email: formData.email,\n      },\n    };\n  }\n\n  public static async signIn(formData: User) {\n    try {\n      const checkValidation = useValidation(schemaAuth.login, formData);\n\n      const userData = await getUserByPassword(\n        checkValidation.email,\n        checkValidation.password\n      );\n      if (!userData) {\n        throw new ResponseError.BadRequest(\n          \"account not found or has been deleted\"\n        );\n      } else if (userData.emailConfirmed === 0) {\n        throw new ResponseError.BadRequest(\"email is not confirm\");\n      }\n\n      const comparePassword = true;\n      if (comparePassword) {\n        const payloadToken = {\n          user_id: userData?.user_id,\n          email: userData?.email,\n          firstName: userData.firstName,\n          lastName: userData.lastName,\n        };\n\n        return {\n          message: \"Login successfully\",\n          token_type: \"Bearer\",\n          payloadToken: payloadToken,\n        };\n      } else {\n        throw new ResponseError.Unauthorized(\"Invalid password\");\n      }\n    } catch (error) {\n      console.error(\"Error during sign-in\", error);\n      return error;\n    }\n  }\n}\n\nexport default AuthService;\n"],"mappings":"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","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\db.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updatePatient = exports.deletePatient = exports.addPatient = exports.checkPhoneNumberExists = exports.patientDetail = exports.getPatients = exports.deleteAppointment = exports.updateAppointment = exports.getAppointment = exports.saveAppointment = exports.getUserInfo = exports.getNavItems = exports.updateProfileUser = exports.getOTP = exports.getAdmins = exports.updateUserVerifyCode = exports.getUserByPassword = exports.confirmEmail = exports.createUser = exports.checkNickName = exports.checkUserExist = void 0;\nconst bcrypt_1 = __importDefault(require(\"bcrypt\"));\nconst uuid_1 = require(\"uuid\");\nconst schema_1 = __importDefault(require(\"../controller/user/schema\"));\nconst mysql_1 = require(\"./mysql\");\n// Users\nfunction checkUserExist(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const user = yield (0, mysql_1.query)(`SELECT user_id,email FROM  ${mysql_1.coreSchema}.users\n      WHERE email=?`, {\n      values: [email]\n    });\n    return user;\n  });\n}\nexports.checkUserExist = checkUserExist;\nfunction checkNickName() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getData = yield (0, mysql_1.query)(`SELECT * FROM Ali_DB.users`);\n    return getData;\n  });\n}\nexports.checkNickName = checkNickName;\nfunction createUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      password\n    } = data;\n    const {\n      confirmPassword\n    } = data;\n    const fdPassword = {\n      password,\n      confirmPassword\n    };\n    const validPassword = schema_1.default.createPassword.validateSyncAt(\"confirmPassword\", fdPassword);\n    const saltRounds = 10;\n    const hash = bcrypt_1.default.hashSync(validPassword, saltRounds);\n    const newId = (0, uuid_1.v4)();\n    const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.users\n    (user_id,firstName,lastName,nickName,gender,birthDay,email,phoneNumber,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\n    VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`, {\n      values: [newId, data.firstName, data.lastName, data.nickName, data.gender, data.birthDay, data.email, data.phoneNumber, hash, 0, data.verify_code, new Date(), new Date(), data.tokenVerify]\n    });\n    return result;\n  });\n}\nexports.createUser = createUser;\nfunction confirmEmail(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT * \n    FROM ${mysql_1.coreSchema}.users\n    WHERE email=? AND deletedAt IS NULL\n    `, {\n      values: [data.email]\n    });\n    if (result.length < 1) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"user not found!\"\n    };\n    const user = result[0];\n    if (user.email !== data.email) return {\n      isSuccessfull: false,\n      status: 1,\n      message: \"email is not correct\"\n    };\n    if (user.emailConfirmed) {\n      if (user.signupStatus === 1) {\n        const result = yield (0, mysql_1.query)(`\n        UPDATE ${mysql_1.coreSchema}.users\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\n        WHERE email =?\n        `, {\n          values: [1, 1, new Date(), data.email]\n        });\n      }\n      return {\n        isSuccessfull: true,\n        message: \"email already confirmed\"\n      };\n    }\n    if (user.verify_code !== data.verify_code) return {\n      status: false,\n      message: \"code is not correct\",\n      code: 400\n    };\n    yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\n    WHERE email=?\n  `, {\n      values: [new Date(), data.email]\n    });\n    return {\n      isSuccessfull: true,\n      showToUser: true,\n      messageCode: \"MSG_01\",\n      messageKind: 1,\n      message: \"email confirmed successfully\"\n    };\n  });\n}\nexports.confirmEmail = confirmEmail;\nfunction getUserByPassword(email, password) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const user = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email=?`, {\n        values: [email]\n      });\n      if (user.length < 1) return null;\n      const match = yield new Promise((resolve, reject) => {\n        bcrypt_1.default.compare(password, user[0].password, (err, isMatch) => {\n          if (err) reject(err);\n          resolve(isMatch);\n        });\n      });\n      if (!match) return null;\n      return user[0];\n    } catch (error) {\n      console.error(\"Error fetching user by password:\", error);\n      throw new Error(\"Could not fetch user\");\n    }\n  });\n}\nexports.getUserByPassword = getUserByPassword;\nfunction updateUserVerifyCode(userId, newCode) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    UPDATE ${mysql_1.coreSchema}.users\n    SET verify_code=?,updatedAt=?\n    WHERE user_id=?\n    `, {\n      values: [newCode, new Date(), userId]\n    });\n    const user = yield (0, mysql_1.query)(`\n      SELECT user_id,email,verify_code\n      FROM ${mysql_1.coreSchema}.users\n      WHERE user_id=?\n      `, {\n      values: [userId]\n    });\n    return user[0];\n  });\n}\nexports.updateUserVerifyCode = updateUserVerifyCode;\nfunction getAdmins() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const userAdmin = yield (0, mysql_1.query)(`\n    SELECT * FROM ${mysql_1.coreSchema}.admin\n    `);\n    return userAdmin;\n  });\n}\nexports.getAdmins = getAdmins;\nfunction getOTP(email, tokenVerify) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateData = yield (0, mysql_1.query)(`UPDATE  ${mysql_1.coreSchema}.users SET verify_code=? WHERE email = ?`, {\n      values: [tokenVerify, email]\n    });\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.users WHERE email = ?`, {\n      values: [email]\n    });\n    return result[0];\n  });\n}\nexports.getOTP = getOTP;\nfunction updateProfileUser(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const updateUsersql = `\n      UPDATE ${mysql_1.coreSchema}.users SET\n        firstName = ?,\n        lastName = ?,\n        email = ?,\n        address = ?,\n        country = ?,\n        city = ?,\n        state = ?,\n        zipcode = ?,\n      \n    `;\n    const updateUservalues = [data.firstName, data.lastName, data.email, data.address, data.country, data.city, data.state, data.zipcode];\n    const result = yield (0, mysql_1.query)(updateUsersql, updateUservalues);\n    const insertSkillSql = `UPDATE ${mysql_1.coreSchema}.user_skill SET (user_id, skill_name) VALUES (?, ?)`;\n    for (const skill of data.skills) {\n      yield (0, mysql_1.query)(insertSkillSql, [data.user_id, skill]);\n    }\n    return result;\n  });\n}\nexports.updateProfileUser = updateProfileUser;\nfunction getNavItems() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getManu = yield (0, mysql_1.query)(`\n  SELECT\n  m.menu_id, \n  m.icon, \n  m.menu_name, \n  m.path, \n  s.submenu_id, \n  s.icon,\n  s.submenu_name, \n  s.url\nFROM \n  ${mysql_1.coreSchema}.menu m\nLEFT JOIN \n  ${mysql_1.coreSchema}.submenu s ON m.menu_id = s.menu_id\nORDER BY \n  m.menu_id, s.submenu_id;\n  `);\n    try {\n      const menuMap = new Map();\n      getManu.forEach(row => {\n        var _a;\n        const menuId = row.menu_id;\n        if (!menuMap.has(menuId)) {\n          menuMap.set(menuId, {\n            menu_id: row.menu_id,\n            icon: row.icon,\n            menu_name: row.menu_name,\n            path: row.path,\n            submenus: []\n          });\n        }\n        if (row.submenu_id) {\n          const submenu = {\n            submenu_id: row.submenu_id,\n            submenu_name: row.submenu_name,\n            url: row.url,\n            icon: row.icon\n          };\n          (_a = menuMap.get(menuId)) === null || _a === void 0 ? void 0 : _a.submenus.push(submenu);\n        }\n      });\n      return Array.from(menuMap.values());\n    } catch (error) {\n      console.error(\"Error fetching navigation items:\", error);\n      throw error;\n    }\n  });\n}\nexports.getNavItems = getNavItems;\nfunction getUserInfo(email) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients WHERE email=?`, {\n      values: [email]\n    });\n    if (data) return data;\n  });\n}\nexports.getUserInfo = getUserInfo;\nfunction saveAppointment(eventData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const insertEvent = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.calendar_events \n      (event_title, color, date, event_description)\n       VALUES (?, ?, ?, ?)`, {\n        values: [eventData.event_title, eventData.color, eventData.date, eventData.event_description]\n      });\n      return insertEvent;\n    } catch (error) {\n      throw new Error(`Error inserting event: ${error}`);\n    }\n  });\n}\nexports.saveAppointment = saveAppointment;\nfunction getAppointment() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const getEventData = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.calendar_events`);\n    return getEventData;\n  });\n}\nexports.getAppointment = getAppointment;\nfunction updateAppointment(data) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`UPDATE ${mysql_1.coreSchema}.calendar_events\n    SET date = ?, updated_at = ?\n    WHERE event_id = ?`, {\n      values: [data.date, new Date(), data.event_id]\n    });\n    if (result) {\n      return result;\n    }\n  });\n}\nexports.updateAppointment = updateAppointment;\nfunction deleteAppointment(event_id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.calendar_events\n      WHERE event_id=?`, {\n      values: [event_id]\n    });\n    return result;\n  });\n}\nexports.deleteAppointment = deleteAppointment;\nfunction getPatients() {\n  return __awaiter(this, void 0, void 0, function* () {\n    const patients = yield (0, mysql_1.query)(`\n  SELECT * FROM ${mysql_1.coreSchema}.patients\n  `);\n    return patients;\n  });\n}\nexports.getPatients = getPatients;\nfunction patientDetail(patientId) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`SELECT * FROM ${mysql_1.coreSchema}.patients\n    WHERE id=?`, {\n      values: [patientId]\n    });\n    return result;\n  });\n}\nexports.patientDetail = patientDetail;\nfunction checkPhoneNumberExists(mobile) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n    SELECT mobile FROM ${mysql_1.coreSchema}.patients\n    where mobile=?\n    `, {\n      values: [mobile]\n    });\n    return result;\n  });\n}\nexports.checkPhoneNumberExists = checkPhoneNumberExists;\nfunction addPatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const result = yield (0, mysql_1.query)(`INSERT INTO ${mysql_1.coreSchema}.patients\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\n        bloodGroup, bloodPressure, sugarLevel, injury, profileImage,heartBeat,\n        haemoglobin,doctor,treatment,charges,description,date)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`, {\n        values: [patientData.firstName, patientData.lastName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.maritalStatus, patientData.address, patientData.bloodGroup, patientData.bloodPressure, patientData.sugarLevel, patientData.injury, patientData.profileImage, patientData.heartBeat, patientData.haemoglobin, patientData.doctor, patientData.treatment, patientData.charges, patientData.description, new Date()]\n      });\n      return result;\n    } catch (error) {\n      console.log();\n      console.error(\"Error inserting patient data:\", error);\n      throw error;\n    }\n  });\n}\nexports.addPatient = addPatient;\nfunction deletePatient(id) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`DELETE FROM ${mysql_1.coreSchema}.patients\n    WHERE id =?`, {\n      values: [id]\n    });\n    return result;\n  });\n}\nexports.deletePatient = deletePatient;\nfunction updatePatient(patientData) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const result = yield (0, mysql_1.query)(`\n      UPDATE ${mysql_1.coreSchema}.patients\n      SET firstName = ?,\n          lastName = ?,\n          gender = ?,\n          mobile = ?,\n          dateOfBirth = ?,\n          age = ?,\n          email = ?,\n          bloodPressure = ?,\n          injury = ?,\n          bloodGroup = ?,\n          address = ?\n      WHERE id = ?\n      `, {\n      values: [patientData.firstName, patientData.lastName, patientData.gender, patientData.mobile, patientData.dateOfBirth, patientData.age, patientData.email, patientData.bloodPressure, patientData.injury, patientData.bloodGroup, patientData.address, patientData.id]\n    });\n    return result;\n  });\n}\nexports.updatePatient = updatePatient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiY3J5cHRfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJ1dWlkXzEiLCJzY2hlbWFfMSIsIm15c3FsXzEiLCJjaGVja1VzZXJFeGlzdCIsImVtYWlsIiwidXNlciIsInF1ZXJ5IiwiY29yZVNjaGVtYSIsInZhbHVlcyIsImV4cG9ydHMiLCJjaGVja05pY2tOYW1lIiwiZ2V0RGF0YSIsImNyZWF0ZVVzZXIiLCJkYXRhIiwicGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJmZFBhc3N3b3JkIiwidmFsaWRQYXNzd29yZCIsImRlZmF1bHQiLCJjcmVhdGVQYXNzd29yZCIsInZhbGlkYXRlU3luY0F0Iiwic2FsdFJvdW5kcyIsImhhc2giLCJoYXNoU3luYyIsIm5ld0lkIiwidjQiLCJyZXN1bHQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIm5pY2tOYW1lIiwiZ2VuZGVyIiwiYmlydGhEYXkiLCJwaG9uZU51bWJlciIsInZlcmlmeV9jb2RlIiwiRGF0ZSIsInRva2VuVmVyaWZ5IiwiY29uZmlybUVtYWlsIiwibGVuZ3RoIiwiaXNTdWNjZXNzZnVsbCIsInN0YXR1cyIsIm1lc3NhZ2UiLCJlbWFpbENvbmZpcm1lZCIsInNpZ251cFN0YXR1cyIsImNvZGUiLCJzaG93VG9Vc2VyIiwibWVzc2FnZUNvZGUiLCJtZXNzYWdlS2luZCIsImdldFVzZXJCeVBhc3N3b3JkIiwibWF0Y2giLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNvbXBhcmUiLCJlcnIiLCJpc01hdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsInVzZXJJZCIsIm5ld0NvZGUiLCJnZXRBZG1pbnMiLCJ1c2VyQWRtaW4iLCJnZXRPVFAiLCJ1cGRhdGVEYXRhIiwidXBkYXRlUHJvZmlsZVVzZXIiLCJ1cGRhdGVVc2Vyc3FsIiwidXBkYXRlVXNlcnZhbHVlcyIsImFkZHJlc3MiLCJjb3VudHJ5IiwiY2l0eSIsInN0YXRlIiwiemlwY29kZSIsImluc2VydFNraWxsU3FsIiwic2tpbGwiLCJza2lsbHMiLCJ1c2VyX2lkIiwiZ2V0TmF2SXRlbXMiLCJnZXRNYW51IiwibWVudU1hcCIsIk1hcCIsImZvckVhY2giLCJyb3ciLCJtZW51SWQiLCJtZW51X2lkIiwiaGFzIiwic2V0IiwiaWNvbiIsIm1lbnVfbmFtZSIsInBhdGgiLCJzdWJtZW51cyIsInN1Ym1lbnVfaWQiLCJzdWJtZW51Iiwic3VibWVudV9uYW1lIiwidXJsIiwiX2EiLCJnZXQiLCJwdXNoIiwiQXJyYXkiLCJmcm9tIiwiZ2V0VXNlckluZm8iLCJzYXZlQXBwb2ludG1lbnQiLCJldmVudERhdGEiLCJpbnNlcnRFdmVudCIsImV2ZW50X3RpdGxlIiwiY29sb3IiLCJkYXRlIiwiZXZlbnRfZGVzY3JpcHRpb24iLCJnZXRBcHBvaW50bWVudCIsImdldEV2ZW50RGF0YSIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXZlbnRfaWQiLCJkZWxldGVBcHBvaW50bWVudCIsImdldFBhdGllbnRzIiwicGF0aWVudHMiLCJwYXRpZW50RGV0YWlsIiwicGF0aWVudElkIiwiY2hlY2tQaG9uZU51bWJlckV4aXN0cyIsIm1vYmlsZSIsImFkZFBhdGllbnQiLCJwYXRpZW50RGF0YSIsImRhdGVPZkJpcnRoIiwiYWdlIiwibWFyaXRhbFN0YXR1cyIsImJsb29kR3JvdXAiLCJibG9vZFByZXNzdXJlIiwic3VnYXJMZXZlbCIsImluanVyeSIsInByb2ZpbGVJbWFnZSIsImhlYXJ0QmVhdCIsImhhZW1vZ2xvYmluIiwiZG9jdG9yIiwidHJlYXRtZW50IiwiY2hhcmdlcyIsImRlc2NyaXB0aW9uIiwibG9nIiwiZGVsZXRlUGF0aWVudCIsImlkIiwidXBkYXRlUGF0aWVudCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvYmluL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdFwiO1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xyXG5pbXBvcnQgc2NoZW1hVXNlciBmcm9tIFwiLi4vY29udHJvbGxlci91c2VyL3NjaGVtYVwiO1xyXG5pbXBvcnQgeyBJQXBwb2ludG1lbnQgfSBmcm9tIFwiLi4vdHlwZXMvYXBwb2ludG1lbnQuaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IE1lbnUsIFN1Ym1lbnUgfSBmcm9tIFwiLi4vdHlwZXMvbmF2SXRlbVwiO1xyXG5pbXBvcnQgeyBBcHBSZXNwb25zZSB9IGZyb20gXCIuLi90eXBlcy9yZXNwb25zZS5pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgQ29uZmlybUVtYWlsLCBDcmVhdGVVc2VyLCBVc2VyIH0gZnJvbSBcIi4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHsgUm93RGF0YVBhY2tldCwgY29yZVNjaGVtYSwgcXVlcnkgfSBmcm9tIFwiLi9teXNxbFwiO1xyXG5pbXBvcnQgeyBBZG1pbkRUTyB9IGZyb20gXCIuLi9tb2RlbHMvYWRtaW5cIjtcclxuaW1wb3J0IHsgUGF0aWVudERUTyB9IGZyb20gXCIuLi9tb2RlbHMvcGF0aWVudHNcIjtcclxuaW1wb3J0IHsgcmVzdWx0IH0gZnJvbSBcImxvZGFzaFwiO1xyXG5cclxuLy8gVXNlcnNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoZWNrVXNlckV4aXN0KGVtYWlsOiBzdHJpbmcpOiBQcm9taXNlPFJvd0RhdGFQYWNrZXRbXT4ge1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCB1c2VyX2lkLGVtYWlsIEZST00gICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgICAgV0hFUkUgZW1haWw9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2VtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZSgpOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IGdldERhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihgU0VMRUNUICogRlJPTSBBbGlfREIudXNlcnNgKTtcclxuICByZXR1cm4gZ2V0RGF0YTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXIoZGF0YTogYW55KSB7XHJcbiAgY29uc3QgeyBwYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCB7IGNvbmZpcm1QYXNzd29yZCB9ID0gZGF0YTtcclxuICBjb25zdCBmZFBhc3N3b3JkID0geyBwYXNzd29yZCwgY29uZmlybVBhc3N3b3JkIH07XHJcbiAgY29uc3QgdmFsaWRQYXNzd29yZCA9IHNjaGVtYVVzZXIuY3JlYXRlUGFzc3dvcmQudmFsaWRhdGVTeW5jQXQoXHJcbiAgICBcImNvbmZpcm1QYXNzd29yZFwiLFxyXG4gICAgZmRQYXNzd29yZFxyXG4gICk7XHJcbiAgY29uc3Qgc2FsdFJvdW5kcyA9IDEwO1xyXG4gIGNvbnN0IGhhc2ggPSBiY3J5cHQuaGFzaFN5bmModmFsaWRQYXNzd29yZCwgc2FsdFJvdW5kcyk7XHJcbiAgY29uc3QgbmV3SWQgPSB1dWlkdjQoKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgKHVzZXJfaWQsZmlyc3ROYW1lLGxhc3ROYW1lLG5pY2tOYW1lLGdlbmRlcixiaXJ0aERheSxlbWFpbCxwaG9uZU51bWJlcixwYXNzd29yZCxzaWdudXBTdGF0dXMsdmVyaWZ5X2NvZGUsY3JlYXRlZEF0LHVwZGF0ZWRBdCx0b2tlblZlcmlmeSlcclxuICAgIFZBTFVFUyg/LD8sPyw/LD8sPyw/LD8sPyw/LD8sPyw/LD8pYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbXHJcbiAgICAgICAgbmV3SWQsXHJcbiAgICAgICAgZGF0YS5maXJzdE5hbWUsXHJcbiAgICAgICAgZGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBkYXRhLm5pY2tOYW1lLFxyXG4gICAgICAgIGRhdGEuZ2VuZGVyLFxyXG4gICAgICAgIGRhdGEuYmlydGhEYXksXHJcbiAgICAgICAgZGF0YS5lbWFpbCxcclxuICAgICAgICBkYXRhLnBob25lTnVtYmVyLFxyXG4gICAgICAgIGhhc2gsXHJcbiAgICAgICAgMCxcclxuICAgICAgICBkYXRhLnZlcmlmeV9jb2RlLFxyXG4gICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgbmV3IERhdGUoKSxcclxuICAgICAgICBkYXRhLnRva2VuVmVyaWZ5LFxyXG4gICAgICBdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1FbWFpbChkYXRhOiBDb25maXJtRW1haWwpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUICogXHJcbiAgICBGUk9NICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFdIRVJFIGVtYWlsPT8gQU5EIGRlbGV0ZWRBdCBJUyBOVUxMXHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG4gIGlmIChyZXN1bHQubGVuZ3RoIDwgMSlcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwidXNlciBub3QgZm91bmQhXCIsXHJcbiAgICB9IGFzIEFwcFJlc3BvbnNlO1xyXG4gIGNvbnN0IHVzZXIgPSByZXN1bHRbMF0gYXMgVXNlcjtcclxuICBpZiAodXNlci5lbWFpbCAhPT0gZGF0YS5lbWFpbClcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IGZhbHNlLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZW1haWwgaXMgbm90IGNvcnJlY3RcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgaWYgKHVzZXIuZW1haWxDb25maXJtZWQpIHtcclxuICAgIGlmICh1c2VyLnNpZ251cFN0YXR1cyA9PT0gMSkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAgIGBcclxuICAgICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgICAgIFNFVCBzaWdudXBTdGF0dXM9PyxlbWFpbENvbmZpcm1lZD0/LHVwZGF0ZWRBdD0/XHJcbiAgICAgICAgV0hFUkUgZW1haWwgPT9cclxuICAgICAgICBgLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHZhbHVlczogWzEsIDEsIG5ldyBEYXRlKCksIGRhdGEuZW1haWxdLFxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGlzU3VjY2Vzc2Z1bGw6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6IFwiZW1haWwgYWxyZWFkeSBjb25maXJtZWRcIixcclxuICAgIH0gYXMgQXBwUmVzcG9uc2U7XHJcbiAgfVxyXG4gIGlmICh1c2VyLnZlcmlmeV9jb2RlICE9PSBkYXRhLnZlcmlmeV9jb2RlKVxyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiBmYWxzZSwgbWVzc2FnZTogXCJjb2RlIGlzIG5vdCBjb3JyZWN0XCIsIGNvZGU6IDQwMCB9O1xyXG4gIGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgXHJcbiAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2Vyc1xyXG4gICAgU0VUIGVtYWlsQ29uZmlybWVkPTEsIHNpZ251cFN0YXR1cz0yLHVwZGF0ZWRBdD0/XHJcbiAgICBXSEVSRSBlbWFpbD0/XHJcbiAgYCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbbmV3IERhdGUoKSwgZGF0YS5lbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4ge1xyXG4gICAgaXNTdWNjZXNzZnVsbDogdHJ1ZSxcclxuICAgIHNob3dUb1VzZXI6IHRydWUsXHJcbiAgICBtZXNzYWdlQ29kZTogXCJNU0dfMDFcIixcclxuICAgIG1lc3NhZ2VLaW5kOiAxLFxyXG4gICAgbWVzc2FnZTogXCJlbWFpbCBjb25maXJtZWQgc3VjY2Vzc2Z1bGx5XCIsXHJcbiAgfSBhcyBBcHBSZXNwb25zZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeVBhc3N3b3JkKFxyXG4gIGVtYWlsOiBzdHJpbmcsXHJcbiAgcGFzc3dvcmQ6IHN0cmluZ1xyXG4pOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzIFdIRVJFIGVtYWlsPT9gLFxyXG4gICAgICB7XHJcbiAgICAgICAgdmFsdWVzOiBbZW1haWxdLFxyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgaWYgKHVzZXIubGVuZ3RoIDwgMSkgcmV0dXJuIG51bGw7XHJcbiAgICBjb25zdCBtYXRjaCA9IGF3YWl0IG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXJbMF0ucGFzc3dvcmQsIChlcnIsIGlzTWF0Y2gpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSByZWplY3QoZXJyKTtcclxuICAgICAgICByZXNvbHZlKGlzTWF0Y2gpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgaWYgKCFtYXRjaCkgcmV0dXJuIG51bGw7XHJcbiAgICByZXR1cm4gdXNlclswXSBhcyBVc2VyO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdXNlciBieSBwYXNzd29yZDpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZldGNoIHVzZXJcIik7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclZlcmlmeUNvZGUodXNlcklkOiBzdHJpbmcsIG5ld0NvZGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgVVBEQVRFICR7Y29yZVNjaGVtYX0udXNlcnNcclxuICAgIFNFVCB2ZXJpZnlfY29kZT0/LHVwZGF0ZWRBdD0/XHJcbiAgICBXSEVSRSB1c2VyX2lkPT9cclxuICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW25ld0NvZGUsIG5ldyBEYXRlKCksIHVzZXJJZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBcclxuICAgICAgU0VMRUNUIHVzZXJfaWQsZW1haWwsdmVyaWZ5X2NvZGVcclxuICAgICAgRlJPTSAke2NvcmVTY2hlbWF9LnVzZXJzXHJcbiAgICAgIFdIRVJFIHVzZXJfaWQ9P1xyXG4gICAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFt1c2VySWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHVzZXJbMF0gYXMgQ3JlYXRlVXNlcjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFkbWlucygpIHtcclxuICBjb25zdCB1c2VyQWRtaW4gPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICAgIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5hZG1pblxyXG4gICAgYCk7XHJcbiAgcmV0dXJuIHVzZXJBZG1pbiBhcyBBZG1pbkRUT1tdO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKGVtYWlsOiBhbnksIHRva2VuVmVyaWZ5OiBhbnkpIHtcclxuICBjb25zdCB1cGRhdGVEYXRhID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgIGBVUERBVEUgICR7Y29yZVNjaGVtYX0udXNlcnMgU0VUIHZlcmlmeV9jb2RlPT8gV0hFUkUgZW1haWwgPSA/YCxcclxuICAgIHtcclxuICAgICAgdmFsdWVzOiBbdG9rZW5WZXJpZnksIGVtYWlsXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS51c2VycyBXSEVSRSBlbWFpbCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0WzBdIGFzIFVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlVXNlcihkYXRhOiBVc2VyKTogUHJvbWlzZTxhbnk+IHtcclxuICBjb25zdCB1cGRhdGVVc2Vyc3FsID0gYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2VycyBTRVRcclxuICAgICAgICBmaXJzdE5hbWUgPSA/LFxyXG4gICAgICAgIGxhc3ROYW1lID0gPyxcclxuICAgICAgICBlbWFpbCA9ID8sXHJcbiAgICAgICAgYWRkcmVzcyA9ID8sXHJcbiAgICAgICAgY291bnRyeSA9ID8sXHJcbiAgICAgICAgY2l0eSA9ID8sXHJcbiAgICAgICAgc3RhdGUgPSA/LFxyXG4gICAgICAgIHppcGNvZGUgPSA/LFxyXG4gICAgICBcclxuICAgIGA7XHJcbiAgY29uc3QgdXBkYXRlVXNlcnZhbHVlcyA9IFtcclxuICAgIGRhdGEuZmlyc3ROYW1lLFxyXG4gICAgZGF0YS5sYXN0TmFtZSxcclxuICAgIGRhdGEuZW1haWwsXHJcbiAgICBkYXRhLmFkZHJlc3MsXHJcbiAgICBkYXRhLmNvdW50cnksXHJcbiAgICBkYXRhLmNpdHksXHJcbiAgICBkYXRhLnN0YXRlLFxyXG4gICAgZGF0YS56aXBjb2RlLFxyXG4gIF07XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPih1cGRhdGVVc2Vyc3FsLCB1cGRhdGVVc2VydmFsdWVzKTtcclxuICBjb25zdCBpbnNlcnRTa2lsbFNxbCA9IGBVUERBVEUgJHtjb3JlU2NoZW1hfS51c2VyX3NraWxsIFNFVCAodXNlcl9pZCwgc2tpbGxfbmFtZSkgVkFMVUVTICg/LCA/KWA7XHJcbiAgZm9yIChjb25zdCBza2lsbCBvZiBkYXRhLnNraWxscykge1xyXG4gICAgYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihpbnNlcnRTa2lsbFNxbCwgW2RhdGEudXNlcl9pZCwgc2tpbGxdKTtcclxuICB9XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKCkge1xyXG4gIGNvbnN0IGdldE1hbnUgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KGBcclxuICBTRUxFQ1RcclxuICBtLm1lbnVfaWQsIFxyXG4gIG0uaWNvbiwgXHJcbiAgbS5tZW51X25hbWUsIFxyXG4gIG0ucGF0aCwgXHJcbiAgcy5zdWJtZW51X2lkLCBcclxuICBzLmljb24sXHJcbiAgcy5zdWJtZW51X25hbWUsIFxyXG4gIHMudXJsXHJcbkZST00gXHJcbiAgJHtjb3JlU2NoZW1hfS5tZW51IG1cclxuTEVGVCBKT0lOIFxyXG4gICR7Y29yZVNjaGVtYX0uc3VibWVudSBzIE9OIG0ubWVudV9pZCA9IHMubWVudV9pZFxyXG5PUkRFUiBCWSBcclxuICBtLm1lbnVfaWQsIHMuc3VibWVudV9pZDtcclxuICBgKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG1lbnVNYXAgPSBuZXcgTWFwPG51bWJlciwgTWVudT4oKTtcclxuXHJcbiAgICBnZXRNYW51LmZvckVhY2goKHJvdykgPT4ge1xyXG4gICAgICBjb25zdCBtZW51SWQgPSByb3cubWVudV9pZDtcclxuICAgICAgaWYgKCFtZW51TWFwLmhhcyhtZW51SWQpKSB7XHJcbiAgICAgICAgbWVudU1hcC5zZXQobWVudUlkLCB7XHJcbiAgICAgICAgICBtZW51X2lkOiByb3cubWVudV9pZCxcclxuICAgICAgICAgIGljb246IHJvdy5pY29uLFxyXG4gICAgICAgICAgbWVudV9uYW1lOiByb3cubWVudV9uYW1lLFxyXG4gICAgICAgICAgcGF0aDogcm93LnBhdGgsXHJcbiAgICAgICAgICBzdWJtZW51czogW10sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyb3cuc3VibWVudV9pZCkge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1lbnU6IFN1Ym1lbnUgPSB7XHJcbiAgICAgICAgICBzdWJtZW51X2lkOiByb3cuc3VibWVudV9pZCxcclxuICAgICAgICAgIHN1Ym1lbnVfbmFtZTogcm93LnN1Ym1lbnVfbmFtZSxcclxuICAgICAgICAgIHVybDogcm93LnVybCxcclxuICAgICAgICAgIGljb246IHJvdy5pY29uLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbWVudU1hcC5nZXQobWVudUlkKT8uc3VibWVudXMucHVzaChzdWJtZW51KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEFycmF5LmZyb20obWVudU1hcC52YWx1ZXMoKSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBuYXZpZ2F0aW9uIGl0ZW1zOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VySW5mbyhlbWFpbDogc3RyaW5nKSB7XHJcbiAgY29uc3QgZGF0YSA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzIFdIRVJFIGVtYWlsPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtlbWFpbF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICBpZiAoZGF0YSkgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQXBwb2ludG1lbnQoZXZlbnREYXRhOiBJQXBwb2ludG1lbnQpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgaW5zZXJ0RXZlbnQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICBgSU5TRVJUIElOVE8gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHMgXHJcbiAgICAgIChldmVudF90aXRsZSwgY29sb3IsIGRhdGUsIGV2ZW50X2Rlc2NyaXB0aW9uKVxyXG4gICAgICAgVkFMVUVTICg/LCA/LCA/LCA/KWAsXHJcbiAgICAgIHtcclxuICAgICAgICB2YWx1ZXM6IFtcclxuICAgICAgICAgIGV2ZW50RGF0YS5ldmVudF90aXRsZSxcclxuICAgICAgICAgIGV2ZW50RGF0YS5jb2xvcixcclxuICAgICAgICAgIGV2ZW50RGF0YS5kYXRlLFxyXG4gICAgICAgICAgZXZlbnREYXRhLmV2ZW50X2Rlc2NyaXB0aW9uLFxyXG4gICAgICAgIF0sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIGluc2VydEV2ZW50O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGluc2VydGluZyBldmVudDogJHtlcnJvcn1gKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBcHBvaW50bWVudCgpIHtcclxuICBjb25zdCBnZXRFdmVudERhdGEgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5jYWxlbmRhcl9ldmVudHNgXHJcbiAgKTtcclxuICByZXR1cm4gZ2V0RXZlbnREYXRhO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVBcHBvaW50bWVudChcclxuICBkYXRhOiBJQXBwb2ludG1lbnRcclxuKTogUHJvbWlzZTxJQXBwb2ludG1lbnRbXSB8IHVuZGVmaW5lZD4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oXHJcbiAgICBgVVBEQVRFICR7Y29yZVNjaGVtYX0uY2FsZW5kYXJfZXZlbnRzXHJcbiAgICBTRVQgZGF0ZSA9ID8sIHVwZGF0ZWRfYXQgPSA/XHJcbiAgICBXSEVSRSBldmVudF9pZCA9ID9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtkYXRhLmRhdGUsIG5ldyBEYXRlKCksIGRhdGEuZXZlbnRfaWRdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgaWYgKHJlc3VsdCkge1xyXG4gICAgcmV0dXJuIHJlc3VsdCBhcyBJQXBwb2ludG1lbnRbXTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcG9pbnRtZW50KGV2ZW50X2lkOiBzdHJpbmcpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgYERFTEVURSBGUk9NICR7Y29yZVNjaGVtYX0uY2FsZW5kYXJfZXZlbnRzXHJcbiAgICAgIFdIRVJFIGV2ZW50X2lkPT9gLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFtldmVudF9pZF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXRpZW50cygpIHtcclxuICBjb25zdCBwYXRpZW50cyA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXRbXT4oYFxyXG4gIFNFTEVDVCAqIEZST00gJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gIGApO1xyXG4gIHJldHVybiBwYXRpZW50cztcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcGF0aWVudERldGFpbChwYXRpZW50SWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldD4oXHJcbiAgICBgU0VMRUNUICogRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICBXSEVSRSBpZD0/YCxcclxuICAgIHsgdmFsdWVzOiBbcGF0aWVudElkXSB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tQaG9uZU51bWJlckV4aXN0cyhtb2JpbGU6IHN0cmluZykge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgU0VMRUNUIG1vYmlsZSBGUk9NICR7Y29yZVNjaGVtYX0ucGF0aWVudHNcclxuICAgIHdoZXJlIG1vYmlsZT0/XHJcbiAgICBgLFxyXG4gICAge1xyXG4gICAgICB2YWx1ZXM6IFttb2JpbGVdLFxyXG4gICAgfVxyXG4gICk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFBhdGllbnQocGF0aWVudERhdGE6IFBhdGllbnREVE8pIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYElOU0VSVCBJTlRPICR7Y29yZVNjaGVtYX0ucGF0aWVudHNcclxuICAgICAgKGZpcnN0TmFtZSwgbGFzdE5hbWUsIGdlbmRlciwgbW9iaWxlLCBkYXRlT2ZCaXJ0aCwgYWdlLCBlbWFpbCwgbWFyaXRhbFN0YXR1cywgYWRkcmVzcyxcclxuICAgICAgICBibG9vZEdyb3VwLCBibG9vZFByZXNzdXJlLCBzdWdhckxldmVsLCBpbmp1cnksIHByb2ZpbGVJbWFnZSxoZWFydEJlYXQsXHJcbiAgICAgICAgaGFlbW9nbG9iaW4sZG9jdG9yLHRyZWF0bWVudCxjaGFyZ2VzLGRlc2NyaXB0aW9uLGRhdGUpXHJcbiAgICAgICBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pYCxcclxuICAgICAge1xyXG4gICAgICAgIHZhbHVlczogW1xyXG4gICAgICAgICAgcGF0aWVudERhdGEuZmlyc3ROYW1lLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEubGFzdE5hbWUsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5nZW5kZXIsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5tb2JpbGUsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5kYXRlT2ZCaXJ0aCxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmFnZSxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmVtYWlsLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEubWFyaXRhbFN0YXR1cyxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmFkZHJlc3MsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5ibG9vZEdyb3VwLFxyXG4gICAgICAgICAgcGF0aWVudERhdGEuYmxvb2RQcmVzc3VyZSxcclxuICAgICAgICAgIHBhdGllbnREYXRhLnN1Z2FyTGV2ZWwsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5pbmp1cnksXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5wcm9maWxlSW1hZ2UsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5oZWFydEJlYXQsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5oYWVtb2dsb2JpbixcclxuICAgICAgICAgIHBhdGllbnREYXRhLmRvY3RvcixcclxuICAgICAgICAgIHBhdGllbnREYXRhLnRyZWF0bWVudCxcclxuICAgICAgICAgIHBhdGllbnREYXRhLmNoYXJnZXMsXHJcbiAgICAgICAgICBwYXRpZW50RGF0YS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgIG5ldyBEYXRlKCksXHJcbiAgICAgICAgXSxcclxuICAgICAgfVxyXG4gICAgKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUubG9nKCk7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5zZXJ0aW5nIHBhdGllbnQgZGF0YTpcIiwgZXJyb3IpO1xyXG4gICAgdGhyb3cgZXJyb3I7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVQYXRpZW50KGlkOiBudW1iZXIpIHtcclxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeTxSb3dEYXRhUGFja2V0PihcclxuICAgIGBERUxFVEUgRlJPTSAke2NvcmVTY2hlbWF9LnBhdGllbnRzXHJcbiAgICBXSEVSRSBpZCA9P2AsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW2lkXSxcclxuICAgIH1cclxuICApO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQocGF0aWVudERhdGE6IFBhdGllbnREVE8pOiBQcm9taXNlPGFueT4ge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PFJvd0RhdGFQYWNrZXQ+KFxyXG4gICAgYFxyXG4gICAgICBVUERBVEUgJHtjb3JlU2NoZW1hfS5wYXRpZW50c1xyXG4gICAgICBTRVQgZmlyc3ROYW1lID0gPyxcclxuICAgICAgICAgIGxhc3ROYW1lID0gPyxcclxuICAgICAgICAgIGdlbmRlciA9ID8sXHJcbiAgICAgICAgICBtb2JpbGUgPSA/LFxyXG4gICAgICAgICAgZGF0ZU9mQmlydGggPSA/LFxyXG4gICAgICAgICAgYWdlID0gPyxcclxuICAgICAgICAgIGVtYWlsID0gPyxcclxuICAgICAgICAgIGJsb29kUHJlc3N1cmUgPSA/LFxyXG4gICAgICAgICAgaW5qdXJ5ID0gPyxcclxuICAgICAgICAgIGJsb29kR3JvdXAgPSA/LFxyXG4gICAgICAgICAgYWRkcmVzcyA9ID9cclxuICAgICAgV0hFUkUgaWQgPSA/XHJcbiAgICAgIGAsXHJcbiAgICB7XHJcbiAgICAgIHZhbHVlczogW1xyXG4gICAgICAgIHBhdGllbnREYXRhLmZpcnN0TmFtZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5sYXN0TmFtZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5nZW5kZXIsXHJcbiAgICAgICAgcGF0aWVudERhdGEubW9iaWxlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmRhdGVPZkJpcnRoLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFnZSxcclxuICAgICAgICBwYXRpZW50RGF0YS5lbWFpbCxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZFByZXNzdXJlLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmluanVyeSxcclxuICAgICAgICBwYXRpZW50RGF0YS5ibG9vZEdyb3VwLFxyXG4gICAgICAgIHBhdGllbnREYXRhLmFkZHJlc3MsXHJcbiAgICAgICAgcGF0aWVudERhdGEuaWQsXHJcbiAgICAgIF0sXHJcbiAgICB9XHJcbiAgKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLFFBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBS0EsTUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBS0E7QUFDQSxTQUFzQkksY0FBY0EsQ0FBQ0MsS0FBYTs7SUFDaEQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUgsT0FB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","map":{"version":3,"names":["bcrypt_1","__importDefault","require","uuid_1","schema_1","mysql_1","checkUserExist","email","user","query","coreSchema","values","exports","checkNickName","getData","createUser","data","password","confirmPassword","fdPassword","validPassword","default","createPassword","validateSyncAt","saltRounds","hash","hashSync","newId","v4","result","firstName","lastName","nickName","gender","birthDay","phoneNumber","verify_code","Date","tokenVerify","confirmEmail","length","isSuccessfull","status","message","emailConfirmed","signupStatus","code","showToUser","messageCode","messageKind","getUserByPassword","match","Promise","resolve","reject","compare","err","isMatch","error","console","Error","updateUserVerifyCode","userId","newCode","getAdmins","userAdmin","getOTP","updateData","updateProfileUser","updateUsersql","updateUservalues","address","country","city","state","zipcode","insertSkillSql","skill","skills","user_id","getNavItems","getManu","menuMap","Map","forEach","row","menuId","menu_id","has","set","icon","menu_name","path","submenus","submenu_id","submenu","submenu_name","url","_a","get","push","Array","from","getUserInfo","saveAppointment","eventData","insertEvent","event_title","color","date","event_description","getAppointment","getEventData","updateAppointment","event_id","deleteAppointment","getPatients","patients","patientDetail","patientId","checkPhoneNumberExists","mobile","addPatient","patientData","dateOfBirth","age","maritalStatus","bloodGroup","bloodPressure","sugarLevel","injury","profileImage","heartBeat","haemoglobin","doctor","treatment","charges","description","log","deletePatient","id","updatePatient"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\bin\\","sources":["D:/Personal/My-projects/user-information/server/src/bin/db.ts"],"sourcesContent":["import bcrypt from \"bcrypt\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport schemaUser from \"../controller/user/schema\";\r\nimport { IAppointment } from \"../types/appointment.interface\";\r\nimport { Menu, Submenu } from \"../types/navItem\";\r\nimport { AppResponse } from \"../types/response.interface\";\r\nimport { ConfirmEmail, CreateUser, User } from \"../types/user\";\r\nimport { RowDataPacket, coreSchema, query } from \"./mysql\";\r\nimport { AdminDTO } from \"../models/admin\";\r\nimport { PatientDTO } from \"../models/patients\";\r\nimport { result } from \"lodash\";\r\n\r\n// Users\r\nexport async function checkUserExist(email: string): Promise<RowDataPacket[]> {\r\n  const user = await query<RowDataPacket[]>(\r\n    `SELECT user_id,email FROM  ${coreSchema}.users\r\n      WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return user;\r\n}\r\n\r\nexport async function checkNickName(): Promise<any> {\r\n  const getData = await query<RowDataPacket>(`SELECT * FROM Ali_DB.users`);\r\n  return getData;\r\n}\r\n\r\nexport async function createUser(data: any) {\r\n  const { password } = data;\r\n  const { confirmPassword } = data;\r\n  const fdPassword = { password, confirmPassword };\r\n  const validPassword = schemaUser.createPassword.validateSyncAt(\r\n    \"confirmPassword\",\r\n    fdPassword\r\n  );\r\n  const saltRounds = 10;\r\n  const hash = bcrypt.hashSync(validPassword, saltRounds);\r\n  const newId = uuidv4();\r\n\r\n  const result = await query<RowDataPacket>(\r\n    `INSERT INTO ${coreSchema}.users\r\n    (user_id,firstName,lastName,nickName,gender,birthDay,email,phoneNumber,password,signupStatus,verify_code,createdAt,updatedAt,tokenVerify)\r\n    VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?)`,\r\n    {\r\n      values: [\r\n        newId,\r\n        data.firstName,\r\n        data.lastName,\r\n        data.nickName,\r\n        data.gender,\r\n        data.birthDay,\r\n        data.email,\r\n        data.phoneNumber,\r\n        hash,\r\n        0,\r\n        data.verify_code,\r\n        new Date(),\r\n        new Date(),\r\n        data.tokenVerify,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function confirmEmail(data: ConfirmEmail) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `\r\n    SELECT * \r\n    FROM ${coreSchema}.users\r\n    WHERE email=? AND deletedAt IS NULL\r\n    `,\r\n    {\r\n      values: [data.email],\r\n    }\r\n  );\r\n  if (result.length < 1)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"user not found!\",\r\n    } as AppResponse;\r\n  const user = result[0] as User;\r\n  if (user.email !== data.email)\r\n    return {\r\n      isSuccessfull: false,\r\n      status: 1,\r\n      message: \"email is not correct\",\r\n    } as AppResponse;\r\n  if (user.emailConfirmed) {\r\n    if (user.signupStatus === 1) {\r\n      const result = await query<RowDataPacket[]>(\r\n        `\r\n        UPDATE ${coreSchema}.users\r\n        SET signupStatus=?,emailConfirmed=?,updatedAt=?\r\n        WHERE email =?\r\n        `,\r\n        {\r\n          values: [1, 1, new Date(), data.email],\r\n        }\r\n      );\r\n    }\r\n    return {\r\n      isSuccessfull: true,\r\n      message: \"email already confirmed\",\r\n    } as AppResponse;\r\n  }\r\n  if (user.verify_code !== data.verify_code)\r\n    return { status: false, message: \"code is not correct\", code: 400 };\r\n  await query<RowDataPacket[]>(\r\n    `\r\n    UPDATE ${coreSchema}.users\r\n    SET emailConfirmed=1, signupStatus=2,updatedAt=?\r\n    WHERE email=?\r\n  `,\r\n    {\r\n      values: [new Date(), data.email],\r\n    }\r\n  );\r\n  return {\r\n    isSuccessfull: true,\r\n    showToUser: true,\r\n    messageCode: \"MSG_01\",\r\n    messageKind: 1,\r\n    message: \"email confirmed successfully\",\r\n  } as AppResponse;\r\n}\r\n\r\nexport async function getUserByPassword(\r\n  email: string,\r\n  password: string\r\n): Promise<User | null> {\r\n  try {\r\n    const user = await query<RowDataPacket[]>(\r\n      `SELECT * FROM ${coreSchema}.users WHERE email=?`,\r\n      {\r\n        values: [email],\r\n      }\r\n    );\r\n    if (user.length < 1) return null;\r\n    const match = await new Promise<boolean>((resolve, reject) => {\r\n      bcrypt.compare(password, user[0].password, (err, isMatch) => {\r\n        if (err) reject(err);\r\n        resolve(isMatch);\r\n      });\r\n    });\r\n    if (!match) return null;\r\n    return user[0] as User;\r\n  } catch (error) {\r\n    console.error(\"Error fetching user by password:\", error);\r\n    throw new Error(\"Could not fetch user\");\r\n  }\r\n}\r\n\r\nexport async function updateUserVerifyCode(userId: string, newCode: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    UPDATE ${coreSchema}.users\r\n    SET verify_code=?,updatedAt=?\r\n    WHERE user_id=?\r\n    `,\r\n    {\r\n      values: [newCode, new Date(), userId],\r\n    }\r\n  );\r\n  const user = await query<RowDataPacket[]>(\r\n    `\r\n      SELECT user_id,email,verify_code\r\n      FROM ${coreSchema}.users\r\n      WHERE user_id=?\r\n      `,\r\n    {\r\n      values: [userId],\r\n    }\r\n  );\r\n  return user[0] as CreateUser;\r\n}\r\n\r\nexport async function getAdmins() {\r\n  const userAdmin = await query<RowDataPacket[]>(`\r\n    SELECT * FROM ${coreSchema}.admin\r\n    `);\r\n  return userAdmin as AdminDTO[];\r\n}\r\n\r\nexport async function getOTP(email: any, tokenVerify: any) {\r\n  const updateData = await query<RowDataPacket[]>(\r\n    `UPDATE  ${coreSchema}.users SET verify_code=? WHERE email = ?`,\r\n    {\r\n      values: [tokenVerify, email],\r\n    }\r\n  );\r\n\r\n  const result = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.users WHERE email = ?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  return result[0] as User;\r\n}\r\n\r\nexport async function updateProfileUser(data: User): Promise<any> {\r\n  const updateUsersql = `\r\n      UPDATE ${coreSchema}.users SET\r\n        firstName = ?,\r\n        lastName = ?,\r\n        email = ?,\r\n        address = ?,\r\n        country = ?,\r\n        city = ?,\r\n        state = ?,\r\n        zipcode = ?,\r\n      \r\n    `;\r\n  const updateUservalues = [\r\n    data.firstName,\r\n    data.lastName,\r\n    data.email,\r\n    data.address,\r\n    data.country,\r\n    data.city,\r\n    data.state,\r\n    data.zipcode,\r\n  ];\r\n  const result = await query<RowDataPacket[]>(updateUsersql, updateUservalues);\r\n  const insertSkillSql = `UPDATE ${coreSchema}.user_skill SET (user_id, skill_name) VALUES (?, ?)`;\r\n  for (const skill of data.skills) {\r\n    await query<RowDataPacket[]>(insertSkillSql, [data.user_id, skill]);\r\n  }\r\n  return result;\r\n}\r\n\r\nexport async function getNavItems() {\r\n  const getManu = await query<RowDataPacket[]>(`\r\n  SELECT\r\n  m.menu_id, \r\n  m.icon, \r\n  m.menu_name, \r\n  m.path, \r\n  s.submenu_id, \r\n  s.icon,\r\n  s.submenu_name, \r\n  s.url\r\nFROM \r\n  ${coreSchema}.menu m\r\nLEFT JOIN \r\n  ${coreSchema}.submenu s ON m.menu_id = s.menu_id\r\nORDER BY \r\n  m.menu_id, s.submenu_id;\r\n  `);\r\n\r\n  try {\r\n    const menuMap = new Map<number, Menu>();\r\n\r\n    getManu.forEach((row) => {\r\n      const menuId = row.menu_id;\r\n      if (!menuMap.has(menuId)) {\r\n        menuMap.set(menuId, {\r\n          menu_id: row.menu_id,\r\n          icon: row.icon,\r\n          menu_name: row.menu_name,\r\n          path: row.path,\r\n          submenus: [],\r\n        });\r\n      }\r\n\r\n      if (row.submenu_id) {\r\n        const submenu: Submenu = {\r\n          submenu_id: row.submenu_id,\r\n          submenu_name: row.submenu_name,\r\n          url: row.url,\r\n          icon: row.icon,\r\n        };\r\n        menuMap.get(menuId)?.submenus.push(submenu);\r\n      }\r\n    });\r\n\r\n    return Array.from(menuMap.values());\r\n  } catch (error) {\r\n    console.error(\"Error fetching navigation items:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport async function getUserInfo(email: string) {\r\n  const data = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.patients WHERE email=?`,\r\n    {\r\n      values: [email],\r\n    }\r\n  );\r\n  if (data) return data;\r\n}\r\n\r\nexport async function saveAppointment(eventData: IAppointment) {\r\n  try {\r\n    const insertEvent = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.calendar_events \r\n      (event_title, color, date, event_description)\r\n       VALUES (?, ?, ?, ?)`,\r\n      {\r\n        values: [\r\n          eventData.event_title,\r\n          eventData.color,\r\n          eventData.date,\r\n          eventData.event_description,\r\n        ],\r\n      }\r\n    );\r\n\r\n    return insertEvent;\r\n  } catch (error) {\r\n    throw new Error(`Error inserting event: ${error}`);\r\n  }\r\n}\r\n\r\nexport async function getAppointment() {\r\n  const getEventData = await query<RowDataPacket[]>(\r\n    `SELECT * FROM ${coreSchema}.calendar_events`\r\n  );\r\n  return getEventData;\r\n}\r\nexport async function updateAppointment(\r\n  data: IAppointment\r\n): Promise<IAppointment[] | undefined> {\r\n  const result = await query<RowDataPacket[]>(\r\n    `UPDATE ${coreSchema}.calendar_events\r\n    SET date = ?, updated_at = ?\r\n    WHERE event_id = ?`,\r\n    {\r\n      values: [data.date, new Date(), data.event_id],\r\n    }\r\n  );\r\n  if (result) {\r\n    return result as IAppointment[];\r\n  }\r\n}\r\nexport async function deleteAppointment(event_id: string) {\r\n  const result = await query<RowDataPacket[]>(\r\n    `DELETE FROM ${coreSchema}.calendar_events\r\n      WHERE event_id=?`,\r\n    {\r\n      values: [event_id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function getPatients() {\r\n  const patients = await query<RowDataPacket[]>(`\r\n  SELECT * FROM ${coreSchema}.patients\r\n  `);\r\n  return patients;\r\n}\r\nexport async function patientDetail(patientId: number): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `SELECT * FROM ${coreSchema}.patients\r\n    WHERE id=?`,\r\n    { values: [patientId] }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function checkPhoneNumberExists(mobile: string) {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n    SELECT mobile FROM ${coreSchema}.patients\r\n    where mobile=?\r\n    `,\r\n    {\r\n      values: [mobile],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n\r\nexport async function addPatient(patientData: PatientDTO) {\r\n  try {\r\n    const result = await query<RowDataPacket[]>(\r\n      `INSERT INTO ${coreSchema}.patients\r\n      (firstName, lastName, gender, mobile, dateOfBirth, age, email, maritalStatus, address,\r\n        bloodGroup, bloodPressure, sugarLevel, injury, profileImage,heartBeat,\r\n        haemoglobin,doctor,treatment,charges,description,date)\r\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)`,\r\n      {\r\n        values: [\r\n          patientData.firstName,\r\n          patientData.lastName,\r\n          patientData.gender,\r\n          patientData.mobile,\r\n          patientData.dateOfBirth,\r\n          patientData.age,\r\n          patientData.email,\r\n          patientData.maritalStatus,\r\n          patientData.address,\r\n          patientData.bloodGroup,\r\n          patientData.bloodPressure,\r\n          patientData.sugarLevel,\r\n          patientData.injury,\r\n          patientData.profileImage,\r\n          patientData.heartBeat,\r\n          patientData.haemoglobin,\r\n          patientData.doctor,\r\n          patientData.treatment,\r\n          patientData.charges,\r\n          patientData.description,\r\n          new Date(),\r\n        ],\r\n      }\r\n    );\r\n    return result;\r\n  } catch (error) {\r\n    console.log();\r\n    console.error(\"Error inserting patient data:\", error);\r\n    throw error;\r\n  }\r\n}\r\nexport async function deletePatient(id: number) {\r\n  const result = await query<RowDataPacket>(\r\n    `DELETE FROM ${coreSchema}.patients\r\n    WHERE id =?`,\r\n    {\r\n      values: [id],\r\n    }\r\n  );\r\n  return result;\r\n}\r\nexport async function updatePatient(patientData: PatientDTO): Promise<any> {\r\n  const result = await query<RowDataPacket>(\r\n    `\r\n      UPDATE ${coreSchema}.patients\r\n      SET firstName = ?,\r\n          lastName = ?,\r\n          gender = ?,\r\n          mobile = ?,\r\n          dateOfBirth = ?,\r\n          age = ?,\r\n          email = ?,\r\n          bloodPressure = ?,\r\n          injury = ?,\r\n          bloodGroup = ?,\r\n          address = ?\r\n      WHERE id = ?\r\n      `,\r\n    {\r\n      values: [\r\n        patientData.firstName,\r\n        patientData.lastName,\r\n        patientData.gender,\r\n        patientData.mobile,\r\n        patientData.dateOfBirth,\r\n        patientData.age,\r\n        patientData.email,\r\n        patientData.bloodPressure,\r\n        patientData.injury,\r\n        patientData.bloodGroup,\r\n        patientData.address,\r\n        patientData.id,\r\n      ],\r\n    }\r\n  );\r\n  return result;\r\n}\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1722936328889},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup = __importStar(require(\"yup\"));\nconst create = yup.object().shape({\n  fistName: yup.string().required(\"fistName is required\"),\n  lastName: yup.string().required(\"lastName is required\"),\n  nickName: yup.string().required(\"nickName is required\"),\n  gender: yup.string().required(\"gender is required\"),\n  birthDay: yup.string().required(\"birthDay is required\"),\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\n  phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nconst createPassword = yup.object().shape({\n  password: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\n  confirmPassword: yup.string().min(8, \"at least 8 characters\").oneOf([yup.ref(\"password\")], \"passwords are not the same\")\n});\nconst userRoles = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nconst latestTemplates = yup.object().shape({\n  userId: yup.string().required(\"userId is required\")\n}).required();\nconst confirmEmail = yup.object().shape({\n  email: yup.string().required(\"email is required\"),\n  // id: yup.string().required(\"user id is required\"),\n  verify_code: yup.string().required(\"verify code is required\").min(4, \"verify code should be 4 chr\").max(4, \"verify code should be 4 chr\")\n});\nconst checkEmail = yup.object().shape({\n  email: yup.string().required(\"email is required!\")\n});\nexports.default = {\n  userRoles,\n  latestTemplates,\n  create,\n  createPassword,\n  confirmEmail,\n  checkEmail\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwiY3JlYXRlIiwib2JqZWN0Iiwic2hhcGUiLCJmaXN0TmFtZSIsInN0cmluZyIsInJlcXVpcmVkIiwibGFzdE5hbWUiLCJuaWNrTmFtZSIsImdlbmRlciIsImJpcnRoRGF5IiwiZW1haWwiLCJwaG9uZU51bWJlciIsIm51bGxhYmxlIiwidG9rZW5WZXJpZnkiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwiY3JlYXRlUGFzc3dvcmQiLCJ1c2VyUm9sZXMiLCJ1c2VySWQiLCJsYXRlc3RUZW1wbGF0ZXMiLCJjb25maXJtRW1haWwiLCJ2ZXJpZnlfY29kZSIsIm1heCIsImNoZWNrRW1haWwiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXHVzZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvdXNlci9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gXCJ5dXBcIjtcclxuXHJcbmNvbnN0IGNyZWF0ZSA9IHl1cC5vYmplY3QoKS5zaGFwZSh7XHJcbiAgZmlzdE5hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImZpc3ROYW1lIGlzIHJlcXVpcmVkXCIpLFxyXG4gIGxhc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJsYXN0TmFtZSBpcyByZXF1aXJlZFwiKSxcclxuICBuaWNrTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwibmlja05hbWUgaXMgcmVxdWlyZWRcIiksXHJcbiAgZ2VuZGVyOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJnZW5kZXIgaXMgcmVxdWlyZWRcIiksXHJcbiAgYmlydGhEYXk6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcImJpcnRoRGF5IGlzIHJlcXVpcmVkXCIpLFxyXG4gIGVtYWlsOiB5dXAuc3RyaW5nKCkuZW1haWwoXCJpbnZhbGlkIGVtYWlsXCIpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgcGhvbmVOdW1iZXI6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxyXG4gIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcclxuICBwYXNzd29yZDogeXVwXHJcbiAgICAuc3RyaW5nKClcclxuICAgIC5taW4oOCwgXCJhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIilcclxuICAgIC5vbmVPZihbeXVwLnJlZihcImNvbmZpcm1QYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbiAgY29uZmlybVBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwicGFzc3dvcmRcIildLCBcInBhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lXCIpLFxyXG59KTtcclxuY29uc3QgY3JlYXRlUGFzc3dvcmQgPSB5dXAub2JqZWN0KCkuc2hhcGUoe1xyXG4gIHBhc3N3b3JkOiB5dXBcclxuICAgIC5zdHJpbmcoKVxyXG4gICAgLm1pbig4LCBcImF0IGxlYXN0IDggY2hhcmFjdGVyc1wiKVxyXG4gICAgLm9uZU9mKFt5dXAucmVmKFwiY29uZmlybVBhc3N3b3JkXCIpXSwgXCJwYXNzd29yZHMgYXJlIG5vdCB0aGUgc2FtZVwiKSxcclxuICBjb25maXJtUGFzc3dvcmQ6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAubWluKDgsIFwiYXQgbGVhc3QgOCBjaGFyYWN0ZXJzXCIpXHJcbiAgICAub25lT2YoW3l1cC5yZWYoXCJwYXNzd29yZFwiKV0sIFwicGFzc3dvcmRzIGFyZSBub3QgdGhlIHNhbWVcIiksXHJcbn0pO1xyXG5jb25zdCB1c2VyUm9sZXMgPSB5dXBcclxuICAub2JqZWN0KClcclxuICAuc2hhcGUoe1xyXG4gICAgdXNlcklkOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoXCJ1c2VySWQgaXMgcmVxdWlyZWRcIiksXHJcbiAgfSlcclxuICAucmVxdWlyZWQoKTtcclxuXHJcbmNvbnN0IGxhdGVzdFRlbXBsYXRlcyA9IHl1cFxyXG4gIC5vYmplY3QoKVxyXG4gIC5zaGFwZSh7XHJcbiAgICB1c2VySWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXJJZCBpcyByZXF1aXJlZFwiKSxcclxuICB9KVxyXG4gIC5yZXF1aXJlZCgpO1xyXG5cclxuY29uc3QgY29uZmlybUVtYWlsID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWRcIiksXHJcbiAgLy8gaWQ6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZChcInVzZXIgaWQgaXMgcmVxdWlyZWRcIiksXHJcbiAgdmVyaWZ5X2NvZGU6IHl1cFxyXG4gICAgLnN0cmluZygpXHJcbiAgICAucmVxdWlyZWQoXCJ2ZXJpZnkgY29kZSBpcyByZXF1aXJlZFwiKVxyXG4gICAgLm1pbig0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKVxyXG4gICAgLm1heCg0LCBcInZlcmlmeSBjb2RlIHNob3VsZCBiZSA0IGNoclwiKSxcclxufSk7XHJcblxyXG5jb25zdCBjaGVja0VtYWlsID0geXVwLm9iamVjdCgpLnNoYXBlKHtcclxuICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKFwiZW1haWwgaXMgcmVxdWlyZWQhXCIpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICB1c2VyUm9sZXMsXHJcbiAgbGF0ZXN0VGVtcGxhdGVzLFxyXG4gIGNyZWF0ZSxcclxuICBjcmVhdGVQYXNzd29yZCxcclxuICBjb25maXJtRW1haWws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","map":{"version":3,"names":["yup","__importStar","require","create","object","shape","fistName","string","required","lastName","nickName","gender","birthDay","email","phoneNumber","nullable","tokenVerify","password","min","oneOf","ref","confirmPassword","createPassword","userRoles","userId","latestTemplates","confirmEmail","verify_code","max","checkEmail","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/user/schema.ts"],"sourcesContent":["import * as yup from \"yup\";\r\n\r\nconst create = yup.object().shape({\r\n  fistName: yup.string().required(\"fistName is required\"),\r\n  lastName: yup.string().required(\"lastName is required\"),\r\n  nickName: yup.string().required(\"nickName is required\"),\r\n  gender: yup.string().required(\"gender is required\"),\r\n  birthDay: yup.string().required(\"birthDay is required\"),\r\n  email: yup.string().email(\"invalid email\").required(\"email is required\"),\r\n  phoneNumber: yup.string().nullable(),\r\n  tokenVerify: yup.string().nullable(),\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nconst createPassword = yup.object().shape({\r\n  password: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"confirmPassword\")], \"passwords are not the same\"),\r\n  confirmPassword: yup\r\n    .string()\r\n    .min(8, \"at least 8 characters\")\r\n    .oneOf([yup.ref(\"password\")], \"passwords are not the same\"),\r\n});\r\nconst userRoles = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\nconst latestTemplates = yup\r\n  .object()\r\n  .shape({\r\n    userId: yup.string().required(\"userId is required\"),\r\n  })\r\n  .required();\r\n\r\nconst confirmEmail = yup.object().shape({\r\n  email: yup.string().required(\"email is required\"),\r\n  // id: yup.string().required(\"user id is required\"),\r\n  verify_code: yup\r\n    .string()\r\n    .required(\"verify code is required\")\r\n    .min(4, \"verify code should be 4 chr\")\r\n    .max(4, \"verify code should be 4 chr\"),\r\n});\r\n\r\nconst checkEmail = yup.object().shape({\r\n  email: yup.string().required(\"email is required!\"),\r\n});\r\n\r\nexport default {\r\n  userRoles,\r\n  latestTemplates,\r\n  create,\r\n  createPassword,\r\n  confirmEmail,\r\n  checkEmail\r\n};\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1722386412021},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\bin\\\\mysql.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.query = exports.mysql = exports.pool = exports.coreSchema = void 0;\nconst dotenv = __importStar(require(\"dotenv\"));\nconst mysql = __importStar(require(\"mysql2/promise\"));\nexports.mysql = mysql;\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\nexports.coreSchema = coreSchema;\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 20,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE\n});\nexports.pool = pool;\npool.on(\"connection\", connection => {\n  connection.config.namedPlaceholders = true;\n});\nfunction query(sql_1) {\n  return __awaiter(this, arguments, void 0, function* (sql, options = {}, attempt = 0) {\n    const useExternalConnection = Boolean(options.connection);\n    const connection = options.connection || (yield pool.getConnection());\n    let result;\n    let sqlQuery = sql;\n    try {\n      sqlQuery = connection.format(sql, options.values);\n      [result] = yield connection.query({\n        sql,\n        values: options.values,\n        nestTables: options.nestTables\n      });\n      if (!result) {\n        result = [];\n      }\n    } catch (e) {\n      e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n      throw e;\n    } finally {\n      if (!useExternalConnection) {\n        connection.release();\n      }\n    }\n    return result;\n  });\n}\nexports.query = query;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwibXlzcWwiLCJleHBvcnRzIiwiY29uZmlnIiwiY29yZVNjaGVtYSIsInByb2Nlc3MiLCJlbnYiLCJEQl9EQVRBQkFTRSIsInBvb2wiLCJjcmVhdGVQb29sIiwiaG9zdCIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUk5BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwiY2hhcnNldCIsInRpbWV6b25lIiwiREJfVElNRVpPTkUiLCJvbiIsImNvbm5lY3Rpb24iLCJuYW1lZFBsYWNlaG9sZGVycyIsInF1ZXJ5Iiwic3FsXzEiLCJzcWwiLCJvcHRpb25zIiwiYXR0ZW1wdCIsInVzZUV4dGVybmFsQ29ubmVjdGlvbiIsIkJvb2xlYW4iLCJnZXRDb25uZWN0aW9uIiwicmVzdWx0Iiwic3FsUXVlcnkiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJuZXN0VGFibGVzIiwiZSIsIm1lc3NhZ2UiLCJjb2RlIiwicmVsZWFzZSJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGJpblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvYmluL215c3FsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgeyBSZXN1bHRTZXRIZWFkZXIsIFJvd0RhdGFQYWNrZXQgfSBmcm9tIFwibXlzcWwyXCI7XG5pbXBvcnQgKiBhcyBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcbmltcG9ydCB7IFBvb2xDb25uZWN0aW9uIH0gZnJvbSBcIm15c3FsMi9wcm9taXNlXCI7XG5cbmRvdGVudi5jb25maWcoKTtcbmNvbnN0IGNvcmVTY2hlbWEgPSBwcm9jZXNzLmVudi5EQl9EQVRBQkFTRTtcblxuZXhwb3J0IHsgUmVzdWx0U2V0SGVhZGVyLCBSb3dEYXRhUGFja2V0LCBjb3JlU2NoZW1hIH07XG5cbmNvbnN0IHBvb2wgPSBteXNxbC5jcmVhdGVQb29sKHtcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUk5BTUUsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxuICBjb25uZWN0aW9uTGltaXQ6IDIwLFxuICBxdWV1ZUxpbWl0OiAwLFxuICBjaGFyc2V0OiBcInV0ZjhcIixcbiAgdGltZXpvbmU6IHByb2Nlc3MuZW52LkRCX1RJTUVaT05FLFxufSk7XG5cbnBvb2wub24oXCJjb25uZWN0aW9uXCIsIChjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbik6IHZvaWQgPT4ge1xuICBjb25uZWN0aW9uLmNvbmZpZy5uYW1lZFBsYWNlaG9sZGVycyA9IHRydWU7XG59KTtcblxuZXhwb3J0IHsgcG9vbCwgbXlzcWwgfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5PFQgZXh0ZW5kcyBSb3dEYXRhUGFja2V0W10gfCBSZXN1bHRTZXRIZWFkZXIgfCBhbnk+KFxuICBzcWw6IHN0cmluZyxcbiAgb3B0aW9uczoge1xuICAgIGNvbm5lY3Rpb24/OiBQb29sQ29ubmVjdGlvbjtcbiAgICBuZXN0VGFibGVzPzogYm9vbGVhbjtcbiAgICB2YWx1ZXM/OiBhbnlbXSB8IGFueTtcbiAgfSA9IHt9LFxuICBhdHRlbXB0OiBudW1iZXIgPSAwXG4pOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgdXNlRXh0ZXJuYWxDb25uZWN0aW9uID0gQm9vbGVhbihvcHRpb25zLmNvbm5lY3Rpb24pO1xuICBjb25zdCBjb25uZWN0aW9uOiBQb29sQ29ubmVjdGlvbiA9XG4gICAgb3B0aW9ucy5jb25uZWN0aW9uIHx8IChhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKSk7XG5cbiAgbGV0IHJlc3VsdDtcbiAgbGV0IHNxbFF1ZXJ5ID0gc3FsO1xuXG4gIHRyeSB7XG4gICAgc3FsUXVlcnkgPSBjb25uZWN0aW9uLmZvcm1hdChzcWwsIG9wdGlvbnMudmFsdWVzKTtcbiAgICBbcmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoe1xuICAgICAgc3FsLFxuICAgICAgdmFsdWVzOiBvcHRpb25zLnZhbHVlcyxcbiAgICAgIG5lc3RUYWJsZXM6IG9wdGlvbnMubmVzdFRhYmxlcyxcbiAgICB9KTtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0gW107XG4gICAgfVxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICBlLm1lc3NhZ2UgPSBgJHtlLmNvZGV9XFxuc3FsOiAke3NxbFF1ZXJ5fVxcbmVycm9yOiAke2UubWVzc2FnZX1cXG50aW1lOiB9YDtcblxuICAgIHRocm93IGU7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKCF1c2VFeHRlcm5hbENvbm5lY3Rpb24pIHtcbiAgICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0IGFzIFQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxNQUFBLEdBQUFDLFlBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFDLEtBQUEsR0FBQUYsWUFBQSxDQUFBQyxPQUFBO0FBdUJlRSxPQUFBLENBQUFELEtBQUEsR0FBQUEsS0FBQTtBQXBCZkgsTUFBTSxDQUFDSyxNQUFNLEVBQUU7QUFDZixNQUFNQyxVQUFVLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxXQUFXO0FBRURMLE9BQUEsQ0FBQUUsVUFBQSxHQUFBQSxVQUFBO0FBRXpDLE1BQU1JLElBQUksR0FBR1AsS0FBSyxDQUFDUSxVQUFVLENBQUM7RUFDNUJDLElBQUksRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLLE9BQU87RUFDekJDLElBQUksRUFBRVAsT0FBTyxDQUFDQyxHQUFHLENBQUNPLFdBQVc7RUFDN0JDLFFBQVEsRUFBRVQsT0FBTyxDQUFDQyxHQUFHLENBQUNTLFdBQVc7RUFDakNDLFFBQVEsRUFBRVgsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFdBQVc7RUFDakNVLGVBQWUsRUFBRSxFQUFFO0VBQ25CQyxVQUFVLEVBQUUsQ0FBQztFQUNiQyxPQUFPLEVBQUUsTUFBTTtFQUNmQyxRQUFRLEVBQUVmLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDZTtDQUN2QixDQUFDO0FBTU9uQixPQUFBLENBQUFNLElBQUEsR0FBQUEsSUFBQTtBQUpUQSxJQUFJLENBQUNjLEVBQUUsQ0FBQyxZQUFZLEVBQUdDLFVBQTBCLElBQVU7RUFDekRBLFVBQVUsQ0FBQ3BCLE1BQU0sQ0FBQ3FCLGlCQUFpQixHQUFHLElBQUk7QUFDNUMsQ0FBQyxDQUFDO0FBSUYsU0FBc0JDLEtBQUtBLENBQUFDLEtBQUE7dURBQ3pCQyxHQUFXLEVBQ1hDLE9BQUEsR0FJSSxFQUFFLEVBQ05DLE9BQUEsR0FBa0IsQ0FBQztJQUVuQixNQUFNQyxxQkFBcUIsR0FBR0MsT0FBTyxDQUFDSCxPQUFPLENBQUNMLFVBQVUsQ0FBQztJQUN6RCxNQUFNQSxVQUFVLEdBQ2RLLE9BQU8sQ0FBQ0wsVUFBVSxLQUFLLE1BQU1mLElBQUksQ0FBQ3dCLGFBQWEsRUFBRSxDQUFDO0lBRXBELElBQUlDLE1BQU07SUFDVixJQUFJQyxRQUFRLEdBQUdQLEdBQUc7SUFFbEIsSUFBSTtNQUNGTyxRQUFRLEdBQUdYLFVBQVUsQ0FBQ1ksTUFBTSxDQUFDUixHQUFHLEVBQUVDLE9BQU8sQ0FBQ1EsTUFBTSxDQUFDO01BQ2pELENBQUNILE1BQU0sQ0FBQyxHQUFHLE1BQU1WLFVBQVUsQ0FBQ0UsS0FBSyxDQUFDO1FBQ2hDRSxHQUFHO1FBQ0hTLE1BQU0sRUFBRVIsT0FBTyxDQUFDUSxNQUFNO1FBQ3RCQyxVQUFVLEVBQUVULE9BQU8sQ0FBQ1M7T0FDckIsQ0FBQztNQUNGLElBQUksQ0FBQ0osTUFBTSxFQUFFO1FBQ1hBLE1BQU0sR0FBRyxFQUFFO01BQ2I7SUFDRixDQUFDLENBQUMsT0FBT0ssQ0FBTSxFQUFFO01BQ2ZBLENBQUMsQ0FBQ0MsT0FBTyxHQUFHLEdBQUdELENBQUMsQ0FBQ0UsSUFBSSxVQUFVTixRQUFRLFlBQVlJLENBQUMsQ0FBQ0MsT0FBTyxXQUFXO01BRXZFLE1BQU1ELENBQUM7SUFDVCxDQUFDLFNBQVM7TUFDUixJQUFJLENBQUNSLHFCQUFxQixFQUFFO1FBQzFCUCxVQUFVLENBQUNrQixPQUFPLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE9BQU9SLE1BQVc7RUFDcEIsQ0FBQzs7QUFwQ0QvQixPQUFBLENBQUF1QixLQUFBLEdBQUFBLEtBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["dotenv","__importStar","require","mysql","exports","config","coreSchema","process","env","DB_DATABASE","pool","createPool","host","DB_HOST","user","DB_USERNAME","password","DB_PASSWORD","database","connectionLimit","queueLimit","charset","timezone","DB_TIMEZONE","on","connection","namedPlaceholders","query","sql_1","sql","options","attempt","useExternalConnection","Boolean","getConnection","result","sqlQuery","format","values","nestTables","e","message","code","release"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\bin\\","sources":["D:/Personal/My-projects/user-information/server/src/bin/mysql.ts"],"sourcesContent":["import * as dotenv from \"dotenv\";\nimport { ResultSetHeader, RowDataPacket } from \"mysql2\";\nimport * as mysql from \"mysql2/promise\";\nimport { PoolConnection } from \"mysql2/promise\";\n\ndotenv.config();\nconst coreSchema = process.env.DB_DATABASE;\n\nexport { ResultSetHeader, RowDataPacket, coreSchema };\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST,\n  user: process.env.DB_USERNAME,\n  password: process.env.DB_PASSWORD,\n  database: process.env.DB_DATABASE,\n  connectionLimit: 20,\n  queueLimit: 0,\n  charset: \"utf8\",\n  timezone: process.env.DB_TIMEZONE,\n});\n\npool.on(\"connection\", (connection: PoolConnection): void => {\n  connection.config.namedPlaceholders = true;\n});\n\nexport { pool, mysql };\n\nexport async function query<T extends RowDataPacket[] | ResultSetHeader | any>(\n  sql: string,\n  options: {\n    connection?: PoolConnection;\n    nestTables?: boolean;\n    values?: any[] | any;\n  } = {},\n  attempt: number = 0\n): Promise<T> {\n  const useExternalConnection = Boolean(options.connection);\n  const connection: PoolConnection =\n    options.connection || (await pool.getConnection());\n\n  let result;\n  let sqlQuery = sql;\n\n  try {\n    sqlQuery = connection.format(sql, options.values);\n    [result] = await connection.query({\n      sql,\n      values: options.values,\n      nestTables: options.nestTables,\n    });\n    if (!result) {\n      result = [];\n    }\n  } catch (e: any) {\n    e.message = `${e.code}\\nsql: ${sqlQuery}\\nerror: ${e.message}\\ntime: }`;\n\n    throw e;\n  } finally {\n    if (!useExternalConnection) {\n      connection.release();\n    }\n  }\n  return result as T;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,MAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAuBeE,OAAA,CAAAD,KAAA,GAAAA,KAAA;AApBfH,MAAM,CAACK,MAAM,EAAE;AACf,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW;AAEDL,OAAA,CAAAE,UAAA,GAAAA,UAAA;AAEzC,MAAMI,IAAI,GAAGP,KAAK,CAACQ,UAAU,CAAC;EAC5BC,IAAI,EAAEL,OAAO,CAACC,GAAG,CAACK,OAAO;EACzBC,IAAI,EAAEP,OAAO,CAACC,GAAG,CAACO,WAAW;EAC7BC,QAAQ,EAAET,OAAO,CAACC,GAAG,CAACS,WAAW;EACjCC,QAAQ,EAAEX,OAAO,CAACC,GAAG,CAACC,WAAW;EACjCU,eAAe,EAAE,EAAE;EACnBC,UAAU,EAAE,CAAC;EACbC,OAAO,EAAE,MAAM;EACfC,QAAQ,EAAEf,OAAO,CAACC,GAAG,CAACe;CACvB,CAAC;AAMOnB,OAAA,CAAAM,IAAA,GAAAA,IAAA;AAJTA,IAAI,CAACc,EAAE,CAAC,YAAY,EAAGC,UAA0B,IAAU;EACzDA,UAAU,CAACpB,MAAM,CAACqB,iBAAiB,GAAG,IAAI;AAC5C,CAAC,CAAC;AAIF,SAAsBC,KAAKA,CAAAC,KAAA;uDACzBC,GAAW,EACXC,OAAA,GAII,EAAE,EACNC,OAAA,GAAkB,CAAC;IAEnB,MAAMC,qBAAqB,GAAGC,OAAO,CAACH,OAAO,CAACL,UAAU,CAAC;IACzD,MAAMA,UAAU,GACdK,OAAO,CAACL,UAAU,KAAK,MAAMf,IAAI,CAACwB,aAAa,EAAE,CAAC;IAEpD,IAAIC,MAAM;IACV,IAAIC,QAAQ,GAAGP,GAAG;IAElB,IAAI;MACFO,QAAQ,GAAGX,UAAU,CAACY,MAAM,CAACR,GAAG,EAAEC,OAAO,CAACQ,MAAM,CAAC;MACjD,CAACH,MAAM,CAAC,GAAG,MAAMV,UAAU,CAACE,KAAK,CAAC;QAChCE,GAAG;QACHS,MAAM,EAAER,OAAO,CAACQ,MAAM;QACtBC,UAAU,EAAET,OAAO,CAACS;OACrB,CAAC;MACF,IAAI,CAACJ,MAAM,EAAE;QACXA,MAAM,GAAG,EAAE;MACb;IACF,CAAC,CAAC,OAAOK,CAAM,EAAE;MACfA,CAAC,CAACC,OAAO,GAAG,GAAGD,CAAC,CAACE,IAAI,UAAUN,QAAQ,YAAYI,CAAC,CAACC,OAAO,WAAW;MAEvE,MAAMD,CAAC;IACT,CAAC,SAAS;MACR,IAAI,CAACR,qBAAqB,EAAE;QAC1BP,UAAU,CAACkB,OAAO,EAAE;MACtB;IACF;IACA,OAAOR,MAAW;EACpB,CAAC;;AApCD/B,OAAA,CAAAuB,KAAA,GAAAA,KAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\common.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getUniqueCodev3 = exports.getUniqueCodev2 = void 0;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev2 = getUniqueCodev2;\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n  let result = '';\n  const characters = 'abcdefghijklmnopqrstuvwxyz0123456789';\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\nexports.getUniqueCodev3 = getUniqueCodev3;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRVbmlxdWVDb2RldjIiLCJsZW5ndGgiLCJyZXN1bHQiLCJjaGFyYWN0ZXJzIiwiY2hhcmFjdGVyc0xlbmd0aCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJleHBvcnRzIiwiZ2V0VW5pcXVlQ29kZXYzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9oZWxwZXIvY29tbW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICpcbiAqIEBwYXJhbSBsZW5ndGggLSBHZW5lcmF0ZSBVbmlxdWUgQ29kZSAoIGRlZmF1bHQgbGVuZ3RoIDMyIClcbiAqL1xuZnVuY3Rpb24gZ2V0VW5pcXVlQ29kZXYyKGxlbmd0aCA9IDMyKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBjb25zdCBjaGFyYWN0ZXJzID1cbiAgICBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG4gIGNvbnN0IGNoYXJhY3RlcnNMZW5ndGggPSBjaGFyYWN0ZXJzLmxlbmd0aDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHJlc3VsdCArPSBjaGFyYWN0ZXJzLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyYWN0ZXJzTGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIGxlbmd0aCAtIEdlbmVyYXRlIFVuaXF1ZSBDb2RlICggZGVmYXVsdCBsZW5ndGggMzIgKVxuICovXG5mdW5jdGlvbiBnZXRVbmlxdWVDb2RldjMobGVuZ3RoID0gNCkge1xuICAgIGxldCByZXN1bHQgPSAnJ1xuICAgIGNvbnN0IGNoYXJhY3RlcnMgPVxuICAgICAgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSdcbiAgICBjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGhcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgICByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpXG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuZXhwb3J0IHtcbiAgICBnZXRVbmlxdWVDb2RldjIsXG4gICAgZ2V0VW5pcXVlQ29kZXYzXG4gIH0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUEsU0FBU0EsZUFBZUEsQ0FBQ0MsTUFBTSxHQUFHLEVBQUU7RUFDbEMsSUFBSUMsTUFBTSxHQUFHLEVBQUU7RUFDZixNQUFNQyxVQUFVLEdBQ2QsZ0VBQWdFO0VBQ2xFLE1BQU1DLGdCQUFnQixHQUFHRCxVQUFVLENBQUNGLE1BQU07RUFDMUMsS0FBSyxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLE1BQU0sRUFBRUksQ0FBQyxJQUFJLENBQUMsRUFBRTtJQUNsQ0gsTUFBTSxJQUFJQyxVQUFVLENBQUNHLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUNELElBQUksQ0FBQ0UsTUFBTSxFQUFFLEdBQUdMLGdCQUFnQixDQUFDLENBQUM7RUFDM0U7RUFDQSxPQUFPRixNQUFNO0FBQ2Y7QUFpQklRLE9BQUEsQ0FBQVYsZUFBQSxHQUFBQSxlQUFBO0FBZko7Ozs7QUFJQSxTQUFTVyxlQUFlQSxDQUFDVixNQUFNLEdBQUcsQ0FBQztFQUMvQixJQUFJQyxNQUFNLEdBQUcsRUFBRTtFQUNmLE1BQU1DLFVBQVUsR0FDZCxzQ0FBc0M7RUFDeEMsTUFBTUMsZ0JBQWdCLEdBQUdELFVBQVUsQ0FBQ0YsTUFBTTtFQUMxQyxLQUFLLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osTUFBTSxFQUFFSSxDQUFDLElBQUksQ0FBQyxFQUFFO0lBQ2xDSCxNQUFNLElBQUlDLFVBQVUsQ0FBQ0csTUFBTSxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxNQUFNLEVBQUUsR0FBR0wsZ0JBQWdCLENBQUMsQ0FBQztFQUMzRTtFQUNBLE9BQU9GLE1BQU07QUFDZjtBQUdFUSxPQUFBLENBQUFDLGVBQUEsR0FBQUEsZUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["getUniqueCodev2","length","result","characters","charactersLength","i","charAt","Math","floor","random","exports","getUniqueCodev3"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/Personal/My-projects/user-information/server/src/helper/common.ts"],"sourcesContent":["/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev2(length = 32) {\n  let result = \"\";\n  const characters =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < length; i += 1) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\n/**\n *\n * @param length - Generate Unique Code ( default length 32 )\n */\nfunction getUniqueCodev3(length = 4) {\n    let result = ''\n    const characters =\n      'abcdefghijklmnopqrstuvwxyz0123456789'\n    const charactersLength = characters.length\n    for (let i = 0; i < length; i += 1) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\nexport {\n    getUniqueCodev2,\n    getUniqueCodev3\n  }"],"mappings":";;;;;;AAAA;;;;AAIA,SAASA,eAAeA,CAACC,MAAM,GAAG,EAAE;EAClC,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,gEAAgE;EAClE,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAiBIQ,OAAA,CAAAV,eAAA,GAAAA,eAAA;AAfJ;;;;AAIA,SAASW,eAAeA,CAACV,MAAM,GAAG,CAAC;EAC/B,IAAIC,MAAM,GAAG,EAAE;EACf,MAAMC,UAAU,GACd,sCAAsC;EACxC,MAAMC,gBAAgB,GAAGD,UAAU,CAACF,MAAM;EAC1C,KAAK,IAAII,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,EAAEI,CAAC,IAAI,CAAC,EAAE;IAClCH,MAAM,IAAIC,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAGL,gBAAgB,CAAC,CAAC;EAC3E;EACA,OAAOF,MAAM;AACf;AAGEQ,OAAA,CAAAC,eAAA,GAAAA,eAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\send_email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst fs_1 = __importDefault(require(\"fs\"));\nconst handlebars_1 = __importDefault(require(\"handlebars\"));\nconst path_1 = __importDefault(require(\"path\"));\nconst email_1 = __importDefault(require(\"../config/email\"));\nconst file_1 = require(\"../helper/file\");\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nconst {\n  APP_NAME\n} = process.env;\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nclass SendEmail {\n  static AccountRegister(formData) {\n    const {\n      email\n    } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path_1.default.resolve(__dirname, `../public/template/email/emailverify.html`);\n    const subject = \"MindUp Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.default();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.default.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n  static forgetPassToken(formData, token) {\n    const {\n      email\n    } = formData;\n    const TOKEN = token;\n    const pathTemplate = path_1.default.resolve(__dirname, `../public/template/email/reset-password.html`);\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = {\n      APP_NAME,\n      TOKEN\n    };\n    const Email = new email_1.default();\n    (0, file_1.readHTMLFile)(pathTemplate, (error, html) => {\n      if (error) {\n        throw new response_error_1.default.NotFound(\"email template not found\");\n      }\n      const template = handlebars_1.default.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n}\n_a = SendEmail;\nSendEmail.sendResetPasswordEmail = (email, userName, resetLink) => __awaiter(void 0, void 0, void 0, function* () {\n  // Read the HTML template\n  const templatePath = path_1.default.join(__dirname, 'templates', '../public/template/email/reset-password.html');\n  const template = fs_1.default.readFileSync(templatePath, 'utf-8');\n  // Replace placeholders with actual values\n  const htmlContent = template.replace('{{userName}}', userName).replace(/{{resetLink}}/g, resetLink);\n  // Create a transporter\n  const transporter = nodemailer_1.default.createTransport({\n    host: 'smtp.example.com',\n    port: 587,\n    secure: false,\n    // true for 465, false for other ports\n    auth: {\n      user: 'aliakbaresmaeili98@gmail.com',\n      // your SMTP username\n      pass: 'cgop ttip zuqz hqlr' // your SMTP password\n    }\n  });\n  // Send email\n  const info = yield transporter.sendMail({\n    from: '\"Your Company\" <no-reply@yourcompany.com>',\n    to: email,\n    subject: 'Reset Your Password',\n    html: htmlContent\n  });\n  console.log('Message sent: %s', info.messageId);\n});\nexports.default = SendEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsImhhbmRsZWJhcnNfMSIsInBhdGhfMSIsImVtYWlsXzEiLCJmaWxlXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiQVBQX05BTUUiLCJwcm9jZXNzIiwiZW52Iiwibm9kZW1haWxlcl8xIiwiU2VuZEVtYWlsIiwiQWNjb3VudFJlZ2lzdGVyIiwiZm9ybURhdGEiLCJlbWFpbCIsIlRPS0VOIiwidmVyaWZ5X2NvZGUiLCJwYXRoVGVtcGxhdGUiLCJkZWZhdWx0IiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsInN1YmplY3QiLCJkYXRhVGVtcGxhdGUiLCJFbWFpbCIsInJlYWRIVE1MRmlsZSIsImVycm9yIiwiaHRtbCIsIk5vdEZvdW5kIiwidGVtcGxhdGUiLCJjb21waWxlIiwiaHRtbFRvU2VuZCIsInNlbmQiLCJmb3JnZXRQYXNzVG9rZW4iLCJ0b2tlbiIsInNlbmRSZXNldFBhc3N3b3JkRW1haWwiLCJ1c2VyTmFtZSIsInJlc2V0TGluayIsIl9fYXdhaXRlciIsInRlbXBsYXRlUGF0aCIsImpvaW4iLCJyZWFkRmlsZVN5bmMiLCJodG1sQ29udGVudCIsInJlcGxhY2UiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwiaW5mbyIsInNlbmRNYWlsIiwiZnJvbSIsInRvIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VJZCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2hlbHBlci9zZW5kX2VtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgaGFuZGxlYmFycyBmcm9tIFwiaGFuZGxlYmFyc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBFbWFpbFByb3ZpZGVyIGZyb20gXCIuLi9jb25maWcvZW1haWxcIjtcbmltcG9ydCB7IHJlYWRIVE1MRmlsZSB9IGZyb20gXCIuLi9oZWxwZXIvZmlsZVwiO1xuaW1wb3J0IFJlc3BvbnNlRXJyb3IgZnJvbSBcIi4uL21vZHVsZXMvZXJyb3IvcmVzcG9uc2VfZXJyb3JcIjtcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwiLi4vdHlwZXMvdXNlclwiO1xuY29uc3QgeyBBUFBfTkFNRSB9ID0gcHJvY2Vzcy5lbnY7XG5pbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuXG5jbGFzcyBTZW5kRW1haWwge1xuICBwdWJsaWMgc3RhdGljIEFjY291bnRSZWdpc3Rlcihmb3JtRGF0YTogYW55KSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gICAgY29uc3QgVE9LRU4gPSBmb3JtRGF0YS52ZXJpZnlfY29kZTtcbiAgICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gICAgICBfX2Rpcm5hbWUsXG4gICAgICBgLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL2VtYWlsdmVyaWZ5Lmh0bWxgXG4gICAgKTtcblxuICAgIGNvbnN0IHN1YmplY3QgPSBcIk1pbmRVcCBSZWdpc3RlcmF0aW9uXCI7XG4gICAgLy8gY29uc3QgdXJsVG9rZW4gPSBgJHtCQVNFX1VSTF9DTElFTlR9L2VtYWlsL3ZlcmlmeT90b2tlbj0ke3Rva2VufWBcbiAgICBjb25zdCBkYXRhVGVtcGxhdGUgPSB7IEFQUF9OQU1FLCBUT0tFTiB9O1xuICAgIGNvbnN0IEVtYWlsID0gbmV3IEVtYWlsUHJvdmlkZXIoKTtcblxuICAgIHJlYWRIVE1MRmlsZShwYXRoVGVtcGxhdGUsIChlcnJvcjogRXJyb3IsIGh0bWw6IGFueSkgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBSZXNwb25zZUVycm9yLk5vdEZvdW5kKFwiZW1haWwgdGVtcGxhdGUgbm90IGZvdW5kXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcbiAgICAgIGNvbnN0IGh0bWxUb1NlbmQgPSB0ZW1wbGF0ZShkYXRhVGVtcGxhdGUpO1xuXG4gICAgICBFbWFpbC5zZW5kKGVtYWlsLCBzdWJqZWN0LCBodG1sVG9TZW5kKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZm9yZ2V0UGFzc1Rva2VuKGZvcm1EYXRhOiBVc2VyLCB0b2tlbjogc3RyaW5nKSB7XG4gICAgY29uc3QgeyBlbWFpbCB9ID0gZm9ybURhdGE7XG4gICAgY29uc3QgVE9LRU4gPSB0b2tlbjtcbiAgICBjb25zdCBwYXRoVGVtcGxhdGUgPSBwYXRoLnJlc29sdmUoXG4gICAgICBfX2Rpcm5hbWUsXG4gICAgICBgLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL3Jlc2V0LXBhc3N3b3JkLmh0bWxgXG4gICAgKTtcblxuICAgIGNvbnN0IHN1YmplY3QgPSBcIkFsaXNob3BlZWUgUmVnaXN0ZXJhdGlvblwiO1xuICAgIC8vIGNvbnN0IHVybFRva2VuID0gYCR7QkFTRV9VUkxfQ0xJRU5UfS9lbWFpbC92ZXJpZnk/dG9rZW49JHt0b2tlbn1gXG4gICAgY29uc3QgZGF0YVRlbXBsYXRlID0geyBBUFBfTkFNRSwgVE9LRU4gfTtcbiAgICBjb25zdCBFbWFpbCA9IG5ldyBFbWFpbFByb3ZpZGVyKCk7XG5cbiAgICByZWFkSFRNTEZpbGUocGF0aFRlbXBsYXRlLCAoZXJyb3I6IEVycm9yLCBodG1sOiBhbnkpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5Ob3RGb3VuZChcImVtYWlsIHRlbXBsYXRlIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGVtcGxhdGUgPSBoYW5kbGViYXJzLmNvbXBpbGUoaHRtbCk7XG4gICAgICBjb25zdCBodG1sVG9TZW5kID0gdGVtcGxhdGUoZGF0YVRlbXBsYXRlKTtcbiAgICAgIEVtYWlsLnNlbmQoZW1haWxcbiAgICAgICAgLCBzdWJqZWN0LCBodG1sVG9TZW5kKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgcHVibGljIHN0YXRpYyBzZW5kUmVzZXRQYXNzd29yZEVtYWlsID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHVzZXJOYW1lOiBzdHJpbmcsIHJlc2V0TGluazogc3RyaW5nKSA9PiB7XG4gICAgLy8gUmVhZCB0aGUgSFRNTCB0ZW1wbGF0ZVxuICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IHBhdGguam9pbihfX2Rpcm5hbWUsICd0ZW1wbGF0ZXMnLCAnLi4vcHVibGljL3RlbXBsYXRlL2VtYWlsL3Jlc2V0LXBhc3N3b3JkLmh0bWwnKTtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGZzLnJlYWRGaWxlU3luYyh0ZW1wbGF0ZVBhdGgsICd1dGYtOCcpO1xuICBcbiAgICAvLyBSZXBsYWNlIHBsYWNlaG9sZGVycyB3aXRoIGFjdHVhbCB2YWx1ZXNcbiAgICBjb25zdCBodG1sQ29udGVudCA9IHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3t1c2VyTmFtZX19JywgdXNlck5hbWUpXG4gICAgICAucmVwbGFjZSgve3tyZXNldExpbmt9fS9nLCByZXNldExpbmspO1xuICBcbiAgICAvLyBDcmVhdGUgYSB0cmFuc3BvcnRlclxuICAgIGNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xuICAgICAgaG9zdDogJ3NtdHAuZXhhbXBsZS5jb20nLFxuICAgICAgcG9ydDogNTg3LFxuICAgICAgc2VjdXJlOiBmYWxzZSwgLy8gdHJ1ZSBmb3IgNDY1LCBmYWxzZSBmb3Igb3RoZXIgcG9ydHNcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogJ2FsaWFrYmFyZXNtYWVpbGk5OEBnbWFpbC5jb20nLCAvLyB5b3VyIFNNVFAgdXNlcm5hbWVcbiAgICAgICAgcGFzczogJ2Nnb3AgdHRpcCB6dXF6IGhxbHInLCAvLyB5b3VyIFNNVFAgcGFzc3dvcmRcbiAgICAgIH0sXG4gICAgfSk7XG4gIFxuICAgIC8vIFNlbmQgZW1haWxcbiAgICBjb25zdCBpbmZvID0gYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwoe1xuICAgICAgZnJvbTogJ1wiWW91ciBDb21wYW55XCIgPG5vLXJlcGx5QHlvdXJjb21wYW55LmNvbT4nLFxuICAgICAgdG86IGVtYWlsLFxuICAgICAgc3ViamVjdDogJ1Jlc2V0IFlvdXIgUGFzc3dvcmQnLFxuICAgICAgaHRtbDogaHRtbENvbnRlbnQsXG4gICAgfSk7XG4gIFxuICAgIGNvbnNvbGUubG9nKCdNZXNzYWdlIHNlbnQ6ICVzJywgaW5mby5tZXNzYWdlSWQpO1xuICB9O1xuICBcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VuZEVtYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsWUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxNQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLE9BQUEsR0FBQUosZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUksTUFBQSxHQUFBSixPQUFBO0FBQ0EsTUFBQUssZ0JBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTTtFQUFFTTtBQUFRLENBQUUsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBQ2hDLE1BQUFDLFlBQUEsR0FBQVYsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTVUsU0FBUztFQUNOLE9BQU9DLGVBQWVBLENBQUNDLFFBQWE7SUFDekMsTUFBTTtNQUFFQztJQUFLLENBQUUsR0FBR0QsUUFBUTtJQUMxQixNQUFNRSxLQUFLLEdBQUdGLFFBQVEsQ0FBQ0csV0FBVztJQUNs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","map":{"version":3,"names":["fs_1","__importDefault","require","handlebars_1","path_1","email_1","file_1","response_error_1","APP_NAME","process","env","nodemailer_1","SendEmail","AccountRegister","formData","email","TOKEN","verify_code","pathTemplate","default","resolve","__dirname","subject","dataTemplate","Email","readHTMLFile","error","html","NotFound","template","compile","htmlToSend","send","forgetPassToken","token","sendResetPasswordEmail","userName","resetLink","__awaiter","templatePath","join","readFileSync","htmlContent","replace","transporter","createTransport","host","port","secure","auth","user","pass","info","sendMail","from","to","console","log","messageId","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/Personal/My-projects/user-information/server/src/helper/send_email.ts"],"sourcesContent":["import fs from 'fs';\nimport handlebars from \"handlebars\";\nimport path from \"path\";\nimport EmailProvider from \"../config/email\";\nimport { readHTMLFile } from \"../helper/file\";\nimport ResponseError from \"../modules/error/response_error\";\nimport { User } from \"../types/user\";\nconst { APP_NAME } = process.env;\nimport nodemailer from \"nodemailer\";\n\nclass SendEmail {\n  public static AccountRegister(formData: any) {\n    const { email } = formData;\n    const TOKEN = formData.verify_code;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../public/template/email/emailverify.html`\n    );\n\n    const subject = \"MindUp Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n\n      Email.send(email, subject, htmlToSend);\n    });\n  }\n\n  public static forgetPassToken(formData: User, token: string) {\n    const { email } = formData;\n    const TOKEN = token;\n    const pathTemplate = path.resolve(\n      __dirname,\n      `../public/template/email/reset-password.html`\n    );\n\n    const subject = \"Alishopeee Registeration\";\n    // const urlToken = `${BASE_URL_CLIENT}/email/verify?token=${token}`\n    const dataTemplate = { APP_NAME, TOKEN };\n    const Email = new EmailProvider();\n\n    readHTMLFile(pathTemplate, (error: Error, html: any) => {\n      if (error) {\n        throw new ResponseError.NotFound(\"email template not found\");\n      }\n\n      const template = handlebars.compile(html);\n      const htmlToSend = template(dataTemplate);\n      Email.send(email\n        , subject, htmlToSend);\n    });\n  }\n\n\n  public static sendResetPasswordEmail = async (email: string, userName: string, resetLink: string) => {\n    // Read the HTML template\n    const templatePath = path.join(__dirname, 'templates', '../public/template/email/reset-password.html');\n    const template = fs.readFileSync(templatePath, 'utf-8');\n  \n    // Replace placeholders with actual values\n    const htmlContent = template\n      .replace('{{userName}}', userName)\n      .replace(/{{resetLink}}/g, resetLink);\n  \n    // Create a transporter\n    const transporter = nodemailer.createTransport({\n      host: 'smtp.example.com',\n      port: 587,\n      secure: false, // true for 465, false for other ports\n      auth: {\n        user: 'aliakbaresmaeili98@gmail.com', // your SMTP username\n        pass: 'cgop ttip zuqz hqlr', // your SMTP password\n      },\n    });\n  \n    // Send email\n    const info = await transporter.sendMail({\n      from: '\"Your Company\" <no-reply@yourcompany.com>',\n      to: email,\n      subject: 'Reset Your Password',\n      html: htmlContent,\n    });\n  \n    console.log('Message sent: %s', info.messageId);\n  };\n  \n}\n\nexport default SendEmail;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,YAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,MAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,OAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,MAAAI,MAAA,GAAAJ,OAAA;AACA,MAAAK,gBAAA,GAAAN,eAAA,CAAAC,OAAA;AAEA,MAAM;EAAEM;AAAQ,CAAE,GAAGC,OAAO,CAACC,GAAG;AAChC,MAAAC,YAAA,GAAAV,eAAA,CAAAC,OAAA;AAEA,MAAMU,SAAS;EACN,OAAOC,eAAeA,CAACC,QAAa;IACzC,MAAM;MAAEC;IAAK,CAAE,GAAGD,QAAQ;IAC1B,MAAME,KAAK,GAAGF,QAAQ,CAACG,WAAW;IAClC,MAAMC,YAAY,GAAGd,MAAA,CAAAe,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,2CAA2C,CAC5C;IAED,MAAMC,OAAO,GAAG,sBAAsB;IACtC;IACA,MAAMC,YAAY,GAAG;MAAEf,QAAQ;MAAEQ;IAAK,CAAE;IACxC,MAAMQ,KAAK,GAAG,IAAInB,OAAA,CAAAc,OAAa,EAAE;IAEjC,IAAAb,MAAA,CAAAmB,YAAY,EAACP,YAAY,EAAE,CAACQ,KAAY,EAAEC,IAAS,KAAI;MACrD,IAAID,KAAK,EAAE;QACT,MAAM,IAAInB,gBAAA,CAAAY,OAAa,CAACS,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;MAEA,MAAMC,QAAQ,GAAG1B,YAAA,CAAAgB,OAAU,CAACW,OAAO,CAACH,IAAI,CAAC;MACzC,MAAMI,UAAU,GAAGF,QAAQ,CAACN,YAAY,CAAC;MAEzCC,KAAK,CAACQ,IAAI,CAACjB,KAAK,EAAEO,OAAO,EAAES,UAAU,CAAC;IACxC,CAAC,CAAC;EACJ;EAEO,OAAOE,eAAeA,CAACnB,QAAc,EAAEoB,KAAa;IACzD,MAAM;MAAEnB;IAAK,CAAE,GAAGD,QAAQ;IAC1B,MAAME,KAAK,GAAGkB,KAAK;IACnB,MAAMhB,YAAY,GAAGd,MAAA,CAAAe,OAAI,CAACC,OAAO,CAC/BC,SAAS,EACT,8CAA8C,CAC/C;IAED,MAAMC,OAAO,GAAG,0BAA0B;IAC1C;IACA,MAAMC,YAAY,GAAG;MAAEf,QAAQ;MAAEQ;IAAK,CAAE;IACxC,MAAMQ,KAAK,GAAG,IAAInB,OAAA,CAAAc,OAAa,EAAE;IAEjC,IAAAb,MAAA,CAAAmB,YAAY,EAACP,YAAY,EAAE,CAACQ,KAAY,EAAEC,IAAS,KAAI;MACrD,IAAID,KAAK,EAAE;QACT,MAAM,IAAInB,gBAAA,CAAAY,OAAa,CAACS,QAAQ,CAAC,0BAA0B,CAAC;MAC9D;MAEA,MAAMC,QAAQ,GAAG1B,YAAA,CAAAgB,OAAU,CAACW,OAAO,CAACH,IAAI,CAAC;MACzC,MAAMI,UAAU,GAAGF,QAAQ,CAACN,YAAY,CAAC;MACzCC,KAAK,CAACQ,IAAI,CAACjB,KAAK,EACZO,OAAO,EAAES,UAAU,CAAC;IAC1B,CAAC,CAAC;EACJ;;;AAGcnB,SAAA,CAAAuB,sBAAsB,GAAG,CAAOpB,KAAa,EAAEqB,QAAgB,EAAEC,SAAiB,KAAIC,SAAA;EAClG;EACA,MAAMC,YAAY,GAAGnC,MAAA,CAAAe,OAAI,CAACqB,IAAI,CAACnB,SAAS,EAAE,WAAW,EAAE,8CAA8C,CAAC;EACtG,MAAMQ,QAAQ,GAAG7B,IAAA,CAAAmB,OAAE,CAACsB,YAAY,CAACF,YAAY,EAAE,OAAO,CAAC;EAEvD;EACA,MAAMG,WAAW,GAAGb,QAAQ,CACzBc,OAAO,CAAC,cAAc,EAAEP,QAAQ,CAAC,CACjCO,OAAO,CAAC,gBAAgB,EAAEN,SAAS,CAAC;EAEvC;EACA,MAAMO,WAAW,GAAGjC,YAAA,CAAAQ,OAAU,CAAC0B,eAAe,CAAC;IAC7CC,IAAI,EAAE,kBAAkB;IACxBC,IAAI,EAAE,GAAG;IACTC,MAAM,EAAE,KAAK;IAAE;IACfC,IAAI,EAAE;MACJC,IAAI,EAAE,8BAA8B;MAAE;MACtCC,IAAI,EAAE,qBAAqB,CAAE;;GAEhC,CAAC;EAEF;EACA,MAAMC,IAAI,GAAG,MAAMR,WAAW,CAACS,QAAQ,CAAC;IACtCC,IAAI,EAAE,2CAA2C;IACjDC,EAAE,EAAExC,KAAK;IACTO,OAAO,EAAE,qBAAqB;IAC9BK,IAAI,EAAEe;GACP,CAAC;EAEFc,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEL,IAAI,CAACM,SAAS,CAAC;AACjD,CAAC;AAIHC,OAAA,CAAAxC,OAAA,GAAeP,SAAS","ignoreList":[]}},"mtime":1722081194000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\config\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\config\\\\email.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst lodash_1 = require(\"lodash\");\nconst nodemailer_1 = __importDefault(require(\"nodemailer\"));\nconst nodemailer_mailgun_transport_1 = __importDefault(require(\"nodemailer-mailgun-transport\"));\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL\n} = process.env;\nconst isMailgunAPI = !(0, lodash_1.isEmpty)(MAILGUN_API_KEY) || !(0, lodash_1.isEmpty)(MAILGUN_DOMAIN);\nclass EmailProvider {\n  constructor() {\n    this.send = (to, subject, template) => {\n      const dest = Array.isArray(to) ? to.join(\",\") : to;\n      const text = template;\n      // send an e-mail\n      this.sendMail(dest, subject, text);\n    };\n    this.setMailConfig = () => {\n      // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n      const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n      const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n      const configTransport = {\n        service: MAIL_DRIVER,\n        auth: {\n          user: gmailEmail,\n          pass: gmailAppPassword\n        }\n      };\n      if (isMailgunAPI) {\n        configTransport.auth.api_key = MAILGUN_API_KEY;\n        configTransport.auth.domain = MAILGUN_DOMAIN;\n      } else {\n        // SMTP Default\n        configTransport.host = MAIL_HOST;\n        configTransport.port = MAIL_PORT;\n        configTransport.auth.user = MAIL_USERNAME;\n        configTransport.auth.pass = MAIL_PASSWORD;\n      }\n      return configTransport;\n    };\n    this.setMailOptions = (dest, subject, text) => {\n      return {\n        from: `${APP_NAME} <${MAIL_USERNAME}>`,\n        to: dest,\n        subject,\n        html: text\n      };\n    };\n    this.sendMail = (dest, subject, text) => {\n      this.mailConfig = isMailgunAPI ? (0, nodemailer_mailgun_transport_1.default)(this.setMailConfig()) : this.setMailConfig();\n      this.mailOptions = this.setMailOptions(dest, subject, text);\n      // Nodemailer Transport\n      const transporter = nodemailer_1.default.createTransport(this.mailConfig);\n      transporter.sendMail(this.mailOptions,\n      // @ts-ignore\n      (error, info) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      });\n    };\n  }\n}\nexports.default = EmailProvider;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfMSIsInJlcXVpcmUiLCJub2RlbWFpbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJub2RlbWFpbGVyX21haWxndW5fdHJhbnNwb3J0XzEiLCJBUFBfTkFNRSIsIk1BSUxfRFJJVkVSIiwiTUFJTF9IT1NUIiwiTUFJTF9QT1JUIiwiTUFJTF9VU0VSTkFNRSIsIk1BSUxfUEFTU1dPUkQiLCJNQUlMX0FVVEhfVFlQRSIsIk1BSUxHVU5fQVBJX0tFWSIsIk1BSUxHVU5fRE9NQUlOIiwiT0FVVEhfQ0xJRU5UX0lEIiwiT0FVVEhfQ0xJRU5UX1NFQ1JFVCIsIk9BVVRIX1JFRlJFU0hfVE9LRU4iLCJPQVVUSF9SRURJUkVDVF9VUkwiLCJwcm9jZXNzIiwiZW52IiwiaXNNYWlsZ3VuQVBJIiwiaXNFbXB0eSIsIkVtYWlsUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsInNlbmQiLCJ0byIsInN1YmplY3QiLCJ0ZW1wbGF0ZSIsImRlc3QiLCJBcnJheSIsImlzQXJyYXkiLCJqb2luIiwidGV4dCIsInNlbmRNYWlsIiwic2V0TWFpbENvbmZpZyIsImdtYWlsRW1haWwiLCJnbWFpbEFwcFBhc3N3b3JkIiwiY29uZmlnVHJhbnNwb3J0Iiwic2VydmljZSIsImF1dGgiLCJ1c2VyIiwicGFzcyIsImFwaV9rZXkiLCJkb21haW4iLCJob3N0IiwicG9ydCIsInNldE1haWxPcHRpb25zIiwiZnJvbSIsImh0bWwiLCJtYWlsQ29uZmlnIiwiZGVmYXVsdCIsIm1haWxPcHRpb25zIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbmZpZ1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29uZmlnL2VtYWlsLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRW1wdHkgfSBmcm9tIFwibG9kYXNoXCI7XG5pbXBvcnQgbm9kZW1haWxlciBmcm9tIFwibm9kZW1haWxlclwiO1xuaW1wb3J0IG1nIGZyb20gXCJub2RlbWFpbGVyLW1haWxndW4tdHJhbnNwb3J0XCI7XG5cbmNvbnN0IHtcbiAgQVBQX05BTUUsXG4gIE1BSUxfRFJJVkVSLFxuICBNQUlMX0hPU1QsXG4gIE1BSUxfUE9SVCxcbiAgTUFJTF9VU0VSTkFNRSxcbiAgTUFJTF9QQVNTV09SRCxcbiAgTUFJTF9BVVRIX1RZUEUsXG4gIE1BSUxHVU5fQVBJX0tFWSxcbiAgTUFJTEdVTl9ET01BSU4sXG4gIE9BVVRIX0NMSUVOVF9JRCxcbiAgT0FVVEhfQ0xJRU5UX1NFQ1JFVCxcbiAgT0FVVEhfUkVGUkVTSF9UT0tFTixcbiAgT0FVVEhfUkVESVJFQ1RfVVJMLFxufSA9IHByb2Nlc3MuZW52O1xuXG5jb25zdCBpc01haWxndW5BUEkgPSAhaXNFbXB0eShNQUlMR1VOX0FQSV9LRVkpIHx8ICFpc0VtcHR5KE1BSUxHVU5fRE9NQUlOKTtcblxuY2xhc3MgRW1haWxQcm92aWRlciB7XG4gIHByaXZhdGUgbWFpbENvbmZpZzogbm9kZW1haWxlci5TZW50TWVzc2FnZUluZm87XG4gIHByaXZhdGUgbWFpbE9wdGlvbnM6IG5vZGVtYWlsZXIuU2VuZE1haWxPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gIHB1YmxpYyBzZW5kID0gKFxuICAgIHRvOiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgICBzdWJqZWN0OiBzdHJpbmcsXG4gICAgdGVtcGxhdGU6IHN0cmluZ1xuICApOiB2b2lkIHwgc3RyaW5nW10gPT4ge1xuICAgIGNvbnN0IGRlc3Q6IHN0cmluZyA9IEFycmF5LmlzQXJyYXkodG8pID8gdG8uam9pbihcIixcIikgOiB0bztcbiAgICBjb25zdCB0ZXh0OiBzdHJpbmcgPSB0ZW1wbGF0ZTtcblxuICAgIC8vIHNlbmQgYW4gZS1tYWlsXG4gICAgdGhpcy5zZW5kTWFpbChkZXN0LCBzdWJqZWN0LCB0ZXh0KTtcbiAgfTtcblxuICBwcml2YXRlIHNldE1haWxDb25maWcgPSAoKTogbm9kZW1haWxlci5TZW50TWVzc2FnZUluZm8gPT4ge1xuICAgIC8vIGNvbnN0IGdtYWlsRW1haWwgPSBcImFsaWFrYmFyZXNtYWVpbGk5OEBnbWFpbC5jb21cIjtcbiAgICAvLyBjb25zdCBnbWFpbEFwcFBhc3N3b3JkID0gXCJuZmZ4IGhyZ2IgeG9scSB2c2ZhXCI7XG5cbiAgICAgY29uc3QgZ21haWxFbWFpbCA9IFwiYWxpYWtiYXJlc21hZWlsaTk4QGdtYWlsLmNvbVwiO1xuICAgIGNvbnN0IGdtYWlsQXBwUGFzc3dvcmQgPSBcImNnb3AgdHRpcCB6dXF6IGhxbHJcIjtcbiAgICBjb25zdCBjb25maWdUcmFuc3BvcnQ6IG5vZGVtYWlsZXIuU2VudE1lc3NhZ2VJbmZvID0ge1xuICAgICAgc2VydmljZTogTUFJTF9EUklWRVIsXG4gICAgICBhdXRoOiB7XG4gICAgICAgIHVzZXI6IGdtYWlsRW1haWwsXG4gICAgICAgIHBhc3M6IGdtYWlsQXBwUGFzc3dvcmQsXG4gICAgICB9LFxuICAgIH07XG4gICAgaWYgKGlzTWFpbGd1bkFQSSkge1xuICAgICAgY29uZmlnVHJhbnNwb3J0LmF1dGguYXBpX2tleSA9IE1BSUxHVU5fQVBJX0tFWTtcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5hdXRoLmRvbWFpbiA9IE1BSUxHVU5fRE9NQUlOO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTTVRQIERlZmF1bHRcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5ob3N0ID0gTUFJTF9IT1NUO1xuICAgICAgY29uZmlnVHJhbnNwb3J0LnBvcnQgPSBNQUlMX1BPUlQ7XG4gICAgICBjb25maWdUcmFuc3BvcnQuYXV0aC51c2VyID0gTUFJTF9VU0VSTkFNRTtcbiAgICAgIGNvbmZpZ1RyYW5zcG9ydC5hdXRoLnBhc3MgPSBNQUlMX1BBU1NXT1JEO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnVHJhbnNwb3J0O1xuICB9O1xuXG4gIHByaXZhdGUgc2V0TWFpbE9wdGlvbnMgPSAoXG4gICAgZGVzdDogc3RyaW5nLFxuICAgIHN1YmplY3Q6IHN0cmluZyxcbiAgICB0ZXh0OiBzdHJpbmdcbiAgKTogbm9kZW1haWxlci5TZW5kTWFpbE9wdGlvbnMgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBmcm9tOiBgJHtBUFBfTkFNRX0gPCR7TUFJTF9VU0VSTkFNRX0+YCxcbiAgICAgIHRvOiBkZXN0LFxuICAgICAgc3ViamVjdCxcbiAgICAgIGh0bWw6IHRleHQsXG4gICAgfTtcbiAgfTtcblxuICBwcml2YXRlIHNlbmRNYWlsID0gKFxuICAgIGRlc3Q6IHN0cmluZyxcbiAgICBzdWJqZWN0OiBzdHJpbmcsXG4gICAgdGV4dDogc3RyaW5nXG4gICk6IHZvaWQgfCBzdHJpbmdbXSA9PiB7XG4gICAgdGhpcy5tYWlsQ29uZmlnID0gaXNNYWlsZ3VuQVBJXG4gICAgICA/IG1nKHRoaXMuc2V0TWFpbENvbmZpZygpKVxuICAgICAgOiB0aGlzLnNldE1haWxDb25maWcoKTtcbiAgICB0aGlzLm1haWxPcHRpb25zID0gdGhpcy5zZXRNYWlsT3B0aW9ucyhkZXN0LCBzdWJqZWN0LCB0ZXh0KTtcbiAgICAvLyBOb2RlbWFpbGVyIFRyYW5zcG9ydFxuICAgIGNvbnN0IHRyYW5zcG9ydGVyOiBub2RlbWFpbGVyLlRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoXG4gICAgICB0aGlzLm1haWxDb25maWdcbiAgICApO1xuICAgIHRyYW5zcG9ydGVyLnNlbmRNYWlsKFxuICAgICAgdGhpcy5tYWlsT3B0aW9ucyxcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIChlcnJvcjogRXJyb3IsIGluZm86IG5vZGVtYWlsZXIuU2VudE1lc3NhZ2VJbmZvKSA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NmdWxseVwiLCBpbmZvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IEVtYWlsUHJvdmlkZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxNQUFBQyxZQUFBLEdBQUFDLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFHLDhCQUFBLEdBQUFELGVBQUEsQ0FBQUYsT0FBQTtBQUVBLE1BQU07RUFDSkksUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLFNBQVM7RUFDVEMsU0FBUztFQUNUQyxhQUFhO0VBQ2JDLGFBQWE7RUFDYkMsY0FBYztFQUNkQyxlQUFlO0VBQ2ZDLGNBQWM7RUFDZEMsZUFBZTtFQUNmQyxtQkFBbUI7RUFDbkJDLG1CQUFtQjtFQUNuQkM7QUFBa0IsQ0FDbkIsR0FBR0MsT0FBTyxDQUFDQyxHQUFHO0FBRWYsTUFBTUMsWUFBWSxHQUFHLENBQUMsSUFBQXBCLFFBQUEsQ0FBQXFCLE9BQU8sRUFBQ1QsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFBWixRQUFBLENBQUFxQixPQUFPLEVBQUNSLGNBQWMsQ0FBQztBQUUxRSxNQUFNUyxhQUFhO0VBQW5CQyxZQUFBO0lBSVMsS0FBQUMsSUFBSSxHQUFHLENBQ1pDLEVBQXFCLEVBQ3JCQyxPQUFlLEVBQ2ZDLFFBQWdCLEtBQ0c7TUFDbkIsTUFBTUMsSUFBSSxHQUFXQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0wsRUFBRSxDQUFDLEdBQUdBLEVBQUUsQ0FBQ00sSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHTixFQUFFO01BQzFELE1BQU1PLElBQUksR0FBV0wsUUFBUTtNQUU3QjtNQUNBLElBQUksQ0FBQ00sUUFBUSxDQUFDTCxJQUFJLEVBQUVGLE9BQU8sRUFBRU0sSUFBSSxDQUFDO0lBQ3BDLENBQUM7SUFFTyxLQUFBRSxhQUFhLEdBQUcsTUFBaUM7TUFDdkQ7TUFDQTtNQUVDLE1BQU1DLFVBQVUsR0FBRyw4QkFBOEI7TUFDbEQsTUFBTUMsZ0JBQWdCLEdBQUcscUJBQXFCO01BQzlDLE1BQU1DLGVBQWUsR0FBK0I7UUFDbERDLE9BQU8sRUFBRWhDLFdBQVc7UUFDcEJpQyxJQUFJLEVBQUU7VUFDSkMsSUFBSSxFQUFFTCxVQUFVO1VBQ2hCTSxJQUFJLEVBQUVMOztPQUVUO01BQ0QsSUFBSWhCLFlBQVksRUFBRTtRQUNoQmlCLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDRyxPQUFPLEdBQUc5QixlQUFlO1FBQzlDeUIsZUFBZSxDQUFDRSxJQUFJLENBQUNJLE1BQU0sR0FBRzlCLGNBQWM7TUFDOUMsQ0FBQyxNQUFNO1FBQ0w7UUFDQXdCLGVBQWUsQ0FBQ08sSUFBSSxHQUFHckMsU0FBUztRQUNoQzhCLGVBQWUsQ0FBQ1EsSUFBSSxHQUFHckMsU0FBUztRQUNoQzZCLGVBQWUsQ0FBQ0UsSUFBSSxDQUFDQyxJQUFJLEdBQUcvQixhQUFhO1FBQ3pDNEIsZUFBZSxDQUFDRSxJQUFJLENBQUNFLElBQUksR0FBRy9CLGFBQWE7TUFDM0M7TUFDQSxPQUFPMkIsZUFBZTtJQUN4QixDQUFDO0lBRU8sS0FBQVMsY0FBYyxHQUFHLENBQ3ZCbEIsSUFBWSxFQUNaRixPQUFlLEVBQ2ZNLElBQVksS0FDa0I7TUFDOUIsT0FBTztRQUNMZSxJQUFJLEVBQUUsR0FBRzFDLFFBQVEsS0FBS0ksYUFBYSxHQUFHO1FBQ3RDZ0IsRUFBRSxFQUFFRyxJQUFJO1FBQ1JGLE9BQU87UUFDUHNCLElBQUksRUFBRWhCO09BQ1A7SUFDSCxDQUFDO0lBRU8sS0FBQUMsUUFBUSxHQUFHLENBQ2pCTCxJQUFZLEVBQ1pGLE9BQWUsRUFDZk0sSUFBWSxLQUNPO01BQ25CLElBQUksQ0FBQ2lCLFVBQVUsR0FBRzdCLFlBQVksR0FDMUIsSUFBQWhCLDhCQUFBLENBQUE4QyxPQUFFLEVBQUMsSUFBSSxDQUFDaEIsYUFBYSxFQUFFLENBQUMsR0FDeEIsSUFBSSxDQUFDQSxhQUFhLEVBQUU7TUFDeEIsSUFBSSxDQUFDaUIsV0FBVyxHQUFHLElBQUksQ0FBQ0wsY0FBYyxDQUFDbEIsSUFBSSxFQUFFRixPQUFPLEVBQUVNLElBQUksQ0FBQztNQUMzRDtNQUNBLE1BQU1vQixXQUFXLEdBQTJCbEQsWUFBQSxDQUFBZ0QsT0FBVSxDQUFDRyxlQUFlLENBQ3BFLElBQUksQ0FBQ0osVUFBVSxDQUNoQjtNQUNERyxXQUFXLENBQUNuQixRQUFRLENBQ2xCLElBQUksQ0FBQ2tCLFdBQVc7TUFDaEI7TUFDQSxDQUFDRyxLQUFZLEVBQUVDLElBQWdDLEtBQUk7UUFDakQsSUFBSUQsS0FBSyxFQUFFO1VBQ1RFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxLQUFLLENBQUM7UUFDcEIsQ0FBQyxNQUFNO1VBQ0xFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGNBQWMsRUFBRUYsSUFBSSxDQUFDO1FBQ25DO01BQ0YsQ0FBQyxDQUNGO0lBQ0gsQ0FBQztFQUNIOztBQUVBRyxPQUFBLENBQUFSLE9BQUEsR0FBZTVCLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["lodash_1","require","nodemailer_1","__importDefault","nodemailer_mailgun_transport_1","APP_NAME","MAIL_DRIVER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_AUTH_TYPE","MAILGUN_API_KEY","MAILGUN_DOMAIN","OAUTH_CLIENT_ID","OAUTH_CLIENT_SECRET","OAUTH_REFRESH_TOKEN","OAUTH_REDIRECT_URL","process","env","isMailgunAPI","isEmpty","EmailProvider","constructor","send","to","subject","template","dest","Array","isArray","join","text","sendMail","setMailConfig","gmailEmail","gmailAppPassword","configTransport","service","auth","user","pass","api_key","domain","host","port","setMailOptions","from","html","mailConfig","default","mailOptions","transporter","createTransport","error","info","console","log","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\config\\","sources":["D:/Personal/My-projects/user-information/server/src/config/email.ts"],"sourcesContent":["import { isEmpty } from \"lodash\";\nimport nodemailer from \"nodemailer\";\nimport mg from \"nodemailer-mailgun-transport\";\n\nconst {\n  APP_NAME,\n  MAIL_DRIVER,\n  MAIL_HOST,\n  MAIL_PORT,\n  MAIL_USERNAME,\n  MAIL_PASSWORD,\n  MAIL_AUTH_TYPE,\n  MAILGUN_API_KEY,\n  MAILGUN_DOMAIN,\n  OAUTH_CLIENT_ID,\n  OAUTH_CLIENT_SECRET,\n  OAUTH_REFRESH_TOKEN,\n  OAUTH_REDIRECT_URL,\n} = process.env;\n\nconst isMailgunAPI = !isEmpty(MAILGUN_API_KEY) || !isEmpty(MAILGUN_DOMAIN);\n\nclass EmailProvider {\n  private mailConfig: nodemailer.SentMessageInfo;\n  private mailOptions: nodemailer.SendMailOptions | undefined;\n\n  public send = (\n    to: string | string[],\n    subject: string,\n    template: string\n  ): void | string[] => {\n    const dest: string = Array.isArray(to) ? to.join(\",\") : to;\n    const text: string = template;\n\n    // send an e-mail\n    this.sendMail(dest, subject, text);\n  };\n\n  private setMailConfig = (): nodemailer.SentMessageInfo => {\n    // const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    // const gmailAppPassword = \"nffx hrgb xolq vsfa\";\n\n     const gmailEmail = \"aliakbaresmaeili98@gmail.com\";\n    const gmailAppPassword = \"cgop ttip zuqz hqlr\";\n    const configTransport: nodemailer.SentMessageInfo = {\n      service: MAIL_DRIVER,\n      auth: {\n        user: gmailEmail,\n        pass: gmailAppPassword,\n      },\n    };\n    if (isMailgunAPI) {\n      configTransport.auth.api_key = MAILGUN_API_KEY;\n      configTransport.auth.domain = MAILGUN_DOMAIN;\n    } else {\n      // SMTP Default\n      configTransport.host = MAIL_HOST;\n      configTransport.port = MAIL_PORT;\n      configTransport.auth.user = MAIL_USERNAME;\n      configTransport.auth.pass = MAIL_PASSWORD;\n    }\n    return configTransport;\n  };\n\n  private setMailOptions = (\n    dest: string,\n    subject: string,\n    text: string\n  ): nodemailer.SendMailOptions => {\n    return {\n      from: `${APP_NAME} <${MAIL_USERNAME}>`,\n      to: dest,\n      subject,\n      html: text,\n    };\n  };\n\n  private sendMail = (\n    dest: string,\n    subject: string,\n    text: string\n  ): void | string[] => {\n    this.mailConfig = isMailgunAPI\n      ? mg(this.setMailConfig())\n      : this.setMailConfig();\n    this.mailOptions = this.setMailOptions(dest, subject, text);\n    // Nodemailer Transport\n    const transporter: nodemailer.Transporter = nodemailer.createTransport(\n      this.mailConfig\n    );\n    transporter.sendMail(\n      this.mailOptions,\n      // @ts-ignore\n      (error: Error, info: nodemailer.SentMessageInfo) => {\n        if (error) {\n          console.log(error);\n        } else {\n          console.log(\"successfully\", info);\n        }\n      }\n    );\n  };\n}\n\nexport default EmailProvider;\n"],"mappings":"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","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\file.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteUserPic = exports.readHTMLFile = void 0;\nconst fs_1 = __importDefault(require(\"fs\"));\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path, callback) {\n  fs_1.default.readFile(path, {\n    encoding: \"utf-8\"\n  }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nexports.readHTMLFile = readHTMLFile;\nfunction deleteUserPic(userId) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs_1.default.existsSync(path)) {\n    fs_1.default.unlinkSync(path);\n  }\n}\nexports.deleteUserPic = deleteUserPic;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmc18xIiwiX19pbXBvcnREZWZhdWx0IiwicmVxdWlyZSIsInJlYWRIVE1MRmlsZSIsInBhdGgiLCJjYWxsYmFjayIsImRlZmF1bHQiLCJyZWFkRmlsZSIsImVuY29kaW5nIiwiZXJyIiwiaHRtbCIsImV4cG9ydHMiLCJkZWxldGVVc2VyUGljIiwidXNlcklkIiwiZXhpc3RzU3luYyIsInVubGlua1N5bmMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxoZWxwZXJcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2hlbHBlci9maWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcblxuLyoqXG4gKlxuICogQHBhcmFtIHBhdGggLSBwYXRoIGZpbGUgdGVtcGxhdGUgaHRtbFxuICogQHBhcmFtIGNhbGxiYWNrXG4gKi9cbmZ1bmN0aW9uIHJlYWRIVE1MRmlsZShwYXRoOiBhbnksIGNhbGxiYWNrOiBhbnkpIHtcbiAgZnMucmVhZEZpbGUocGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0sIGZ1bmN0aW9uIChlcnIsIGh0bWwpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsYmFjayhudWxsLCBodG1sKTtcbiAgICB9XG4gIH0pO1xufVxuZnVuY3Rpb24gZGVsZXRlVXNlclBpYyh1c2VySWQ6IHN0cmluZykge1xuICBjb25zdCBwYXRoID0gYHB1YmxpYy9wcm9kdWN0cy8ke3VzZXJJZH0uanBnYDtcbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aCkpIHtcbiAgICBmcy51bmxpbmtTeW5jKHBhdGgpO1xuICB9XG59XG5leHBvcnQgeyByZWFkSFRNTEZpbGUsIGRlbGV0ZVVzZXJQaWMgfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBOzs7OztBQUtBLFNBQVNDLFlBQVlBLENBQUNDLElBQVMsRUFBRUMsUUFBYTtFQUM1Q0wsSUFBQSxDQUFBTSxPQUFFLENBQUNDLFFBQVEsQ0FBQ0gsSUFBSSxFQUFFO0lBQUVJLFFBQVEsRUFBRTtFQUFPLENBQUUsRUFBRSxVQUFVQyxHQUFHLEVBQUVDLElBQUk7SUFDMUQsSUFBSUQsR0FBRyxFQUFFO01BQ1BKLFFBQVEsQ0FBQ0ksR0FBRyxDQUFDO0lBQ2YsQ0FBQyxNQUFNO01BQ0xKLFFBQVEsQ0FBQyxJQUFJLEVBQUVLLElBQUksQ0FBQztJQUN0QjtFQUNGLENBQUMsQ0FBQztBQUNKO0FBT1NDLE9BQUEsQ0FBQVIsWUFBQSxHQUFBQSxZQUFBO0FBTlQsU0FBU1MsYUFBYUEsQ0FBQ0MsTUFBYztFQUNuQyxNQUFNVCxJQUFJLEdBQUcsbUJBQW1CUyxNQUFNLE1BQU07RUFDNUMsSUFBSWIsSUFBQSxDQUFBTSxPQUFFLENBQUNRLFVBQVUsQ0FBQ1YsSUFBSSxDQUFDLEVBQUU7SUFDdkJKLElBQUEsQ0FBQU0sT0FBRSxDQUFDUyxVQUFVLENBQUNYLElBQUksQ0FBQztFQUNyQjtBQUNGO0FBQ3VCTyxPQUFBLENBQUFDLGFBQUEsR0FBQUEsYUFBQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["fs_1","__importDefault","require","readHTMLFile","path","callback","default","readFile","encoding","err","html","exports","deleteUserPic","userId","existsSync","unlinkSync"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/Personal/My-projects/user-information/server/src/helper/file.ts"],"sourcesContent":["import fs from \"fs\";\n\n/**\n *\n * @param path - path file template html\n * @param callback\n */\nfunction readHTMLFile(path: any, callback: any) {\n  fs.readFile(path, { encoding: \"utf-8\" }, function (err, html) {\n    if (err) {\n      callback(err);\n    } else {\n      callback(null, html);\n    }\n  });\n}\nfunction deleteUserPic(userId: string) {\n  const path = `public/products/${userId}.jpg`;\n  if (fs.existsSync(path)) {\n    fs.unlinkSync(path);\n  }\n}\nexport { readHTMLFile, deleteUserPic };\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA;;;;;AAKA,SAASC,YAAYA,CAACC,IAAS,EAAEC,QAAa;EAC5CL,IAAA,CAAAM,OAAE,CAACC,QAAQ,CAACH,IAAI,EAAE;IAAEI,QAAQ,EAAE;EAAO,CAAE,EAAE,UAAUC,GAAG,EAAEC,IAAI;IAC1D,IAAID,GAAG,EAAE;MACPJ,QAAQ,CAACI,GAAG,CAAC;IACf,CAAC,MAAM;MACLJ,QAAQ,CAAC,IAAI,EAAEK,IAAI,CAAC;IACtB;EACF,CAAC,CAAC;AACJ;AAOSC,OAAA,CAAAR,YAAA,GAAAA,YAAA;AANT,SAASS,aAAaA,CAACC,MAAc;EACnC,MAAMT,IAAI,GAAG,mBAAmBS,MAAM,MAAM;EAC5C,IAAIb,IAAA,CAAAM,OAAE,CAACQ,UAAU,CAACV,IAAI,CAAC,EAAE;IACvBJ,IAAA,CAAAM,OAAE,CAACS,UAAU,CAACX,IAAI,CAAC;EACrB;AACF;AACuBO,OAAA,CAAAC,aAAA,GAAAA,aAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\response_error.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nconst internal_server_1 = __importDefault(require(\"./internal_server\"));\nconst unauthorized_1 = __importDefault(require(\"./unauthorized\"));\nconst forbidden_1 = __importDefault(require(\"./forbidden\"));\nconst not_found_1 = __importDefault(require(\"./not_found\"));\nconst bad_request_1 = __importDefault(require(\"./bad_request\"));\nconst ResponseError = {\n  BaseResponse: base_response_1.default,\n  BadRequest: bad_request_1.default,\n  NotFound: not_found_1.default,\n  Forbidden: forbidden_1.default,\n  Unauthorized: unauthorized_1.default,\n  InternalServer: internal_server_1.default\n};\nexports.default = ResponseError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiaW50ZXJuYWxfc2VydmVyXzEiLCJ1bmF1dGhvcml6ZWRfMSIsImZvcmJpZGRlbl8xIiwibm90X2ZvdW5kXzEiLCJiYWRfcmVxdWVzdF8xIiwiUmVzcG9uc2VFcnJvciIsIkJhc2VSZXNwb25zZSIsImRlZmF1bHQiLCJCYWRSZXF1ZXN0IiwiTm90Rm91bmQiLCJGb3JiaWRkZW4iLCJVbmF1dGhvcml6ZWQiLCJJbnRlcm5hbFNlcnZlciIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZVJlc3BvbnNlIGZyb20gJy4vYmFzZV9yZXNwb25zZSc7XG5pbXBvcnQgSW50ZXJuYWxTZXJ2ZXIgZnJvbSAnLi9pbnRlcm5hbF9zZXJ2ZXInO1xuaW1wb3J0IFVuYXV0aG9yaXplZCBmcm9tICcuL3VuYXV0aG9yaXplZCc7XG5pbXBvcnQgRm9yYmlkZGVuIGZyb20gJy4vZm9yYmlkZGVuJztcbmltcG9ydCBOb3RGb3VuZCBmcm9tICcuL25vdF9mb3VuZCc7XG5pbXBvcnQgQmFkUmVxdWVzdCBmcm9tICcuL2JhZF9yZXF1ZXN0JztcblxuY29uc3QgUmVzcG9uc2VFcnJvciA9IHtcbiAgICBCYXNlUmVzcG9uc2UsXG4gICAgQmFkUmVxdWVzdCxcbiAgICBOb3RGb3VuZCxcbiAgICBGb3JiaWRkZW4sXG4gICAgVW5hdXRob3JpemVkLFxuICAgIEludGVybmFsU2VydmVyLFxufVxuXG5leHBvcnQgZGVmYXVsdCBSZXNwb25zZUVycm9yXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLGlCQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFFLGNBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsV0FBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxXQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFLLGFBQUEsR0FBQU4sZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTU0sYUFBYSxHQUFHO0VBQ2xCQyxZQUFZLEVBQVpULGVBQUEsQ0FBQVUsT0FBWTtFQUNaQyxVQUFVLEVBQVZKLGFBQUEsQ0FBQUcsT0FBVTtFQUNWRSxRQUFRLEVBQVJOLFdBQUEsQ0FBQUksT0FBUTtFQUNSRyxTQUFTLEVBQVRSLFdBQUEsQ0FBQUssT0FBUztFQUNUSSxZQUFZLEVBQVpWLGNBQUEsQ0FBQU0sT0FBWTtFQUNaSyxjQUFjLEVBQWRaLGlCQUFBLENBQUFPO0NBQ0g7QUFFRE0sT0FBQSxDQUFBTixPQUFBLEdBQWVGLGFBQWEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","internal_server_1","unauthorized_1","forbidden_1","not_found_1","bad_request_1","ResponseError","BaseResponse","default","BadRequest","NotFound","Forbidden","Unauthorized","InternalServer","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/response_error.ts"],"sourcesContent":["import BaseResponse from './base_response';\nimport InternalServer from './internal_server';\nimport Unauthorized from './unauthorized';\nimport Forbidden from './forbidden';\nimport NotFound from './not_found';\nimport BadRequest from './bad_request';\n\nconst ResponseError = {\n    BaseResponse,\n    BadRequest,\n    NotFound,\n    Forbidden,\n    Unauthorized,\n    InternalServer,\n}\n\nexport default ResponseError\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,iBAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,cAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,WAAA,GAAAJ,eAAA,CAAAC,OAAA;AACA,MAAAI,WAAA,GAAAL,eAAA,CAAAC,OAAA;AACA,MAAAK,aAAA,GAAAN,eAAA,CAAAC,OAAA;AAEA,MAAMM,aAAa,GAAG;EAClBC,YAAY,EAAZT,eAAA,CAAAU,OAAY;EACZC,UAAU,EAAVJ,aAAA,CAAAG,OAAU;EACVE,QAAQ,EAARN,WAAA,CAAAI,OAAQ;EACRG,SAAS,EAATR,WAAA,CAAAK,OAAS;EACTI,YAAY,EAAZV,cAAA,CAAAM,OAAY;EACZK,cAAc,EAAdZ,iBAAA,CAAAO;CACH;AAEDM,OAAA,CAAAN,OAAA,GAAeF,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\base_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nclass BaseResponse extends Error {\n  constructor(message, starusCode = 500) {\n    super(message);\n    this.message = message;\n    this.statusCode = starusCode;\n    Object.setPrototypeOf(this, BaseResponse.prototype);\n  }\n}\nexports.default = BaseResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlUmVzcG9uc2UiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsInN0YXJ1c0NvZGUiLCJzdGF0dXNDb2RlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL2Jhc2VfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQmFzZVJlc3BvbnNlIGV4dGVuZHMgRXJyb3Ige1xuICAgIHB1YmxpYyBzdGF0dXNDb2RlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcsIHN0YXJ1c0NvZGUgPSA1MDApIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSlcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhcnVzQ29kZTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEJhc2VSZXNwb25zZS5wcm90b3R5cGUpXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlUmVzcG9uc2U7Il0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLFlBQWEsU0FBUUMsS0FBSztFQUc1QkMsWUFBWUMsT0FBZSxFQUFFQyxVQUFVLEdBQUcsR0FBRztJQUN6QyxLQUFLLENBQUNELE9BQU8sQ0FBQztJQUNkLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxPQUFPO0lBQ3RCLElBQUksQ0FBQ0UsVUFBVSxHQUFHRCxVQUFVO0lBQzVCRSxNQUFNLENBQUNDLGNBQWMsQ0FBQyxJQUFJLEVBQUVQLFlBQVksQ0FBQ1EsU0FBUyxDQUFDO0VBQ3ZEOztBQUdKQyxPQUFBLENBQUFDLE9BQUEsR0FBZVYsWUFBWSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["BaseResponse","Error","constructor","message","starusCode","statusCode","Object","setPrototypeOf","prototype","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/base_response.ts"],"sourcesContent":["class BaseResponse extends Error {\n    public statusCode: number;\n\n    constructor(message: string, starusCode = 500) {\n        super(message)\n        this.message = message;\n        this.statusCode = starusCode;\n        Object.setPrototypeOf(this, BaseResponse.prototype)\n    }\n}\n\nexport default BaseResponse;"],"mappings":";;;;;AAAA,MAAMA,YAAa,SAAQC,KAAK;EAG5BC,YAAYC,OAAe,EAAEC,UAAU,GAAG,GAAG;IACzC,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACE,UAAU,GAAGD,UAAU;IAC5BE,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEP,YAAY,CAACQ,SAAS,CAAC;EACvD;;AAGJC,OAAA,CAAAC,OAAA,GAAeV,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\internal_server.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass InternalServer extends base_response_1.default {\n  constructor(message) {\n    super(message, 500);\n    Object.setPrototypeOf(this, InternalServer.prototype);\n  }\n}\nexports.default = InternalServer;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiSW50ZXJuYWxTZXJ2ZXIiLCJkZWZhdWx0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3IvaW50ZXJuYWxfc2VydmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlUmVzcG9uc2UgZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xuXG5jbGFzcyBJbnRlcm5hbFNlcnZlciBleHRlbmRzIEJhc2VSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIDUwMCk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBJbnRlcm5hbFNlcnZlci5wcm90b3R5cGUpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJuYWxTZXJ2ZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLGNBQWUsU0FBUUgsZUFBQSxDQUFBSSxPQUFZO0VBQ3JDQyxZQUFZQyxPQUFlO0lBQ3ZCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFLEdBQUcsQ0FBQztJQUNuQkMsTUFBTSxDQUFDQyxjQUFjLENBQUMsSUFBSSxFQUFFTCxjQUFjLENBQUNNLFNBQVMsQ0FBQztFQUN6RDs7QUFHSkMsT0FBQSxDQUFBTixPQUFBLEdBQWVELGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["base_response_1","__importDefault","require","InternalServer","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/internal_server.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass InternalServer extends BaseResponse {\n    constructor(message: string) {\n        super(message, 500);\n        Object.setPrototypeOf(this, InternalServer.prototype);\n    }\n}\n\nexport default InternalServer"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,cAAe,SAAQH,eAAA,CAAAI,OAAY;EACrCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,cAAc,CAACM,SAAS,CAAC;EACzD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,cAAc","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\unauthorized.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass Unauthorized extends base_response_1.default {\n  constructor(message) {\n    super(message, 401);\n    Object.setPrototypeOf(this, Unauthorized.prototype);\n  }\n}\nexports.default = Unauthorized;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiVW5hdXRob3JpemVkIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1vZHVsZXNcXGVycm9yXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9tb2R1bGVzL2Vycm9yL3VuYXV0aG9yaXplZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZVJlc3BvbnNlIGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIlxuXG5jbGFzcyBVbmF1dGhvcml6ZWQgZXh0ZW5kcyBCYXNlUmVzcG9uc2Uge1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICBzdXBlcihtZXNzYWdlLCA0MDEpO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgVW5hdXRob3JpemVkLnByb3RvdHlwZSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBVbmF1dGhvcml6ZWQ7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxZQUFhLFNBQVFILGVBQUEsQ0FBQUksT0FBWTtFQUNuQ0MsWUFBWUMsT0FBZTtJQUN2QixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7SUFDbkJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsWUFBWSxDQUFDTSxTQUFTLENBQUM7RUFDdkQ7O0FBR0pDLE9BQUEsQ0FBQU4sT0FBQSxHQUFlRCxZQUFZIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","__importDefault","require","Unauthorized","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/unauthorized.ts"],"sourcesContent":["import BaseResponse from \"./base_response\"\n\nclass Unauthorized extends BaseResponse {\n    constructor(message: string) {\n        super(message, 401);\n        Object.setPrototypeOf(this, Unauthorized.prototype);\n    }\n}\n\nexport default Unauthorized;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,YAAa,SAAQH,eAAA,CAAAI,OAAY;EACnCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,YAAY,CAACM,SAAS,CAAC;EACvD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\forbidden.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass Forbidden extends base_response_1.default {\n  constructor(messsage) {\n    super(messsage, 403);\n    Object.setPrototypeOf(this, Forbidden.prototype);\n  }\n}\nexports.default = Forbidden;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiRm9yYmlkZGVuIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwibWVzc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9mb3JiaWRkZW4udHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VSZXNwb25zZSBmcm9tIFwiLi9iYXNlX3Jlc3BvbnNlXCJcblxuY2xhc3MgRm9yYmlkZGVuIGV4dGVuZHMgQmFzZVJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NzYWdlLCA0MDMpXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGb3JiaWRkZW4ucHJvdG90eXBlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcmJpZGRlbjsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLFNBQVUsU0FBUUgsZUFBQSxDQUFBSSxPQUFZO0VBQ2hDQyxZQUFZQyxRQUFnQjtJQUN4QixLQUFLLENBQUNBLFFBQVEsRUFBRSxHQUFHLENBQUM7SUFDcEJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsU0FBUyxDQUFDTSxTQUFTLENBQUM7RUFDcEQ7O0FBR0pDLE9BQUEsQ0FBQU4sT0FBQSxHQUFlRCxTQUFTIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","__importDefault","require","Forbidden","default","constructor","messsage","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/forbidden.ts"],"sourcesContent":["import BaseResponse from \"./base_response\"\n\nclass Forbidden extends BaseResponse {\n    constructor(messsage: string) {\n        super(messsage, 403)\n        Object.setPrototypeOf(this, Forbidden.prototype);\n    }\n}\n\nexport default Forbidden;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,SAAU,SAAQH,eAAA,CAAAI,OAAY;EAChCC,YAAYC,QAAgB;IACxB,KAAK,CAACA,QAAQ,EAAE,GAAG,CAAC;IACpBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,SAAS,CAACM,SAAS,CAAC;EACpD;;AAGJC,OAAA,CAAAN,OAAA,GAAeD,SAAS","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\not_found.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass NotFound extends base_response_1.default {\n  constructor(message) {\n    super(message, 404);\n    Object.setPrototypeOf(this, NotFound.prototype);\n  }\n}\nexports.default = NotFound;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiTm90Rm91bmQiLCJkZWZhdWx0IiwiY29uc3RydWN0b3IiLCJtZXNzYWdlIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbW9kdWxlc1xcZXJyb3JcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21vZHVsZXMvZXJyb3Ivbm90X2ZvdW5kLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlUmVzcG9uc2UgZnJvbSBcIi4vYmFzZV9yZXNwb25zZVwiO1xuXG5jbGFzcyBOb3RGb3VuZCBleHRlbmRzIEJhc2VSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwNCk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBOb3RGb3VuZC5wcm90b3R5cGUpXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgTm90Rm91bmQ7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxRQUFTLFNBQVFILGVBQUEsQ0FBQUksT0FBWTtFQUMvQkMsWUFBWUMsT0FBZTtJQUN2QixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7SUFDbkJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsUUFBUSxDQUFDTSxTQUFTLENBQUM7RUFDbkQ7O0FBRUpDLE9BQUEsQ0FBQU4sT0FBQSxHQUFlRCxRQUFRIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","__importDefault","require","NotFound","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/not_found.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass NotFound extends BaseResponse {\n    constructor(message: string) {\n        super(message, 404);\n        Object.setPrototypeOf(this, NotFound.prototype)\n    }\n}\nexport default NotFound;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,QAAS,SAAQH,eAAA,CAAAI,OAAY;EAC/BC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,QAAQ,CAACM,SAAS,CAAC;EACnD;;AAEJC,OAAA,CAAAN,OAAA,GAAeD,QAAQ","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\modules\\\\error\\\\bad_request.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst base_response_1 = __importDefault(require(\"./base_response\"));\nclass BadRequest extends base_response_1.default {\n  constructor(message) {\n    super(message, 400);\n    Object.setPrototypeOf(this, BadRequest.prototype);\n  }\n}\nexports.default = BadRequest;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJiYXNlX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiQmFkUmVxdWVzdCIsImRlZmF1bHQiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtb2R1bGVzXFxlcnJvclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbW9kdWxlcy9lcnJvci9iYWRfcmVxdWVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZVJlc3BvbnNlIGZyb20gXCIuL2Jhc2VfcmVzcG9uc2VcIjtcblxuY2xhc3MgQmFkUmVxdWVzdCBleHRlbmRzIEJhc2VSZXNwb25zZSB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIDQwMClcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEJhZFJlcXVlc3QucHJvdG90eXBlKVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IEJhZFJlcXVlc3Q7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFNQyxVQUFXLFNBQVFILGVBQUEsQ0FBQUksT0FBWTtFQUNqQ0MsWUFBWUMsT0FBZTtJQUN2QixLQUFLLENBQUNBLE9BQU8sRUFBRSxHQUFHLENBQUM7SUFDbkJDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDLElBQUksRUFBRUwsVUFBVSxDQUFDTSxTQUFTLENBQUM7RUFDckQ7O0FBRUpDLE9BQUEsQ0FBQU4sT0FBQSxHQUFlRCxVQUFVIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["base_response_1","__importDefault","require","BadRequest","default","constructor","message","Object","setPrototypeOf","prototype","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\modules\\error\\","sources":["D:/Personal/My-projects/user-information/server/src/modules/error/bad_request.ts"],"sourcesContent":["import BaseResponse from \"./base_response\";\n\nclass BadRequest extends BaseResponse {\n    constructor(message: string) {\n        super(message, 400)\n        Object.setPrototypeOf(this, BadRequest.prototype)\n    }\n}\nexport default BadRequest;"],"mappings":";;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,UAAW,SAAQH,eAAA,CAAAI,OAAY;EACjCC,YAAYC,OAAe;IACvB,KAAK,CAACA,OAAO,EAAE,GAAG,CAAC;IACnBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEL,UAAU,CAACM,SAAS,CAAC;EACrD;;AAEJC,OAAA,CAAAN,OAAA,GAAeD,UAAU","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\use_validation.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction useValidation(schema, value, options) {\n  return schema.validateSync(value, Object.assign({\n    abortEarly: false,\n    stripUnknown: true\n  }, options));\n}\nexports.default = useValidation;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1c2VWYWxpZGF0aW9uIiwic2NoZW1hIiwidmFsdWUiLCJvcHRpb25zIiwidmFsaWRhdGVTeW5jIiwiT2JqZWN0IiwiYXNzaWduIiwiYWJvcnRFYXJseSIsInN0cmlwVW5rbm93biIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcaGVscGVyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9oZWxwZXIvdXNlX3ZhbGlkYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgeyBTY2hlbWEsIFZhbGlkYXRlT3B0aW9ucyB9IGZyb20gJ3l1cCdcblxuXG5mdW5jdGlvbiB1c2VWYWxpZGF0aW9uPFQ+KFxuICBzY2hlbWE6IFNjaGVtYTxUPixcbiAgdmFsdWU6IFQgfCBhbnksXG4gIG9wdGlvbnM/OiBWYWxpZGF0ZU9wdGlvbnNcbik6IFQge1xuICByZXR1cm4gc2NoZW1hLnZhbGlkYXRlU3luYyh2YWx1ZSwge1xuICAgIGFib3J0RWFybHk6IGZhbHNlLFxuICAgIHN0cmlwVW5rbm93bjogdHJ1ZSxcbiAgICAuLi5vcHRpb25zLFxuICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VWYWxpZGF0aW9uXG4iXSwibWFwcGluZ3MiOiI7Ozs7O0FBSUEsU0FBU0EsYUFBYUEsQ0FDcEJDLE1BQWlCLEVBQ2pCQyxLQUFjLEVBQ2RDLE9BQXlCO0VBRXpCLE9BQU9GLE1BQU0sQ0FBQ0csWUFBWSxDQUFDRixLQUFLLEVBQUFHLE1BQUEsQ0FBQUMsTUFBQTtJQUM5QkMsVUFBVSxFQUFFLEtBQUs7SUFDakJDLFlBQVksRUFBRTtFQUFJLEdBQ2ZMLE9BQU8sRUFDVjtBQUNKO0FBRUFNLE9BQUEsQ0FBQUMsT0FBQSxHQUFlVixhQUFhIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["useValidation","schema","value","options","validateSync","Object","assign","abortEarly","stripUnknown","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/Personal/My-projects/user-information/server/src/helper/use_validation.ts"],"sourcesContent":["\nimport { Schema, ValidateOptions } from 'yup'\n\n\nfunction useValidation<T>(\n  schema: Schema<T>,\n  value: T | any,\n  options?: ValidateOptions\n): T {\n  return schema.validateSync(value, {\n    abortEarly: false,\n    stripUnknown: true,\n    ...options,\n  })\n}\n\nexport default useValidation\n"],"mappings":";;;;;AAIA,SAASA,aAAaA,CACpBC,MAAiB,EACjBC,KAAc,EACdC,OAAyB;EAEzB,OAAOF,MAAM,CAACG,YAAY,CAACF,KAAK,EAAAG,MAAA,CAAAC,MAAA;IAC9BC,UAAU,EAAE,KAAK;IACjBC,YAAY,EAAE;EAAI,GACfL,OAAO,EACV;AACJ;AAEAM,OAAA,CAAAC,OAAA,GAAeV,aAAa","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\auth\\\\schema.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup = __importStar(require(\"yup\"));\nconst register = yup.object().shape({\n  userName: yup.string().required('userName is required'),\n  // lastName: yup.string().required('lastName is required'),\n  // nickName: yup.string().required('nickName is required'),\n  email: yup.string().email('invalid email').required('email is required'),\n  // phoneNumber: yup.string().nullable(),\n  tokenVerify: yup.string().nullable(),\n  password: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n  confirmPassword: yup.string().min(8, 'at least 8 charecters').oneOf([yup.ref('password')], 'password are not the same')\n});\nconst login = yup.object().shape({\n  email: yup.string().required('email is required'),\n  password: yup.string().required('password is required')\n}).required();\nexports.default = {\n  register,\n  login\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXAiLCJfX2ltcG9ydFN0YXIiLCJyZXF1aXJlIiwicmVnaXN0ZXIiLCJvYmplY3QiLCJzaGFwZSIsInVzZXJOYW1lIiwic3RyaW5nIiwicmVxdWlyZWQiLCJlbWFpbCIsInRva2VuVmVyaWZ5IiwibnVsbGFibGUiLCJwYXNzd29yZCIsIm1pbiIsIm9uZU9mIiwicmVmIiwiY29uZmlybVBhc3N3b3JkIiwibG9naW4iLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGF1dGhcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXV0aC9zY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeXVwIGZyb20gJ3l1cCc7XG5cbmNvbnN0IHJlZ2lzdGVyID0geXVwLm9iamVjdCgpLnNoYXBlKHtcbiAgICB1c2VyTmFtZTogeXVwLnN0cmluZygpLnJlcXVpcmVkKCd1c2VyTmFtZSBpcyByZXF1aXJlZCcpLFxuICAgIC8vIGxhc3ROYW1lOiB5dXAuc3RyaW5nKCkucmVxdWlyZWQoJ2xhc3ROYW1lIGlzIHJlcXVpcmVkJyksXG4gICAgLy8gbmlja05hbWU6IHl1cC5zdHJpbmcoKS5yZXF1aXJlZCgnbmlja05hbWUgaXMgcmVxdWlyZWQnKSxcbiAgICBlbWFpbDogeXVwLnN0cmluZygpLmVtYWlsKCdpbnZhbGlkIGVtYWlsJykucmVxdWlyZWQoJ2VtYWlsIGlzIHJlcXVpcmVkJyksXG4gICAgLy8gcGhvbmVOdW1iZXI6IHl1cC5zdHJpbmcoKS5udWxsYWJsZSgpLFxuICAgIHRva2VuVmVyaWZ5OiB5dXAuc3RyaW5nKCkubnVsbGFibGUoKSxcbiAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLm1pbig4LCAnYXQgbGVhc3QgOCBjaGFyZWN0ZXJzJylcbiAgICAgICAgLm9uZU9mKFt5dXAucmVmKCdjb25maXJtUGFzc3dvcmQnKV0sICdwYXNzd29yZCBhcmUgbm90IHRoZSBzYW1lJyksXG4gICAgY29uZmlybVBhc3N3b3JkOiB5dXAuc3RyaW5nKCkubWluKDgsICdhdCBsZWFzdCA4IGNoYXJlY3RlcnMnKVxuICAgICAgICAub25lT2YoW3l1cC5yZWYoJ3Bhc3N3b3JkJyldLCAncGFzc3dvcmQgYXJlIG5vdCB0aGUgc2FtZScpXG59KTtcblxuY29uc3QgbG9naW4gPSB5dXAub2JqZWN0KClcbiAgICAuc2hhcGUoe1xuICAgICAgICBlbWFpbDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdlbWFpbCBpcyByZXF1aXJlZCcpLFxuICAgICAgICBwYXNzd29yZDogeXVwLnN0cmluZygpLnJlcXVpcmVkKCdwYXNzd29yZCBpcyByZXF1aXJlZCcpLFxuICAgIH0pLnJlcXVpcmVkKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHsgcmVnaXN0ZXIsIGxvZ2luIH0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLEdBQUEsR0FBQUMsWUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsUUFBUSxHQUFHSCxHQUFHLENBQUNJLE1BQU0sRUFBRSxDQUFDQyxLQUFLLENBQUM7RUFDaENDLFFBQVEsRUFBRU4sR0FBRyxDQUFDTyxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQixDQUFDO0VBQ3ZEO0VBQ0E7RUFDQUMsS0FBSyxFQUFFVCxHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDRSxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUNELFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztFQUN4RTtFQUNBRSxXQUFXLEVBQUVWLEdBQUcsQ0FBQ08sTUFBTSxFQUFFLENBQUNJLFFBQVEsRUFBRTtFQUNwQ0MsUUFBUSxFQUFFWixHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDTSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQ2pEQyxLQUFLLENBQUMsQ0FBQ2QsR0FBRyxDQUFDZSxHQUFHLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLDJCQUEyQixDQUFDO0VBQ3JFQyxlQUFlLEVBQUVoQixHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDTSxHQUFHLENBQUMsQ0FBQyxFQUFFLHVCQUF1QixDQUFDLENBQ3hEQyxLQUFLLENBQUMsQ0FBQ2QsR0FBRyxDQUFDZSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSwyQkFBMkI7Q0FDaEUsQ0FBQztBQUVGLE1BQU1FLEtBQUssR0FBR2pCLEdBQUcsQ0FBQ0ksTUFBTSxFQUFFLENBQ3JCQyxLQUFLLENBQUM7RUFDSEksS0FBSyxFQUFFVCxHQUFHLENBQUNPLE1BQU0sRUFBRSxDQUFDQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7RUFDakRJLFFBQVEsRUFBRVosR0FBRyxDQUFDTyxNQUFNLEVBQUUsQ0FBQ0MsUUFBUSxDQUFDLHNCQUFzQjtDQUN6RCxDQUFDLENBQUNBLFFBQVEsRUFBRTtBQUVqQlUsT0FBQSxDQUFBQyxPQUFBLEdBQWU7RUFBRWhCLFFBQVE7RUFBRWM7QUFBSyxDQUFFIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["yup","__importStar","require","register","object","shape","userName","string","required","email","tokenVerify","nullable","password","min","oneOf","ref","confirmPassword","login","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\auth\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/auth/schema.ts"],"sourcesContent":["import * as yup from 'yup';\n\nconst register = yup.object().shape({\n    userName: yup.string().required('userName is required'),\n    // lastName: yup.string().required('lastName is required'),\n    // nickName: yup.string().required('nickName is required'),\n    email: yup.string().email('invalid email').required('email is required'),\n    // phoneNumber: yup.string().nullable(),\n    tokenVerify: yup.string().nullable(),\n    password: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('confirmPassword')], 'password are not the same'),\n    confirmPassword: yup.string().min(8, 'at least 8 charecters')\n        .oneOf([yup.ref('password')], 'password are not the same')\n});\n\nconst login = yup.object()\n    .shape({\n        email: yup.string().required('email is required'),\n        password: yup.string().required('password is required'),\n    }).required();\n\nexport default { register, login }"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,GAAA,GAAAC,YAAA,CAAAC,OAAA;AAEA,MAAMC,QAAQ,GAAGH,GAAG,CAACI,MAAM,EAAE,CAACC,KAAK,CAAC;EAChCC,QAAQ,EAAEN,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB,CAAC;EACvD;EACA;EACAC,KAAK,EAAET,GAAG,CAACO,MAAM,EAAE,CAACE,KAAK,CAAC,eAAe,CAAC,CAACD,QAAQ,CAAC,mBAAmB,CAAC;EACxE;EACAE,WAAW,EAAEV,GAAG,CAACO,MAAM,EAAE,CAACI,QAAQ,EAAE;EACpCC,QAAQ,EAAEZ,GAAG,CAACO,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACjDC,KAAK,CAAC,CAACd,GAAG,CAACe,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,2BAA2B,CAAC;EACrEC,eAAe,EAAEhB,GAAG,CAACO,MAAM,EAAE,CAACM,GAAG,CAAC,CAAC,EAAE,uBAAuB,CAAC,CACxDC,KAAK,CAAC,CAACd,GAAG,CAACe,GAAG,CAAC,UAAU,CAAC,CAAC,EAAE,2BAA2B;CAChE,CAAC;AAEF,MAAME,KAAK,GAAGjB,GAAG,CAACI,MAAM,EAAE,CACrBC,KAAK,CAAC;EACHI,KAAK,EAAET,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,mBAAmB,CAAC;EACjDI,QAAQ,EAAEZ,GAAG,CAACO,MAAM,EAAE,CAACC,QAAQ,CAAC,sBAAsB;CACzD,CAAC,CAACA,QAAQ,EAAE;AAEjBU,OAAA,CAAAC,OAAA,GAAe;EAAEhB,QAAQ;EAAEc;AAAK,CAAE","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\sercvice.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nconst use_validation_1 = __importDefault(require(\"../../helper/use_validation\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst schema_1 = __importDefault(require(\"./schema\"));\nconst send_email_1 = __importDefault(require(\"../../helper/send_email\"));\nconst common_1 = require(\"../../helper/common\");\nconst jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\nconst ms_1 = __importDefault(require(\"ms\"));\nconst response_error_1 = __importDefault(require(\"../../modules/error/response_error\"));\nconst {\n  JWT_SECRET_ACCESS_TOKEN,\n  JWT_SECRET_REFRESH_TOKEN\n} = process.env;\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\nconst expiresIn = (0, ms_1.default)(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\nclass UserService {\n  static getUserInfo(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield (0, db_1.getUserInfo)(email);\n    });\n  }\n  /**\n   * @param email\n   */\n  static validateUserEmail(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkUserExist)(email);\n      if (data.length) {\n        return data[0];\n      }\n      return null;\n    });\n  }\n  /**\n   * @param formData\n   */\n  static confrimEmail(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const userData = (0, use_validation_1.default)(schema_1.default.confirmEmail, formData);\n      const confirmEmailResult = yield (0, db_1.confirmEmail)(userData);\n      return app_response_1.default.appResponse(confirmEmailResult);\n    });\n  }\n  /**\n   * @param formData\n   */\n  static getVerifyCode(userData, tokenVerify) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const userData = useValidation(schemaUser.confirmEmail,userData)\n      const result = yield (0, db_1.getOTP)(userData, tokenVerify);\n      send_email_1.default.AccountRegister(result);\n      if (result) {\n        return result;\n      }\n      return null;\n    });\n  }\n  /**\n   * @param email\n   */\n  static changePassword(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const userEmail = email;\n    });\n  }\n  /**\n   * @param userData\n   */\n  static updateProfileuser(userData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      // const currentUser = await UserService.validateUserEmail(userData.email);\n      // if (currentUser) {\n      //   return { message: \"the user already exist !\", code: 400, currentUser };\n      // }\n      const generateToken = {\n        code: (0, common_1.getUniqueCodev2)()\n      };\n      const tokenVerify = jsonwebtoken_1.default.sign(JSON.parse(JSON.stringify(generateToken)), JWT_SECRET_ACCESS_TOKEN, {\n        expiresIn\n      });\n      userData.verify_code = (0, common_1.getUniqueCodev3)();\n      userData.tokenVerify = tokenVerify;\n      const result = yield (0, db_1.updateProfileUser)(userData);\n      if (!result) {\n        throw new response_error_1.default.BadRequest(\"Could not update user!\");\n      } else {\n        return {\n          message: null,\n          updateuser: {\n            user: result\n          }\n        };\n      }\n    });\n  }\n  /**\n   * @param email\n   */\n  static checkNickName(nickName) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const getData = yield (0, db_1.checkNickName)();\n      if (getData[0].nickName === nickName) {\n        throw new response_error_1.default.BadRequest(\"The nickName is alreay exist!\");\n      } else {\n        return;\n      }\n    });\n  }\n  static sendFrogetPasswordToken(email) {\n    return __awaiter(this, void 0, void 0, function* () {\n      (0, use_validation_1.default)(schema_1.default.checkEmail, {\n        email: email\n      });\n      const currentUser = yield UserService.validateUserEmail(email);\n      if (!currentUser) return {\n        status: 1,\n        message: \"email is not valid !\"\n      };\n      if (currentUser.emailConfirmed === 0) return {\n        status: 2,\n        message: \"this email address is not confirmed yet !\"\n      };\n      if (currentUser.signupStatus === 0) return {\n        status: 3,\n        message: \"signup process is not complete yet !\"\n      };\n      // TODO for fix isActive to boolean\n      if (currentUser.isActive === 0) return {\n        status: 4,\n        message: \"this account is not active !\"\n      };\n      const newCode = (0, common_1.getUniqueCodev3)();\n      yield (0, db_1.updateUserVerifyCode)(currentUser.user_id, newCode);\n      // send forgot pass token code\n      // SendMail.sendResetPasswordEmail(currentUser, newCode);\n      return {\n        status: 5,\n        message: \"code has been send successfully !\"\n      };\n    });\n  }\n}\nexports.default = UserService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsInVzZV92YWxpZGF0aW9uXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJhcHBfcmVzcG9uc2VfMSIsInNjaGVtYV8xIiwic2VuZF9lbWFpbF8xIiwiY29tbW9uXzEiLCJqc29ud2VidG9rZW5fMSIsIm1zXzEiLCJyZXNwb25zZV9lcnJvcl8xIiwiSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4iLCJKV1RfU0VDUkVUX1JFRlJFU0hfVE9LRU4iLCJwcm9jZXNzIiwiZW52IiwiSldUX0FDQ0VTU19UT0tFTl9FWFBJUkVEIiwiZXhwaXJlc0luIiwiZGVmYXVsdCIsIlVzZXJTZXJ2aWNlIiwiZ2V0VXNlckluZm8iLCJlbWFpbCIsInZhbGlkYXRlVXNlckVtYWlsIiwiZGF0YSIsImNoZWNrVXNlckV4aXN0IiwibGVuZ3RoIiwiY29uZnJpbUVtYWlsIiwiZm9ybURhdGEiLCJ1c2VyRGF0YSIsImNvbmZpcm1FbWFpbCIsImNvbmZpcm1FbWFpbFJlc3VsdCIsImFwcFJlc3BvbnNlIiwiZ2V0VmVyaWZ5Q29kZSIsInRva2VuVmVyaWZ5IiwicmVzdWx0IiwiZ2V0T1RQIiwiQWNjb3VudFJlZ2lzdGVyIiwiY2hhbmdlUGFzc3dvcmQiLCJ1c2VyRW1haWwiLCJ1cGRhdGVQcm9maWxldXNlciIsImdlbmVyYXRlVG9rZW4iLCJjb2RlIiwiZ2V0VW5pcXVlQ29kZXYyIiwic2lnbiIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsInZlcmlmeV9jb2RlIiwiZ2V0VW5pcXVlQ29kZXYzIiwidXBkYXRlUHJvZmlsZVVzZXIiLCJCYWRSZXF1ZXN0IiwibWVzc2FnZSIsInVwZGF0ZXVzZXIiLCJ1c2VyIiwiY2hlY2tOaWNrTmFtZSIsIm5pY2tOYW1lIiwiZ2V0RGF0YSIsInNlbmRGcm9nZXRQYXNzd29yZFRva2VuIiwiY2hlY2tFbWFpbCIsImN1cnJlbnRVc2VyIiwic3RhdHVzIiwiZW1haWxDb25maXJtZWQiLCJzaWdudXBTdGF0dXMiLCJpc0FjdGl2ZSIsIm5ld0NvZGUiLCJ1cGRhdGVVc2VyVmVyaWZ5Q29kZSIsInVzZXJfaWQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcdXNlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci91c2VyL3NlcmN2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgY2hlY2tOaWNrTmFtZSxcclxuICBjaGVja1VzZXJFeGlzdCxcclxuICBjb25maXJtRW1haWwsXHJcbiAgZ2V0T1RQLFxyXG4gIGdldFVzZXJJbmZvLFxyXG4gIHVwZGF0ZVByb2ZpbGVVc2VyLFxyXG4gIHVwZGF0ZVVzZXJWZXJpZnlDb2RlLFxyXG59IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcclxuaW1wb3J0IHVzZVZhbGlkYXRpb24gZnJvbSBcIi4uLy4uL2hlbHBlci91c2VfdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgQ29uZmlybUVtYWlsLCBVc2VyIH0gZnJvbSBcIi4uLy4uL3R5cGVzL3VzZXJcIjtcclxuaW1wb3J0IHNjaGVtYVVzZXIgZnJvbSBcIi4vc2NoZW1hXCI7XHJcbmltcG9ydCBTZW5kTWFpbCBmcm9tIFwiLi4vLi4vaGVscGVyL3NlbmRfZW1haWxcIjtcclxuaW1wb3J0IHsgZ2V0VW5pcXVlQ29kZXYyLCBnZXRVbmlxdWVDb2RldjMgfSBmcm9tIFwiLi4vLi4vaGVscGVyL2NvbW1vblwiO1xyXG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcclxuaW1wb3J0IG1zIGZyb20gXCJtc1wiO1xyXG5pbXBvcnQgUmVzcG9uc2VFcnJvciBmcm9tIFwiLi4vLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvclwiO1xyXG5cclxuY29uc3QgeyBKV1RfU0VDUkVUX0FDQ0VTU19UT0tFTiwgSldUX1NFQ1JFVF9SRUZSRVNIX1RPS0VOIH06IGFueSA9IHByb2Nlc3MuZW52O1xyXG5jb25zdCBKV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgPSBwcm9jZXNzLmVudi5KV1RfQUNDRVNTX1RPS0VOX0VYUElSRUQgfHwgXCIxZFwiOyAvLyAxIERheXNcclxuXHJcbmNvbnN0IGV4cGlyZXNJbiA9IG1zKEpXVF9BQ0NFU1NfVE9LRU5fRVhQSVJFRCkgLyAxMDAwO1xyXG5cclxuY2xhc3MgVXNlclNlcnZpY2Uge1xyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZ2V0VXNlckluZm8oZW1haWw6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGF3YWl0IGdldFVzZXJJbmZvKGVtYWlsKTtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB2YWxpZGF0ZVVzZXJFbWFpbChlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tVc2VyRXhpc3QoZW1haWwpO1xyXG5cclxuICAgIGlmIChkYXRhLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm4gZGF0YVswXSBhcyBVc2VyO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvbmZyaW1FbWFpbChmb3JtRGF0YTogQ29uZmlybUVtYWlsKSB7XHJcbiAgICBjb25zdCB1c2VyRGF0YSA9IHVzZVZhbGlkYXRpb24oc2NoZW1hVXNlci5jb25maXJtRW1haWwsIGZvcm1EYXRhKTtcclxuICAgIGNvbnN0IGNvbmZpcm1FbWFpbFJlc3VsdCA9IGF3YWl0IGNvbmZpcm1FbWFpbCh1c2VyRGF0YSk7XHJcbiAgICByZXR1cm4gQnVpbGRSZXNwb25zZS5hcHBSZXNwb25zZShjb25maXJtRW1haWxSZXN1bHQpO1xyXG4gIH1cclxuICAvKipcclxuICAgKiBAcGFyYW0gZm9ybURhdGFcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFZlcmlmeUNvZGUodXNlckRhdGE6IGFueSwgdG9rZW5WZXJpZnk6IGFueSkge1xyXG4gICAgLy8gY29uc3QgdXNlckRhdGEgPSB1c2VWYWxpZGF0aW9uKHNjaGVtYVVzZXIuY29uZmlybUVtYWlsLHVzZXJEYXRhKVxyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0T1RQKHVzZXJEYXRhLCB0b2tlblZlcmlmeSk7XHJcbiAgICBTZW5kTWFpbC5BY2NvdW50UmVnaXN0ZXIocmVzdWx0KTtcclxuXHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIGVtYWlsXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGFuZ2VQYXNzd29yZChlbWFpbDogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB1c2VyRW1haWwgPSBlbWFpbDtcclxuICB9XHJcbiAgLyoqXHJcbiAgICogQHBhcmFtIHVzZXJEYXRhXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVQcm9maWxldXNlcih1c2VyRGF0YTogVXNlcikge1xyXG4gICAgLy8gY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCBVc2VyU2VydmljZS52YWxpZGF0ZVVzZXJFbWFpbCh1c2VyRGF0YS5lbWFpbCk7XHJcbiAgICAvLyBpZiAoY3VycmVudFVzZXIpIHtcclxuICAgIC8vICAgcmV0dXJuIHsgbWVzc2FnZTogXCJ0aGUgdXNlciBhbHJlYWR5IGV4aXN0ICFcIiwgY29kZTogNDAwLCBjdXJyZW50VXNlciB9O1xyXG4gICAgLy8gfVxyXG5cclxuICAgIGNvbnN0IGdlbmVyYXRlVG9rZW4gPSB7XHJcbiAgICAgIGNvZGU6IGdldFVuaXF1ZUNvZGV2MigpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0b2tlblZlcmlmeSA9IGp3dC5zaWduKFxyXG4gICAgICBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdlbmVyYXRlVG9rZW4pKSxcclxuICAgICAgSldUX1NFQ1JFVF9BQ0NFU1NfVE9LRU4sXHJcbiAgICAgIHtcclxuICAgICAgICBleHBpcmVzSW4sXHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgdXNlckRhdGEudmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIHVzZXJEYXRhLnRva2VuVmVyaWZ5ID0gdG9rZW5WZXJpZnk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1cGRhdGVQcm9maWxlVXNlcih1c2VyRGF0YSk7XHJcbiAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiQ291bGQgbm90IHVwZGF0ZSB1c2VyIVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgbWVzc2FnZTogbnVsbCxcclxuICAgICAgICB1cGRhdGV1c2VyOiB7XHJcbiAgICAgICAgICB1c2VyOiByZXN1bHQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICAvKipcclxuICAgKiBAcGFyYW0gZW1haWxcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIGNoZWNrTmlja05hbWUobmlja05hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgZ2V0RGF0YSA9IGF3YWl0IGNoZWNrTmlja05hbWUoKTtcclxuICAgIGlmIChnZXREYXRhWzBdLm5pY2tOYW1lID09PSBuaWNrTmFtZSkge1xyXG4gICAgICB0aHJvdyBuZXcgUmVzcG9uc2VFcnJvci5CYWRSZXF1ZXN0KFwiVGhlIG5pY2tOYW1lIGlzIGFscmVheSBleGlzdCFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHVzZVZhbGlkYXRpb24oc2NoZW1hVXNlci5jaGVja0VtYWlsLCB7IGVtYWlsOiBlbWFpbCB9KTtcclxuICAgIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlclNlcnZpY2UudmFsaWRhdGVVc2VyRW1haWwoZW1haWwpO1xyXG4gICAgaWYgKCFjdXJyZW50VXNlcikgcmV0dXJuIHsgc3RhdHVzOiAxLCBtZXNzYWdlOiBcImVtYWlsIGlzIG5vdCB2YWxpZCAhXCIgfTtcclxuXHJcbiAgICBpZiAoY3VycmVudFVzZXIuZW1haWxDb25maXJtZWQgPT09IDApXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc3RhdHVzOiAyLFxyXG4gICAgICAgIG1lc3NhZ2U6IFwidGhpcyBlbWFpbCBhZGRyZXNzIGlzIG5vdCBjb25maXJtZWQgeWV0ICFcIixcclxuICAgICAgfTtcclxuICAgIGlmIChjdXJyZW50VXNlci5zaWdudXBTdGF0dXMgPT09IDApXHJcbiAgICAgIHJldHVybiB7IHN0YXR1czogMywgbWVzc2FnZTogXCJzaWdudXAgcHJvY2VzcyBpcyBub3QgY29tcGxldGUgeWV0ICFcIiB9O1xyXG4gICAgLy8gVE9ETyBmb3IgZml4IGlzQWN0aXZlIHRvIGJvb2xlYW5cclxuICAgIGlmIChjdXJyZW50VXNlci5pc0FjdGl2ZSA9PT0gMClcclxuICAgICAgcmV0dXJuIHsgc3RhdHVzOiA0LCBtZXNzYWdlOiBcInRoaXMgYWNjb3VudCBpcyBub3QgYWN0aXZlICFcIiB9O1xyXG4gICAgY29uc3QgbmV3Q29kZSA9IGdldFVuaXF1ZUNvZGV2MygpO1xyXG4gICAgYXdhaXQgdXBkYXRlVXNlclZlcmlmeUNvZGUoY3VycmVudFVzZXIudXNlcl9pZCwgbmV3Q29kZSk7XHJcbiAgICAvLyBzZW5kIGZvcmdvdCBwYXNzIHRva2VuIGNvZGVcclxuICAgIC8vIFNlbmRNYWlsLnNlbmRSZXNldFBhc3N3b3JkRW1haWwoY3VycmVudFVzZXIsIG5ld0NvZGUpO1xyXG4gICAgcmV0dXJuIHsgc3RhdHVzOiA1LCBtZXNzYWdlOiBcImNvZGUgaGFzIGJlZW4gc2VuZCBzdWNjZXNzZnVsbHkgIVwiIH07XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VyU2VydmljZTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsSUFBQSxHQUFBQyxPQUFBO0FBU0EsTUFBQUMsZ0JBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFFQSxNQUFBSSxRQUFBLEdBQUFGLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFLLFlBQUEsR0FBQUgsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQU0sUUFBQSxHQUFBTixPQUFBO0FBQ0EsTUFBQU8sY0FBQSxHQUFBTCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBUSxJQUFBLEdBQUFOLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFTLGdCQUFBLEdBQUFQLGVBQUEsQ0FBQUYsT0FBQTtBQUVBLE1BQU07RUFBRVUsdUJBQXVCO0VBQUVDO0FBQXdCLENBQUUsR0FBUUMsT0FBTyxDQUFDQyxHQUFHO0FBQzlFLE1BQU1DLHdCQUF3QixHQUFHRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0Msd0JBQXdCLElBQUksSUFBSSxDQUFDLENBQUM7QUFFL0UsTUFBTUMsU0FBUyxHQUFHLElBQUFQLElBQUEsQ0FBQVEsT0FBRSxFQUFDRix3QkFBd0IsQ0FBQyxHQUFHLElBQUk7QUFFckQsTUFBTUcsV0FBVztFQUNSLE9BQWFDLFdBQVdBLENBQUNDLEtBQWE7O01BQzNDLE9BQU8sTUFBTSxJQUFBcEIsSUFBQSxDQUFBbUIsV0FBVyxFQUFDQyxLQUFLLENBQUM7SUFDakMsQ0FBQzs7RUFDRDs7O0VBR08sT0FBYUMsaUJBQWlCQSxDQUFDRCxLQUFhOztNQUNqRCxNQUFNRSxJQUFJLEdBQUcsTUFBTSxJQUFBdEIsSUFBQSxDQUFBdUIsY0FBYyxFQUFDSCxLQUFLLENBQUM7TUFFeEMsSUFBSUUsSUFBSSxDQUFDRSxNQUFNLEVBQUU7UUFDZixPQUFPRixJQUFJLENBQUMsQ0FBQyxDQUFTO01BQ3hCO01BQ0EsT0FBTyxJQUFJO0lBQ2IsQ0FBQzs7RUFFRDs7O0VBR08sT0FBYUcsWUFBWUEsQ0FBQ0MsUUFBc0I7O01BQ3JELE1BQU1DLFFBQVEsR0FBRyxJQUFBekIsZ0JBQUEsQ0FBQWUsT0FBYSxFQUFDWixRQUFBLENBQUFZLE9BQVUsQ0FBQ1csWUFBWSxFQUFFRixRQUFRLENBQUM7TUFDakUsTUFBTUcsa0JBQWtCLEdBQUcsTUFBTSxJQUFBN0IsSUFBQSxDQUFBNEIsWUFBWSxFQUFDRCxRQUFRLENBQUM7TUFDdkQsT0FBT3ZCLGNBQUEsQ0FBQWEsT0FBYSxDQUFDYSxXQUFXLENBQUNELGtCQUFrQixDQUFDO0lBQ3RELENBQUM7O0VBQ0Q7OztFQUdPLE9BQWFFLGFBQWFBLENBQUNKLFFBQWEsRUFBRUssV0FBZ0I7O01BQy9EO01BQ0EsTUFBTUMsTUFBTSxHQUFHLE1BQU0sSUFBQWpDLElBQUEsQ0FBQWtDLE1BQU0sRUFBQ1AsUUFBUSxFQUFFSyxXQUFXLENBQUM7TUFDbEQxQixZQUFBLENBQUFXLE9BQVEsQ0FBQ2tCLGVBQWUsQ0FBQ0YsTUFBTSxDQUFDO01BRWhDLElBQUlBLE1BQU0sRUFBRTtRQUNWLE9BQU9BLE1BQU07TUFDZjtNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUM7O0VBQ0Q7OztFQUdPLE9BQWFHLGNBQWNBLENBQUNoQixLQUFhOztNQUM5QyxNQUFNaUIsU0FBUyxHQUFHakIsS0FBSztJQUN6QixDQUFDOztFQUNEOzs7RUFHTyxPQUFha0IsaUJBQWlCQSxDQUFDWCxRQUFjOztNQUNsRDtNQUNBO01BQ0E7TUFDQTtNQUVBLE1BQU1ZLGFBQWEsR0FBRztRQUNwQkMsSUFBSSxFQUFFLElBQUFqQyxRQUFBLENBQUFrQyxlQUFlO09BQ3RCO01BRUQsTUFBTVQsV0FBVyxHQUFHeEIsY0FBQSxDQUFBUyxPQUFHLENBQUN5QixJQUFJLENBQzFCQyxJQUFJLENBQUNDLEtBQUssQ0FBQ0QsSUFBSSxDQUFDRSxTQUFTLENBQUNOLGFBQWEsQ0FBQyxDQUFDLEVBQ3pDNUIsdUJBQXVCLEVBQ3ZCO1FBQ0VLO09BQ0QsQ0FDRjtNQUVEVyxRQUFRLENBQUNtQixXQUFXLEdBQUcsSUFBQXZDLFFBQUEsQ0FBQXdDLGVBQWUsR0FBRTtNQUN4Q3BCLFFBQVEsQ0FBQ0ssV0FBVyxHQUFHQSxXQUFXO01BQ2xDLE1BQU1DLE1BQU0sR0FBRyxNQUFNLElBQUFqQyxJQUFBLENBQUFnRCxpQkFBaUIsRUFBQ3JCLFFBQVEsQ0FBQztNQUNoRCxJQUFJLENBQUNNLE1BQU0sRUFBRTtRQUNYLE1BQU0sSUFBSXZCLGdCQUFBLENBQUFPLE9BQWEsQ0FBQ2dDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQztNQUM5RCxDQUFDLE1BQU07UUFDTCxPQUFPO1VBQ0xDLE9BQU8sRUFBRSxJQUFJO1VBQ2JDLFVBQVUsRUFBRTtZQUNWQyxJQUFJLEVBQUVuQjs7U0FFVDtNQUNIO0lBQ0YsQ0FBQzs7RUFHRDs7O0VBR08sT0FBYW9CLGFBQWFBLENBQUNDLFFBQWdCOztNQUNoRCxNQUFNQyxPQUFPLEdBQUcsTUFBTSxJQUFBdkQsSUFBQSxDQUFBcUQsYUFBYSxHQUFFO01BQ3JDLElBQUlFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0QsUUFBUSxLQUFLQSxRQUFRLEVBQUU7UUFDcEMsTUFBTSxJQUFJNUMsZ0JBQUEsQ0FBQU8sT0FBYSxDQUFDZ0MsVUFBVSxDQUFDLCtCQUErQixDQUFDO01BQ3JFLENBQUMsTUFBTTtRQUNMO01BQ0Y7SUFDRixDQUFDOztFQUVNLE9BQWFPLHVCQUF1QkEsQ0FBQ3BDLEtBQWE7O01BQ3ZELElBQUFsQixnQkFBQSxDQUFBZSxPQUFhLEVBQUNaLFFBQUEsQ0FBQVksT0FBVSxDQUFDd0MsVUFBVSxFQUFFO1FBQUVyQyxLQUFLLEVBQUVBO01BQUssQ0FBRSxDQUFDO01BQ3RELE1BQU1zQyxXQUFXLEdBQUcsTUFBTXhDLFdBQVcsQ0FBQ0csaUJBQWlCLENBQUNELEtBQUssQ0FBQztNQUM5RCxJQUFJLENBQUNzQyxXQUFXLEVBQUUsT0FBTztRQUFFQyxNQUFNLEVBQUUsQ0FBQztRQUFFVCxPQUFPLEVBQUU7TUFBc0IsQ0FBRTtNQUV2RSxJQUFJUSxXQUFXLENBQUNFLGNBQWMsS0FBSyxDQUFDLEVBQ2xDLE9BQU87UUFDTEQsTUFBTSxFQUFFLENBQUM7UUFDVFQsT0FBTyxFQUFFO09BQ1Y7TUFDSCxJQUFJUSxXQUFXLENBQUNHLFlBQVksS0FBSyxDQUFDLEVBQ2hDLE9BQU87UUFBRUYsTUFBTSxFQUFFLENBQUM7UUFBRVQsT0FBTyxFQUFFO01BQXNDLENBQUU7TUFDdkU7TUFDQSxJQUFJUSxXQUFXLENBQUNJLFFBQVEsS0FBSyxDQUFDLEVBQzVCLE9BQU87UUFBRUgsTUFBTSxFQUFFLENBQUM7UUFBRVQsT0FBTyxFQUFFO01BQThCLENBQUU7TUFDL0QsTUFBTWEsT0FBTyxHQUFHLElBQUF4RCxRQUFBLENBQUF3QyxlQUFlLEdBQUU7TUFDakMsTUFBTSxJQUFBL0MsSUFBQSxDQUFBZ0Usb0JBQW9CLEVBQUNOLFdBQVcsQ0FBQ08sT0FBTyxFQUFFRixPQUFPLENBQUM7TUFDeEQ7TUFDQTtNQUNBLE9BQU87UUFBRUosTUFBTSxFQUFFLENBQUM7UUFBRVQsT0FBTyxFQUFFO01BQW1DLENBQUU7SUFDcEUsQ0FBQzs7O0FBR0hnQixPQUFBLENBQUFqRCxPQUFBLEdBQWVDLFdBQVciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","use_validation_1","__importDefault","app_response_1","schema_1","send_email_1","common_1","jsonwebtoken_1","ms_1","response_error_1","JWT_SECRET_ACCESS_TOKEN","JWT_SECRET_REFRESH_TOKEN","process","env","JWT_ACCESS_TOKEN_EXPIRED","expiresIn","default","UserService","getUserInfo","email","validateUserEmail","data","checkUserExist","length","confrimEmail","formData","userData","confirmEmail","confirmEmailResult","appResponse","getVerifyCode","tokenVerify","result","getOTP","AccountRegister","changePassword","userEmail","updateProfileuser","generateToken","code","getUniqueCodev2","sign","JSON","parse","stringify","verify_code","getUniqueCodev3","updateProfileUser","BadRequest","message","updateuser","user","checkNickName","nickName","getData","sendFrogetPasswordToken","checkEmail","currentUser","status","emailConfirmed","signupStatus","isActive","newCode","updateUserVerifyCode","user_id","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/user/sercvice.ts"],"sourcesContent":["import {\r\n  checkNickName,\r\n  checkUserExist,\r\n  confirmEmail,\r\n  getOTP,\r\n  getUserInfo,\r\n  updateProfileUser,\r\n  updateUserVerifyCode,\r\n} from \"../../bin/db\";\r\nimport useValidation from \"../../helper/use_validation\";\r\nimport BuildResponse from \"../../modules/response/app_response\";\r\nimport { ConfirmEmail, User } from \"../../types/user\";\r\nimport schemaUser from \"./schema\";\r\nimport SendMail from \"../../helper/send_email\";\r\nimport { getUniqueCodev2, getUniqueCodev3 } from \"../../helper/common\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport ms from \"ms\";\r\nimport ResponseError from \"../../modules/error/response_error\";\r\n\r\nconst { JWT_SECRET_ACCESS_TOKEN, JWT_SECRET_REFRESH_TOKEN }: any = process.env;\r\nconst JWT_ACCESS_TOKEN_EXPIRED = process.env.JWT_ACCESS_TOKEN_EXPIRED || \"1d\"; // 1 Days\r\n\r\nconst expiresIn = ms(JWT_ACCESS_TOKEN_EXPIRED) / 1000;\r\n\r\nclass UserService {\r\n  public static async getUserInfo(email: string) {\r\n    return await getUserInfo(email);\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async validateUserEmail(email: string) {\r\n    const data = await checkUserExist(email);\r\n\r\n    if (data.length) {\r\n      return data[0] as User;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async confrimEmail(formData: ConfirmEmail) {\r\n    const userData = useValidation(schemaUser.confirmEmail, formData);\r\n    const confirmEmailResult = await confirmEmail(userData);\r\n    return BuildResponse.appResponse(confirmEmailResult);\r\n  }\r\n  /**\r\n   * @param formData\r\n   */\r\n  public static async getVerifyCode(userData: any, tokenVerify: any) {\r\n    // const userData = useValidation(schemaUser.confirmEmail,userData)\r\n    const result = await getOTP(userData, tokenVerify);\r\n    SendMail.AccountRegister(result);\r\n\r\n    if (result) {\r\n      return result;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async changePassword(email: string) {\r\n    const userEmail = email;\r\n  }\r\n  /**\r\n   * @param userData\r\n   */\r\n  public static async updateProfileuser(userData: User) {\r\n    // const currentUser = await UserService.validateUserEmail(userData.email);\r\n    // if (currentUser) {\r\n    //   return { message: \"the user already exist !\", code: 400, currentUser };\r\n    // }\r\n\r\n    const generateToken = {\r\n      code: getUniqueCodev2(),\r\n    };\r\n\r\n    const tokenVerify = jwt.sign(\r\n      JSON.parse(JSON.stringify(generateToken)),\r\n      JWT_SECRET_ACCESS_TOKEN,\r\n      {\r\n        expiresIn,\r\n      }\r\n    );\r\n\r\n    userData.verify_code = getUniqueCodev3();\r\n    userData.tokenVerify = tokenVerify;\r\n    const result = await updateProfileUser(userData);\r\n    if (!result) {\r\n      throw new ResponseError.BadRequest(\"Could not update user!\");\r\n    } else {\r\n      return {\r\n        message: null,\r\n        updateuser: {\r\n          user: result,\r\n        },\r\n      };\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * @param email\r\n   */\r\n  public static async checkNickName(nickName: string) {\r\n    const getData = await checkNickName();\r\n    if (getData[0].nickName === nickName) {\r\n      throw new ResponseError.BadRequest(\"The nickName is alreay exist!\");\r\n    } else {\r\n      return;\r\n    }\r\n  }\r\n\r\n  public static async sendFrogetPasswordToken(email: string) {\r\n    useValidation(schemaUser.checkEmail, { email: email });\r\n    const currentUser = await UserService.validateUserEmail(email);\r\n    if (!currentUser) return { status: 1, message: \"email is not valid !\" };\r\n\r\n    if (currentUser.emailConfirmed === 0)\r\n      return {\r\n        status: 2,\r\n        message: \"this email address is not confirmed yet !\",\r\n      };\r\n    if (currentUser.signupStatus === 0)\r\n      return { status: 3, message: \"signup process is not complete yet !\" };\r\n    // TODO for fix isActive to boolean\r\n    if (currentUser.isActive === 0)\r\n      return { status: 4, message: \"this account is not active !\" };\r\n    const newCode = getUniqueCodev3();\r\n    await updateUserVerifyCode(currentUser.user_id, newCode);\r\n    // send forgot pass token code\r\n    // SendMail.sendResetPasswordEmail(currentUser, newCode);\r\n    return { status: 5, message: \"code has been send successfully !\" };\r\n  }\r\n}\r\n\r\nexport default UserService;\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1722386761264},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\user\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst common_1 = require(\"../../helper/common\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst sercvice_1 = __importDefault(require(\"./sercvice\"));\n// ***** checkNickName\npublic_1.default.get(\"/user/checkNickName/:nickname\", (0, async_handler_1.default)(function checkNickName(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.nickname;\n    const result = yield sercvice_1.default.checkNickName(formData);\n    res.json(result);\n  });\n}));\n// ***** getUserInfo\npublic_1.default.post(\"/getUserInfo\", function getAllUserData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    try {\n      const data = req.body.email;\n      const userData = yield sercvice_1.default.getUserInfo(data);\n      const buildResponse = yield app_response_1.default.get(userData);\n      return res.json(buildResponse);\n    } catch (error) {\n      console.log(error);\n    }\n  });\n});\n// ***** confirm\npublic_1.default.post(\"/user/confirm\", (0, async_handler_1.default)(function confirmEmail(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.default.confrimEmail(formData);\n    res.status(result.code).json(result);\n  });\n}));\n// ***** getOTP\npublic_1.default.get(\"/user/getOTP/:email\", (0, async_handler_1.default)(function getOTP(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.params.email;\n    const verify_code = (0, common_1.getUniqueCodev3)();\n    const result = yield sercvice_1.default.getVerifyCode(formData, verify_code);\n    const buildResponse = yield app_response_1.default.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** updateProfile\npublic_1.default.put(`/user/updateProfile`, (0, async_handler_1.default)(function updateProfileUser(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const result = yield sercvice_1.default.updateProfileuser(formData);\n    const buildResponse = yield app_response_1.default.get(result);\n    res.json(buildResponse);\n  });\n}));\n// ***** forgot-passsword\npublic_1.default.get('/user/forgot-passsword/:email', (0, async_handler_1.default)(function forgetPsssword(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const email = req.params.email;\n    const data = yield sercvice_1.default.sendFrogetPasswordToken(email);\n    return res.json(data);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiY29tbW9uXzEiLCJhcHBfcmVzcG9uc2VfMSIsInB1YmxpY18xIiwic2VyY3ZpY2VfMSIsImRlZmF1bHQiLCJnZXQiLCJjaGVja05pY2tOYW1lIiwicmVxIiwicmVzIiwiZm9ybURhdGEiLCJwYXJhbXMiLCJuaWNrbmFtZSIsInJlc3VsdCIsImpzb24iLCJwb3N0IiwiZ2V0QWxsVXNlckRhdGEiLCJkYXRhIiwiYm9keSIsImVtYWlsIiwidXNlckRhdGEiLCJnZXRVc2VySW5mbyIsImJ1aWxkUmVzcG9uc2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJjb25maXJtRW1haWwiLCJjb25mcmltRW1haWwiLCJzdGF0dXMiLCJjb2RlIiwiZ2V0T1RQIiwidmVyaWZ5X2NvZGUiLCJnZXRVbmlxdWVDb2RldjMiLCJnZXRWZXJpZnlDb2RlIiwicHV0IiwidXBkYXRlUHJvZmlsZVVzZXIiLCJ1cGRhdGVQcm9maWxldXNlciIsImZvcmdldFBzc3N3b3JkIiwic2VuZEZyb2dldFBhc3N3b3JkVG9rZW4iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFx1c2VyXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb250cm9sbGVyL3VzZXIvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XHJcbmltcG9ydCBhc3luY0hhbmRsZXIgZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCB7IGdldFVuaXF1ZUNvZGV2MyB9IGZyb20gXCIuLi8uLi9oZWxwZXIvY29tbW9uXCI7XHJcbmltcG9ydCBCdWlsZFJlc3BvbnNlIGZyb20gXCIuLi8uLi9tb2R1bGVzL3Jlc3BvbnNlL2FwcF9yZXNwb25zZVwiO1xyXG5pbXBvcnQgcm91dGVzIGZyb20gXCIuLi8uLi9yb3V0ZXMvcHVibGljXCI7XHJcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tIFwiLi9zZXJjdmljZVwiO1xyXG5cclxuLy8gKioqKiogY2hlY2tOaWNrTmFtZVxyXG5yb3V0ZXMuZ2V0KFxyXG4gIFwiL3VzZXIvY2hlY2tOaWNrTmFtZS86bmlja25hbWVcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gY2hlY2tOaWNrTmFtZShyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLnBhcmFtcy5uaWNrbmFtZTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmNoZWNrTmlja05hbWUoZm9ybURhdGEpO1xyXG4gICAgcmVzLmpzb24ocmVzdWx0KTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiBnZXRVc2VySW5mb1xyXG5yb3V0ZXMucG9zdChcclxuICBcIi9nZXRVc2VySW5mb1wiLFxyXG4gIGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJEYXRhKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgZGF0YSA9IHJlcS5ib2R5LmVtYWlsO1xyXG4gICAgICBjb25zdCB1c2VyRGF0YSA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gYXdhaXQgQnVpbGRSZXNwb25zZS5nZXQodXNlckRhdGEpO1xyXG4gICAgICByZXR1cm4gcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9XHJcbiAgfVxyXG4pO1xyXG4vLyAqKioqKiBjb25maXJtXHJcbnJvdXRlcy5wb3N0KFxyXG4gIFwiL3VzZXIvY29uZmlybVwiLFxyXG4gIGFzeW5jSGFuZGxlcihhc3luYyBmdW5jdGlvbiBjb25maXJtRW1haWwocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UuY29uZnJpbUVtYWlsKGZvcm1EYXRhKTtcclxuICAgIHJlcy5zdGF0dXMocmVzdWx0LmNvZGUpLmpzb24ocmVzdWx0KTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqKiBnZXRPVFBcclxucm91dGVzLmdldChcclxuICBcIi91c2VyL2dldE9UUC86ZW1haWxcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0T1RQKHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSkge1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSByZXEucGFyYW1zLmVtYWlsO1xyXG4gICAgY29uc3QgdmVyaWZ5X2NvZGUgPSBnZXRVbmlxdWVDb2RldjMoKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFZlcmlmeUNvZGUoZm9ybURhdGEsIHZlcmlmeV9jb2RlKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBhd2FpdCBCdWlsZFJlc3BvbnNlLmdldChyZXN1bHQpO1xyXG4gICAgcmVzLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgfSlcclxuKTtcclxuLy8gKioqKiogdXBkYXRlUHJvZmlsZVxyXG5yb3V0ZXMucHV0KFxyXG4gIGAvdXNlci91cGRhdGVQcm9maWxlYCxcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZVVzZXIocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlclNlcnZpY2UudXBkYXRlUHJvZmlsZXVzZXIoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IGF3YWl0IEJ1aWxkUmVzcG9uc2UuZ2V0KHJlc3VsdCk7XHJcbiAgICByZXMuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiogZm9yZ290LXBhc3Nzd29yZFxyXG5cclxuXHJcblxyXG4gIHJvdXRlcy5nZXQoXHJcbiAgICAnL3VzZXIvZm9yZ290LXBhc3Nzd29yZC86ZW1haWwnLFxyXG4gICAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGZvcmdldFBzc3N3b3JkKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgICBjb25zdCBlbWFpbCA9IHJlcS5wYXJhbXMuZW1haWxcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFVzZXJTZXJ2aWNlLnNlbmRGcm9nZXRQYXNzd29yZFRva2VuKGVtYWlsKVxyXG4gICAgICByZXR1cm4gcmVzLmpzb24oZGF0YSlcclxuICAgIH0pXHJcbiAgKVxyXG4gIFxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUNBLE1BQUFFLGNBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBSSxVQUFBLEdBQUFMLGVBQUEsQ0FBQUMsT0FBQTtBQUVBO0FBQ0FHLFFBQUEsQ0FBQUUsT0FBTSxDQUFDQyxHQUFHLENBQ1IsK0JBQStCLEVBQy9CLElBQUFSLGVBQUEsQ0FBQU8sT0FBWSxFQUFDLFNBQWVFLGFBQWFBLENBQUNDLEdBQVksRUFBRUMsR0FBYTs7SUFDbkUsTUFBTUMsUUFBUSxHQUFHRixHQUFHLENBQUNHLE1BQU0sQ0FBQ0MsUUFBUTtJQUNwQyxN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","map":{"version":3,"names":["async_handler_1","__importDefault","require","common_1","app_response_1","public_1","sercvice_1","default","get","checkNickName","req","res","formData","params","nickname","result","json","post","getAllUserData","data","body","email","userData","getUserInfo","buildResponse","error","console","log","confirmEmail","confrimEmail","status","code","getOTP","verify_code","getUniqueCodev3","getVerifyCode","put","updateProfileUser","updateProfileuser","forgetPsssword","sendFrogetPasswordToken"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\user\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/user/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport asyncHandler from \"../../helper/async-handler\";\r\nimport { getUniqueCodev3 } from \"../../helper/common\";\r\nimport BuildResponse from \"../../modules/response/app_response\";\r\nimport routes from \"../../routes/public\";\r\nimport UserService from \"./sercvice\";\r\n\r\n// ***** checkNickName\r\nroutes.get(\r\n  \"/user/checkNickName/:nickname\",\r\n  asyncHandler(async function checkNickName(req: Request, res: Response) {\r\n    const formData = req.params.nickname;\r\n    const result = await UserService.checkNickName(formData);\r\n    res.json(result);\r\n  })\r\n);\r\n// ***** getUserInfo\r\nroutes.post(\r\n  \"/getUserInfo\",\r\n  async function getAllUserData(req: Request, res: Response) {\r\n    try {\r\n      const data = req.body.email;\r\n      const userData = await UserService.getUserInfo(data);\r\n      const buildResponse = await BuildResponse.get(userData);\r\n      return res.json(buildResponse);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n);\r\n// ***** confirm\r\nroutes.post(\r\n  \"/user/confirm\",\r\n  asyncHandler(async function confirmEmail(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.confrimEmail(formData);\r\n    res.status(result.code).json(result);\r\n  })\r\n);\r\n// ***** getOTP\r\nroutes.get(\r\n  \"/user/getOTP/:email\",\r\n  asyncHandler(async function getOTP(req: Request, res: Response) {\r\n    const formData = req.params.email;\r\n    const verify_code = getUniqueCodev3();\r\n    const result = await UserService.getVerifyCode(formData, verify_code);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n// ***** updateProfile\r\nroutes.put(\r\n  `/user/updateProfile`,\r\n  asyncHandler(async function updateProfileUser(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const result = await UserService.updateProfileuser(formData);\r\n    const buildResponse = await BuildResponse.get(result);\r\n    res.json(buildResponse);\r\n  })\r\n);\r\n\r\n// ***** forgot-passsword\r\n\r\n\r\n\r\n  routes.get(\r\n    '/user/forgot-passsword/:email',\r\n    asyncHandler(async function forgetPsssword(req: any, res: any) {\r\n      const email = req.params.email\r\n      const data = await UserService.sendFrogetPasswordToken(email)\r\n      return res.json(data)\r\n    })\r\n  )\r\n  \r\n"],"mappings":"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","ignoreList":[]}},"mtime":1722386761264},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\helper\\\\async-handler.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst express_async_handler_1 = __importDefault(require(\"express-async-handler\"));\nconst asyncHandler = express_async_handler_1.default;\nexports.default = asyncHandler;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzX2FzeW5jX2hhbmRsZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJhc3luY0hhbmRsZXIiLCJkZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGhlbHBlclxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvaGVscGVyL2FzeW5jLWhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3NBc3luY0hhbmRsZXIgZnJvbSAnZXhwcmVzcy1hc3luYy1oYW5kbGVyJ1xuXG5jb25zdCBhc3luY0hhbmRsZXIgPSBleHByZXNzQXN5bmNIYW5kbGVyXG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jSGFuZGxlclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsdUJBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsWUFBWSxHQUFHSCx1QkFBQSxDQUFBSSxPQUFtQjtBQUV4Q0MsT0FBQSxDQUFBRCxPQUFBLEdBQWVELFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express_async_handler_1","__importDefault","require","asyncHandler","default","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\helper\\","sources":["D:/Personal/My-projects/user-information/server/src/helper/async-handler.ts"],"sourcesContent":["import expressAsyncHandler from 'express-async-handler'\n\nconst asyncHandler = expressAsyncHandler\n\nexport default asyncHandler\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,uBAAA,GAAAC,eAAA,CAAAC,OAAA;AAEA,MAAMC,YAAY,GAAGH,uBAAA,CAAAI,OAAmB;AAExCC,OAAA,CAAAD,OAAA,GAAeD,YAAY","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = require(\"./service\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\npublic_1.default.get(\"/navItem\", (0, async_handler_1.default)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.NavItemService.getAllNavItems();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlXzEiLCJhcHBfcmVzcG9uc2VfMSIsImRlZmF1bHQiLCJnZXQiLCJnZXROYXZJdGVtcyIsInJlcSIsInJlcyIsImRhdGEiLCJOYXZJdGVtU2VydmljZSIsImdldEFsbE5hdkl0ZW1zIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxuYXYtaXRlbXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvbmF2LWl0ZW1zL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzeW5jSGFuZGxlciBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcbmltcG9ydCB7IE5hdkl0ZW1TZXJ2aWNlIH0gZnJvbSBcIi4vc2VydmljZVwiO1xuaW1wb3J0IEJ1aWxkUmVzcG9uc2UgZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XG5cbnJvdXRlcy5nZXQoXG4gIFwiL25hdkl0ZW1cIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBOYXZJdGVtU2VydmljZS5nZXRBbGxOYXZJdGVtcygpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICAgIH1cbiAgfSlcbik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLFFBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQ0EsTUFBQUcsY0FBQSxHQUFBSixlQUFBLENBQUFDLE9BQUE7QUFFQUMsUUFBQSxDQUFBRyxPQUFNLENBQUNDLEdBQUcsQ0FDUixVQUFVLEVBQ1YsSUFBQVAsZUFBQSxDQUFBTSxPQUFZLEVBQUMsU0FBZUUsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsU0FBQSxDQUFBUSxjQUFjLENBQUNDLGNBQWMsRUFBRTtJQUNsRCxNQUFNQyxhQUFhLEdBQUdULGNBQUEsQ0FBQUMsT0FBYSxDQUFDQyxHQUFHLENBQUNJLElBQUksQ0FBQztJQUM3QyxJQUFJRyxhQUFhLEVBQUU7TUFDakIsT0FBT0osR0FBRyxDQUFDSyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0YsYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSCIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["async_handler_1","__importDefault","require","public_1","service_1","app_response_1","default","get","getNavItems","req","res","data","NavItemService","getAllNavItems","buildResponse","status","json"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/nav-items/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\nimport routes from \"../../routes/public\";\nimport { NavItemService } from \"./service\";\nimport BuildResponse from \"../../modules/response/app_response\";\n\nroutes.get(\n  \"/navItem\",\n  asyncHandler(async function getNavItems(req: any, res: any) {\n    const data = await NavItemService.getAllNavItems();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,cAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEAC,QAAA,CAAAG,OAAM,CAACC,GAAG,CACR,UAAU,EACV,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMP,SAAA,CAAAQ,cAAc,CAACC,cAAc,EAAE;IAClD,MAAMC,aAAa,GAAGT,cAAA,CAAAC,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\nav-items\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NavItemService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass NavItemService {\n  static getAllNavItems() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getNavItems)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.NavItemService = NavItemService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIk5hdkl0ZW1TZXJ2aWNlIiwiZ2V0QWxsTmF2SXRlbXMiLCJkYXRhIiwiZ2V0TmF2SXRlbXMiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXG5hdi1pdGVtc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9uYXYtaXRlbXMvc2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXROYXZJdGVtcyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuY2xhc3MgTmF2SXRlbVNlcnZpY2Uge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldEFsbE5hdkl0ZW1zKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXROYXZJdGVtcygpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cblxuZXhwb3J0IHsgIE5hdkl0ZW1TZXJ2aWNlICB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxjQUFjO0VBQ1gsT0FBYUMsY0FBY0EsQ0FBQTs7TUFDaEMsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxXQUFXLEdBQUU7TUFDaEMsSUFBSUQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOzs7QUFJT0csT0FBQSxDQUFBTCxjQUFBLEdBQUFBLGNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","NavItemService","getAllNavItems","data","getNavItems","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\nav-items\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/nav-items/service.ts"],"sourcesContent":["import { getNavItems } from \"../../bin/db\";\n\nclass NavItemService {\n  public static async getAllNavItems() {\n    const data = await getNavItems();\n    if (data) {\n      return { message: `ok`, data };\n    }\n    return null;\n  }\n}\n\n\nexport {  NavItemService  };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,cAAc;EACX,OAAaC,cAAcA,CAAA;;MAChC,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAK,WAAW,GAAE;MAChC,IAAID,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAIOG,OAAA,CAAAL,cAAA,GAAAA,cAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst service_1 = __importDefault(require(\"./service\"));\npublic_1.default.post(\"/insertAppointment\", (0, async_handler_1.default)(function insertEvent(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const eventData = req.body;\n    const data = yield service_1.default.insertEvent(eventData);\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.default.get(\"/getAppointment\", (0, async_handler_1.default)(function getEventData(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.default.getEventData();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\npublic_1.default.delete(\"/deleteAppointment/delete/:id\", (0, async_handler_1.default)(function deleteAppointment(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const {\n      id\n    } = req.params;\n    yield service_1.default.deleteAppointmentItem(id);\n    const buildResponse = app_response_1.default.deleted({});\n    return res.status(200).json(buildResponse);\n  });\n}));\npublic_1.default.put(\"/updateAppointment/update\", (0, async_handler_1.default)(function updateAppointmentItem(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield service_1.default.updateAppointmentItem(formData);\n    const buildResponse = app_response_1.default.updated(data);\n    return res.status(201).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VfMSIsImRlZmF1bHQiLCJwb3N0IiwiaW5zZXJ0RXZlbnQiLCJyZXEiLCJyZXMiLCJldmVudERhdGEiLCJib2R5IiwiZGF0YSIsImJ1aWxkUmVzcG9uc2UiLCJnZXQiLCJzdGF0dXMiLCJqc29uIiwiZ2V0RXZlbnREYXRhIiwiZGVsZXRlIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJuZXh0IiwiaWQiLCJwYXJhbXMiLCJkZWxldGVBcHBvaW50bWVudEl0ZW0iLCJkZWxldGVkIiwicHV0IiwidXBkYXRlQXBwb2ludG1lbnRJdGVtIiwiZm9ybURhdGEiLCJ1cGRhdGVkIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYXBwb2ludG1lbnRcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYXBwb2ludG1lbnQvY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCBhc3luY0hhbmRsZXIgZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcbmltcG9ydCBDYWxlbmRhclNlcnZpY2UgZnJvbSBcIi4vc2VydmljZVwiO1xuXG5yb3V0ZXMucG9zdChcbiAgXCIvaW5zZXJ0QXBwb2ludG1lbnRcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGluc2VydEV2ZW50KHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGV2ZW50RGF0YSA9IHJlcS5ib2R5O1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBDYWxlbmRhclNlcnZpY2UuaW5zZXJ0RXZlbnQoZXZlbnREYXRhKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgICB9XG4gIH0pXG4pO1xuXG5yb3V0ZXMuZ2V0KFxuICBcIi9nZXRBcHBvaW50bWVudFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnREYXRhKHJlcTogYW55LCByZXM6IGFueSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBDYWxlbmRhclNlcnZpY2UuZ2V0RXZlbnREYXRhKCk7XG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gICAgfVxuICB9KVxuKTtcblxucm91dGVzLmRlbGV0ZShcbiAgXCIvZGVsZXRlQXBwb2ludG1lbnQvZGVsZXRlLzppZFwiLFxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlQXBwb2ludG1lbnQoXG4gICAgcmVxOiBSZXF1ZXN0LFxuICAgIHJlczogUmVzcG9uc2UsXG4gICAgbmV4dDogTmV4dEZ1bmN0aW9uXG4gICk6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtcztcbiAgICBhd2FpdCBDYWxlbmRhclNlcnZpY2UuZGVsZXRlQXBwb2ludG1lbnRJdGVtKGlkKTtcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5kZWxldGVkKHt9KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XG4gIH0pXG4pO1xuXG5yb3V0ZXMucHV0KFxuICBcIi91cGRhdGVBcHBvaW50bWVudC91cGRhdGVcIixcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUFwcG9pbnRtZW50SXRlbShcbiAgICByZXE6IFJlcXVlc3QsXG4gICAgcmVzOiBSZXNwb25zZVxuICApIDogUHJvbWlzZTxhbnk+e1xuICAgIGNvbnN0IGZvcm1EYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IENhbGVuZGFyU2VydmljZS51cGRhdGVBcHBvaW50bWVudEl0ZW0oZm9ybURhdGEpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLnVwZGF0ZWQoZGF0YSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xuICB9KVxuKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsY0FBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxRQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLFNBQUEsR0FBQUosZUFBQSxDQUFBQyxPQUFBO0FBRUFFLFFBQUEsQ0FBQUUsT0FBTSxDQUFDQyxJQUFJLENBQ1Qsb0JBQW9CLEVBQ3BCLElBQUFQLGVBQUEsQ0FBQU0sT0FBWSxFQUFDLFNBQWVFLFdBQVdBLENBQUNDLEdBQVEsRUFBRUMsR0FBUTs7SUFDeEQsTUFBTUMsU0FBUyxHQUFHRixHQUFHLENBQUNHLElBQUk7SUFDMUIsTUFBTUMsSUFBSSxHQUFHLE1BQU1SLFNBQUEsQ0FBQUMsT0FBZSxDQUFDRSxXQUFXLENBQUNHLFNBQVMsQ0FBQztJQUN6RCxNQUFNRyxhQUFhLEdBQUdYLGNBQUEsQ0FBQUcsT0FBYSxDQUFDUyxHQUFHLENBQUNGLElBQUksQ0FBQztJQUM3QyxJQUFJQyxhQUFhLEVBQUU7TUFDakIsT0FBT0osR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0lBQzVDO0VBQ0YsQ0FBQztDQUFBLENBQUMsQ0FDSDtBQUVEVixRQUFBLENBQUFFLE9BQU0sQ0FBQ1MsR0FBRyxDQUNSLGlCQUFpQixFQUNqQixJQUFBZixlQUFBLENBQUFNLE9BQVksRUFBQyxTQUFlWSxZQUFZQSxDQUFDVCxHQUFRLEVBQUVDLEdBQVE7O0lBQ3pELE1BQU1HLElBQUksR0FBRyxNQUFNUixTQUFBLENBQUFDLE9BQWUsQ0FBQ1ksWUFBWSxFQUFFO0lBQ2pELE1BQU1KLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUNTLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDO0lBQzdDLElBQUlDLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNNLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDSCxhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURWLFFBQUEsQ0FBQUUsT0FBTSxDQUFDYSxNQUFNLENBQ1gsK0JBQStCLEVBQy9CLElBQUFuQixlQUFBLENBQUFNLE9BQVksRUFBQyxTQUFlYyxpQkFBaUJBLENBQzNDWCxHQUFZLEVBQ1pDLEdBQWEsRUFDYlcsSUFBa0I7O0lBRWxCLE1BQU07TUFBRUM7SUFBRSxDQUFFLEdBQUdiLEdBQUcsQ0FBQ2MsTUFBTTtJQUN6QixNQUFNbEIsU0FBQSxDQUFBQyxPQUFlLENBQUNrQixxQkFBcUIsQ0FBQ0YsRUFBRSxDQUFDO0lBQy9DLE1BQU1SLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUNtQixPQUFPLENBQUMsRUFBRSxDQUFDO0lBQy9DLE9BQU9mLEdBQUcsQ0FBQ00sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNILGFBQWEsQ0FBQztFQUM1QyxDQUFDO0NBQUEsQ0FBQyxDQUNIO0FBRURWLFFBQUEsQ0FBQUUsT0FBTSxDQUFDb0IsR0FBRyxDQUNSLDJCQUEyQixFQUMzQixJQUFBMUIsZUFBQSxDQUFBTSxPQUFZLEVBQUMsU0FBZXFCLHFCQUFxQkEsQ0FDL0NsQixHQUFZLEVBQ1pDLEdBQWE7O0lBRWIsTUFBTWtCLFFBQVEsR0FBR25CLEdBQUcsQ0FBQ0csSUFBSTtJQUN6QixNQUFNQyxJQUFJLEdBQUcsTUFBTVIsU0FBQSxDQUFBQyxPQUFlLENBQUNxQixxQkFBcUIsQ0FBQ0MsUUFBUSxDQUFDO0lBQ2xFLE1BQU1kLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUN1QixPQUFPLENBQUNoQixJQUFJLENBQUM7SUFDakQsT0FBT0gsR0FBRyxDQUFDTSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0VBQzVDLENBQUM7Q0FBQSxDQUFDLENBQ0giLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["async_handler_1","__importDefault","require","app_response_1","public_1","service_1","default","post","insertEvent","req","res","eventData","body","data","buildResponse","get","status","json","getEventData","delete","deleteAppointment","next","id","params","deleteAppointmentItem","deleted","put","updateAppointmentItem","formData","updated"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/appointment/controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport asyncHandler from \"../../helper/async-handler\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\nimport CalendarService from \"./service\";\n\nroutes.post(\n  \"/insertAppointment\",\n  asyncHandler(async function insertEvent(req: any, res: any) {\n    const eventData = req.body;\n    const data = await CalendarService.insertEvent(eventData);\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nroutes.get(\n  \"/getAppointment\",\n  asyncHandler(async function getEventData(req: any, res: any) {\n    const data = await CalendarService.getEventData();\n    const buildResponse = BuildResponse.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  })\n);\n\nroutes.delete(\n  \"/deleteAppointment/delete/:id\",\n  asyncHandler(async function deleteAppointment(\n    req: Request,\n    res: Response,\n    next: NextFunction\n  ): Promise<any> {\n    const { id } = req.params;\n    await CalendarService.deleteAppointmentItem(id);\n    const buildResponse = BuildResponse.deleted({});\n    return res.status(200).json(buildResponse);\n  })\n);\n\nroutes.put(\n  \"/updateAppointment/update\",\n  asyncHandler(async function updateAppointmentItem(\n    req: Request,\n    res: Response\n  ) : Promise<any>{\n    const formData = req.body;\n    const data = await CalendarService.updateAppointmentItem(formData);\n    const buildResponse = BuildResponse.updated(data);\n    return res.status(201).json(buildResponse);\n  })\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,SAAA,GAAAJ,eAAA,CAAAC,OAAA;AAEAE,QAAA,CAAAE,OAAM,CAACC,IAAI,CACT,oBAAoB,EACpB,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,SAAS,GAAGF,GAAG,CAACG,IAAI;IAC1B,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACE,WAAW,CAACG,SAAS,CAAC;IACzD,MAAMG,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7C,IAAIC,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACS,GAAG,CACR,iBAAiB,EACjB,IAAAf,eAAA,CAAAM,OAAY,EAAC,SAAeY,YAAYA,CAACT,GAAQ,EAAEC,GAAQ;;IACzD,MAAMG,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACY,YAAY,EAAE;IACjD,MAAMJ,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACS,GAAG,CAACF,IAAI,CAAC;IAC7C,IAAIC,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACa,MAAM,CACX,+BAA+B,EAC/B,IAAAnB,eAAA,CAAAM,OAAY,EAAC,SAAec,iBAAiBA,CAC3CX,GAAY,EACZC,GAAa,EACbW,IAAkB;;IAElB,MAAM;MAAEC;IAAE,CAAE,GAAGb,GAAG,CAACc,MAAM;IACzB,MAAMlB,SAAA,CAAAC,OAAe,CAACkB,qBAAqB,CAACF,EAAE,CAAC;IAC/C,MAAMR,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACmB,OAAO,CAAC,EAAE,CAAC;IAC/C,OAAOf,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH;AAEDV,QAAA,CAAAE,OAAM,CAACoB,GAAG,CACR,2BAA2B,EAC3B,IAAA1B,eAAA,CAAAM,OAAY,EAAC,SAAeqB,qBAAqBA,CAC/ClB,GAAY,EACZC,GAAa;;IAEb,MAAMkB,QAAQ,GAAGnB,GAAG,CAACG,IAAI;IACzB,MAAMC,IAAI,GAAG,MAAMR,SAAA,CAAAC,OAAe,CAACqB,qBAAqB,CAACC,QAAQ,CAAC;IAClE,MAAMd,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACuB,OAAO,CAAChB,IAAI,CAAC;IACjD,OAAOH,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EAC5C,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\appointment\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nclass CalendarService {\n  static insertEvent(eventData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.saveAppointment)(eventData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static getEventData() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getAppointment)();\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      }\n    });\n  }\n  static deleteAppointmentItem(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deleteAppointment)(id);\n      return data;\n    });\n  }\n  static updateAppointmentItem(dataAppintment) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updateAppointment)(dataAppintment);\n      data;\n    });\n  }\n}\nexports.default = CalendarService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkNhbGVuZGFyU2VydmljZSIsImluc2VydEV2ZW50IiwiZXZlbnREYXRhIiwiZGF0YSIsInNhdmVBcHBvaW50bWVudCIsIm1lc3NhZ2UiLCJnZXRFdmVudERhdGEiLCJnZXRBcHBvaW50bWVudCIsImRlbGV0ZUFwcG9pbnRtZW50SXRlbSIsImlkIiwiZGVsZXRlQXBwb2ludG1lbnQiLCJ1cGRhdGVBcHBvaW50bWVudEl0ZW0iLCJkYXRhQXBwaW50bWVudCIsInVwZGF0ZUFwcG9pbnRtZW50IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhcHBvaW50bWVudFxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hcHBvaW50bWVudC9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGRlbGV0ZUFwcG9pbnRtZW50LFxuICBnZXRBcHBvaW50bWVudCxcbiAgc2F2ZUFwcG9pbnRtZW50LFxuICB1cGRhdGVBcHBvaW50bWVudCxcbn0gZnJvbSBcIi4uLy4uL2Jpbi9kYlwiO1xuaW1wb3J0IHsgSUFwcG9pbnRtZW50IH0gZnJvbSBcIi4uLy4uL3R5cGVzL2FwcG9pbnRtZW50LmludGVyZmFjZVwiO1xuXG5jbGFzcyBDYWxlbmRhclNlcnZpY2Uge1xuICBwdWJsaWMgc3RhdGljIGFzeW5jIGluc2VydEV2ZW50KGV2ZW50RGF0YTogSUFwcG9pbnRtZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHNhdmVBcHBvaW50bWVudChldmVudERhdGEpO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRFdmVudERhdGEoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGdldEFwcG9pbnRtZW50KCk7XG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgZGF0YSB9O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlQXBwb2ludG1lbnRJdGVtKGlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlQXBwb2ludG1lbnQoaWQpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBhc3luYyB1cGRhdGVBcHBvaW50bWVudEl0ZW0oZGF0YUFwcGludG1lbnQ6IElBcHBvaW50bWVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB1cGRhdGVBcHBvaW50bWVudChkYXRhQXBwaW50bWVudCk7XG4gICAgZGF0YTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgQ2FsZW5kYXJTZXJ2aWNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQVFBLE1BQU1DLGVBQWU7RUFDWixPQUFhQyxXQUFXQSxDQUFDQyxTQUF1Qjs7TUFDckQsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUwsSUFBQSxDQUFBTSxlQUFlLEVBQUNGLFNBQVMsQ0FBQztNQUM3QyxJQUFJQyxJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVFLE9BQU8sRUFBRSxJQUFJO1VBQUVGO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7O0VBRU0sT0FBYUcsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUgsSUFBSSxHQUFHLE1BQU0sSUFBQUwsSUFBQSxDQUFBUyxjQUFjLEdBQUU7TUFDbkMsSUFBSUosSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFJLENBQUU7TUFDaEM7SUFDRixDQUFDOztFQUVNLE9BQWFLLHFCQUFxQkEsQ0FBQ0MsRUFBVTs7TUFDbEQsTUFBTU4sSUFBSSxHQUFHLE1BQU0sSUFBQUwsSUFBQSxDQUFBWSxpQkFBaUIsRUFBQ0QsRUFBRSxDQUFDO01BQ3hDLE9BQU9OLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFRLHFCQUFxQkEsQ0FBQ0MsY0FBNEI7O01BQ3BFLE1BQU1ULElBQUksR0FBRyxNQUFNLElBQUFMLElBQUEsQ0FBQWUsaUJBQWlCLEVBQUNELGNBQWMsQ0FBQztNQUNwRFQsSUFBSTtJQUNOLENBQUM7OztBQUVIVyxPQUFBLENBQUFDLE9BQUEsR0FBZWYsZUFBZSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["db_1","require","CalendarService","insertEvent","eventData","data","saveAppointment","message","getEventData","getAppointment","deleteAppointmentItem","id","deleteAppointment","updateAppointmentItem","dataAppintment","updateAppointment","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\appointment\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/appointment/service.ts"],"sourcesContent":["import {\n  deleteAppointment,\n  getAppointment,\n  saveAppointment,\n  updateAppointment,\n} from \"../../bin/db\";\nimport { IAppointment } from \"../../types/appointment.interface\";\n\nclass CalendarService {\n  public static async insertEvent(eventData: IAppointment) {\n    const data = await saveAppointment(eventData);\n    if (data) {\n      return { message: \"ok\", data };\n    } else {\n      return null;\n    }\n  }\n\n  public static async getEventData() {\n    const data = await getAppointment();\n    if (data) {\n      return { message: \"ok\", data };\n    }\n  }\n\n  public static async deleteAppointmentItem(id: string) {\n    const data = await deleteAppointment(id);\n    return data;\n  }\n\n  public static async updateAppointmentItem(dataAppintment: IAppointment) {\n    const data = await updateAppointment(dataAppintment);\n    data;\n  }\n}\nexport default CalendarService;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAQA,MAAMC,eAAe;EACZ,OAAaC,WAAWA,CAACC,SAAuB;;MACrD,MAAMC,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAM,eAAe,EAACF,SAAS,CAAC;MAC7C,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaG,YAAYA,CAAA;;MAC9B,MAAMH,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAS,cAAc,GAAE;MACnC,IAAIJ,IAAI,EAAE;QACR,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAI,CAAE;MAChC;IACF,CAAC;;EAEM,OAAaK,qBAAqBA,CAACC,EAAU;;MAClD,MAAMN,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAY,iBAAiB,EAACD,EAAE,CAAC;MACxC,OAAON,IAAI;IACb,CAAC;;EAEM,OAAaQ,qBAAqBA,CAACC,cAA4B;;MACpE,MAAMT,IAAI,GAAG,MAAM,IAAAL,IAAA,CAAAe,iBAAiB,EAACD,cAAc,CAAC;MACpDT,IAAI;IACN,CAAC;;;AAEHW,OAAA,CAAAC,OAAA,GAAef,eAAe","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst services_1 = require(\"./services\");\npublic_1.default.get(\"/patients\", (0, async_handler_1.default)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.CustomersService.getPatients();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJwdWJsaWNfMSIsInNlcnZpY2VzXzEiLCJkZWZhdWx0IiwiZ2V0IiwiZ2V0TmF2SXRlbXMiLCJyZXEiLCJyZXMiLCJkYXRhIiwiQ3VzdG9tZXJzU2VydmljZSIsImdldFBhdGllbnRzIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxjdXN0b21lcnNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvY3VzdG9tZXJzL2NvbnRyb2xsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFzeW5jSGFuZGxlciBmcm9tIFwiLi4vLi4vaGVscGVyL2FzeW5jLWhhbmRsZXJcIjtcclxuaW1wb3J0IEJ1aWxkUmVzcG9uc2UgZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgQ3VzdG9tZXJzU2VydmljZSB9IGZyb20gXCIuL3NlcnZpY2VzXCI7XHJcblxyXG5yb3V0ZXMuZ2V0KFxyXG4gIFwiL3BhdGllbnRzXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGdldE5hdkl0ZW1zKHJlcTogYW55LCByZXM6IGFueSkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IEN1c3RvbWVyc1NlcnZpY2UuZ2V0UGF0aWVudHMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxlQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUYsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUUsUUFBQSxHQUFBSCxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRyxVQUFBLEdBQUFILE9BQUE7QUFFQUUsUUFBQSxDQUFBRSxPQUFNLENBQUNDLEdBQUcsQ0FDUixXQUFXLEVBQ1gsSUFBQVAsZUFBQSxDQUFBTSxPQUFZLEVBQUMsU0FBZUUsV0FBV0EsQ0FBQ0MsR0FBUSxFQUFFQyxHQUFROztJQUN4RCxNQUFNQyxJQUFJLEdBQUcsTUFBTU4sVUFBQSxDQUFBTyxnQkFBZ0IsQ0FBQ0MsV0FBVyxFQUFFO0lBQ2pELE1BQU1DLGFBQWEsR0FBR1gsY0FBQSxDQUFBRyxPQUFhLENBQUNDLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDO0lBQzdDLElBQUlHLGFBQWEsRUFBRTtNQUNqQixPQUFPSixHQUFHLENBQUNLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDRixhQUFhLENBQUM7SUFDNUM7RUFDRixDQUFDO0NBQUEsQ0FBQyxDQUNIIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["async_handler_1","__importDefault","require","app_response_1","public_1","services_1","default","get","getNavItems","req","res","data","CustomersService","getPatients","buildResponse","status","json"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\customers\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/customers/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\r\nimport BuildResponse from \"../../modules/response/app_response\";\r\nimport routes from \"../../routes/public\";\r\nimport { CustomersService } from \"./services\";\r\n\r\nroutes.get(\r\n  \"/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await CustomersService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,cAAA,GAAAF,eAAA,CAAAC,OAAA;AACA,MAAAE,QAAA,GAAAH,eAAA,CAAAC,OAAA;AACA,MAAAG,UAAA,GAAAH,OAAA;AAEAE,QAAA,CAAAE,OAAM,CAACC,GAAG,CACR,WAAW,EACX,IAAAP,eAAA,CAAAM,OAAY,EAAC,SAAeE,WAAWA,CAACC,GAAQ,EAAEC,GAAQ;;IACxD,MAAMC,IAAI,GAAG,MAAMN,UAAA,CAAAO,gBAAgB,CAACC,WAAW,EAAE;IACjD,MAAMC,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7C,IAAIG,aAAa,EAAE;MACjB,OAAOJ,GAAG,CAACK,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,aAAa,CAAC;IAC5C;EACF,CAAC;CAAA,CAAC,CACH","ignoreList":[]}},"mtime":1722385868209},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\customers\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CustomersService = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass CustomersService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n}\nexports.CustomersService = CustomersService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIkN1c3RvbWVyc1NlcnZpY2UiLCJnZXRQYXRpZW50cyIsImRhdGEiLCJtZXNzYWdlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXGNvbnRyb2xsZXJcXGN1c3RvbWVyc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9jdXN0b21lcnMvc2VydmljZXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0UGF0aWVudHMgfSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcblxyXG5cclxuY2xhc3MgQ3VzdG9tZXJzU2VydmljZSB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGdldFBhdGllbnRzKCkge1xyXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0UGF0aWVudHMoKTtcclxuICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4geyBtZXNzYWdlOiBgb2tgLCBkYXRhIH07XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuZXhwb3J0IHsgQ3VzdG9tZXJzU2VydmljZSB9O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLElBQUEsR0FBQUMsT0FBQTtBQUdBLE1BQU1DLGdCQUFnQjtFQUNYLE9BQWFDLFdBQVdBLENBQUE7O01BQzdCLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQUcsV0FBVyxHQUFFO01BQ2hDLElBQUlDLElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDO01BQ0EsT0FBTyxJQUFJO0lBQ2IsQ0FBQzs7O0FBR0lFLE9BQUEsQ0FBQUosZ0JBQUEsR0FBQUEsZ0JBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","CustomersService","getPatients","data","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\customers\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/customers/services.ts"],"sourcesContent":["import { getPatients } from \"../../bin/db\";\r\n\r\n\r\nclass CustomersService {\r\n    public static async getPatients() {\r\n      const data = await getPatients();\r\n      if (data) {\r\n        return { message: `ok`, data };\r\n      }\r\n      return null;\r\n    }\r\n  }\r\n\r\nexport { CustomersService };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAGA,MAAMC,gBAAgB;EACX,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;;AAGIE,OAAA,CAAAJ,gBAAA,GAAAA,gBAAA","ignoreList":[]}},"mtime":1722385868209},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst service_1 = require(\"./service\");\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\npublic_1.default.get(`/getUserAdmin`, function userAdmin(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield service_1.UserAdmin.getUserAdmin();\n    const buildResponse = app_response_1.default.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZXJ2aWNlXzEiLCJyZXF1aXJlIiwiYXBwX3Jlc3BvbnNlXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJwdWJsaWNfMSIsImRlZmF1bHQiLCJnZXQiLCJ1c2VyQWRtaW4iLCJyZXEiLCJyZXMiLCJkYXRhIiwiVXNlckFkbWluIiwiZ2V0VXNlckFkbWluIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImNvZGUiLCJqc29uIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29udHJvbGxlclxcYWRtaW5cXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL2NvbnRyb2xsZXIvYWRtaW4vY29udHJvbGxlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgeyBVc2VyQWRtaW4gfSBmcm9tIFwiLi9zZXJ2aWNlXCI7XG5pbXBvcnQgQnVpbGRSZXNwb25zZSBmcm9tIFwiLi4vLi4vbW9kdWxlcy9yZXNwb25zZS9hcHBfcmVzcG9uc2VcIjtcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcblxuXG5yb3V0ZXMuZ2V0KFxuICBgL2dldFVzZXJBZG1pbmAsXG4gIGFzeW5jIGZ1bmN0aW9uIHVzZXJBZG1pbihyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgVXNlckFkbWluLmdldFVzZXJBZG1pbigpO1xuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcbiAgICByZXMuc3RhdHVzKGJ1aWxkUmVzcG9uc2UuY29kZSkuanNvbihidWlsZFJlc3BvbnNlKTtcbiAgfVxuKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLE1BQUFBLFNBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLGNBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsUUFBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFHQUcsUUFBQSxDQUFBQyxPQUFNLENBQUNDLEdBQUcsQ0FDUixlQUFlLEVBQ2YsU0FBZUMsU0FBU0EsQ0FBQ0MsR0FBWSxFQUFFQyxHQUFhOztJQUNsRCxNQUFNQyxJQUFJLEdBQUcsTUFBTVYsU0FBQSxDQUFBVyxTQUFTLENBQUNDLFlBQVksRUFBRTtJQUMzQyxNQUFNQyxhQUFhLEdBQUdYLGNBQUEsQ0FBQUcsT0FBYSxDQUFDQyxHQUFHLENBQUNJLElBQUksQ0FBQztJQUM3Q0QsR0FBRyxDQUFDSyxNQUFNLENBQUNELGFBQWEsQ0FBQ0UsSUFBSSxDQUFDLENBQUNDLElBQUksQ0FBQ0gsYUFBYSxDQUFDO0VBQ3BELENBQUM7Q0FBQSxDQUNGIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["service_1","require","app_response_1","__importDefault","public_1","default","get","userAdmin","req","res","data","UserAdmin","getUserAdmin","buildResponse","status","code","json"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/admin/controller.ts"],"sourcesContent":["import { Request, Response } from \"express\";\nimport { UserAdmin } from \"./service\";\nimport BuildResponse from \"../../modules/response/app_response\";\nimport routes from \"../../routes/public\";\n\n\nroutes.get(\n  `/getUserAdmin`,\n  async function userAdmin(req: Request, res: Response) {\n    const data = await UserAdmin.getUserAdmin();\n    const buildResponse = BuildResponse.get(data);\n    res.status(buildResponse.code).json(buildResponse);\n  }\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,cAAA,GAAAC,eAAA,CAAAF,OAAA;AACA,MAAAG,QAAA,GAAAD,eAAA,CAAAF,OAAA;AAGAG,QAAA,CAAAC,OAAM,CAACC,GAAG,CACR,eAAe,EACf,SAAeC,SAASA,CAACC,GAAY,EAAEC,GAAa;;IAClD,MAAMC,IAAI,GAAG,MAAMV,SAAA,CAAAW,SAAS,CAACC,YAAY,EAAE;IAC3C,MAAMC,aAAa,GAAGX,cAAA,CAAAG,OAAa,CAACC,GAAG,CAACI,IAAI,CAAC;IAC7CD,GAAG,CAACK,MAAM,CAACD,aAAa,CAACE,IAAI,CAAC,CAACC,IAAI,CAACH,aAAa,CAAC;EACpD,CAAC;CAAA,CACF","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\admin\\\\service.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.UserAdmin = void 0;\nconst db_1 = require(\"../../bin/db\");\nclass UserAdmin {\n  static getUserAdmin() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const admin = yield (0, db_1.getAdmins)();\n      if (admin) {\n        return {\n          message: \"ok\",\n          admin\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.UserAdmin = UserAdmin;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlVzZXJBZG1pbiIsImdldFVzZXJBZG1pbiIsImFkbWluIiwiZ2V0QWRtaW5zIiwibWVzc2FnZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxhZG1pblxcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9hZG1pbi9zZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldEFkbWlucyB9IGZyb20gXCIuLi8uLi9iaW4vZGJcIjtcblxuY2xhc3MgVXNlckFkbWluIHtcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRVc2VyQWRtaW4oKSB7XG4gICAgY29uc3QgYWRtaW4gPSBhd2FpdCBnZXRBZG1pbnMoKTtcbiAgICBpZiAoYWRtaW4pIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IFwib2tcIiwgYWRtaW4gfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IFVzZXJBZG1pbiB9O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFNQyxTQUFTO0VBQ04sT0FBYUMsWUFBWUEsQ0FBQTs7TUFDOUIsTUFBTUMsS0FBSyxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBSyxTQUFTLEdBQUU7TUFDL0IsSUFBSUQsS0FBSyxFQUFFO1FBQ1QsT0FBTztVQUFFRSxPQUFPLEVBQUUsSUFBSTtVQUFFRjtRQUFLLENBQUU7TUFDakMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOzs7QUFHTUcsT0FBQSxDQUFBTCxTQUFBLEdBQUFBLFNBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","UserAdmin","getUserAdmin","admin","getAdmins","message","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\admin\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/admin/service.ts"],"sourcesContent":["import { getAdmins } from \"../../bin/db\";\n\nclass UserAdmin {\n  public static async getUserAdmin() {\n    const admin = await getAdmins();\n    if (admin) {\n      return { message: \"ok\", admin };\n    } else {\n      return null;\n    }\n  }\n}\n\nexport { UserAdmin };\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAEA,MAAMC,SAAS;EACN,OAAaC,YAAYA,CAAA;;MAC9B,MAAMC,KAAK,GAAG,MAAM,IAAAJ,IAAA,CAAAK,SAAS,GAAE;MAC/B,IAAID,KAAK,EAAE;QACT,OAAO;UAAEE,OAAO,EAAE,IAAI;UAAEF;QAAK,CAAE;MACjC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGMG,OAAA,CAAAL,SAAA,GAAAA,SAAA","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\controller.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst async_handler_1 = __importDefault(require(\"../../helper/async-handler\"));\nconst public_1 = __importDefault(require(\"../../routes/public\"));\nconst services_1 = __importDefault(require(\"./services\"));\nconst app_response_1 = __importDefault(require(\"../../modules/response/app_response\"));\nconst multer_1 = __importDefault(require(\"multer\"));\nconst storage = multer_1.default.diskStorage({\n  destination: (req, file, cb) => {\n    cb(null, \"public/imgProfile\");\n  },\n  filename: (req, file, cb) => {\n    cb(null, file.originalname);\n  }\n});\nconst uploadImgProfile = (0, multer_1.default)({\n  storage\n});\n// **** GetAll\npublic_1.default.get(\"/admin/patients\", (0, async_handler_1.default)(function getNavItems(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const data = yield services_1.default.getPatients();\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n  });\n}));\n// **** checkPhoneNumberExists\npublic_1.default.get(\"/admin/check-phone/:phone\", (0, async_handler_1.default)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const mobile = req.params.mobile;\n  const data = yield services_1.default.checkExistMobile(mobile);\n  const buildResponse = app_response_1.default.get(data);\n  if (buildResponse) {\n    return buildResponse;\n  } else {\n    return false;\n  }\n})));\n// **** add-patient\npublic_1.default.post(`/admin/add-patient`, (0, async_handler_1.default)(function addPatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.default.registerPatient(formData);\n    const buildResponse = app_response_1.default.get(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** GetPatientDetial\npublic_1.default.get(`/admin/patient-detial/:patientId`, (0, async_handler_1.default)((req, res) => __awaiter(void 0, void 0, void 0, function* () {\n  const patientId = +req.params.patientId;\n  const data = yield services_1.default.patientDetial(patientId);\n  const buildResponse = app_response_1.default.get(data);\n  if (buildResponse) {\n    return res.status(200).json(buildResponse);\n  }\n  return;\n})));\n// **** uploadImage\npublic_1.default.post(\"/admin/uploadImage\", uploadImgProfile.single(\"file\"), (req, res) => {\n  if (!req.file) {\n    return res.status(400).json({\n      error: \"No file uploaded\"\n    });\n  }\n  res.json({\n    message: \"File uploaded seccessfully\",\n    filename: req.file.filename\n  });\n  const imagePath = req.file.path;\n  res.json({\n    imagePath\n  });\n});\n// **** updatePatient\npublic_1.default.put(\"/admin/updatePatient\", (0, async_handler_1.default)(function updatePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const formData = req.body;\n    const data = yield services_1.default.updatePatient(formData);\n    const buildResponse = app_response_1.default.updated(data);\n    if (buildResponse) {\n      return res.status(200).json(buildResponse);\n    }\n    return formData;\n  });\n}));\n// **** deletePatient\npublic_1.default.delete(\"/admin/deletePatient/:idPateint\", (0, async_handler_1.default)(function deletePatient(req, res) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const idPateint = +req.params.idPateint;\n    yield services_1.default.deletePatient(idPateint);\n    const buildResponse = app_response_1.default.deleted(idPateint);\n    return res.status(200).json(buildResponse);\n  });\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3luY19oYW5kbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwicHVibGljXzEiLCJzZXJ2aWNlc18xIiwiYXBwX3Jlc3BvbnNlXzEiLCJtdWx0ZXJfMSIsInN0b3JhZ2UiLCJkZWZhdWx0IiwiZGlza1N0b3JhZ2UiLCJkZXN0aW5hdGlvbiIsInJlcSIsImZpbGUiLCJjYiIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwidXBsb2FkSW1nUHJvZmlsZSIsImdldCIsImdldE5hdkl0ZW1zIiwicmVzIiwiZGF0YSIsImdldFBhdGllbnRzIiwiYnVpbGRSZXNwb25zZSIsInN0YXR1cyIsImpzb24iLCJfX2F3YWl0ZXIiLCJtb2JpbGUiLCJwYXJhbXMiLCJjaGVja0V4aXN0TW9iaWxlIiwicG9zdCIsImFkZFBhdGllbnQiLCJmb3JtRGF0YSIsImJvZHkiLCJyZWdpc3RlclBhdGllbnQiLCJwYXRpZW50SWQiLCJwYXRpZW50RGV0aWFsIiwic2luZ2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwiaW1hZ2VQYXRoIiwicGF0aCIsInB1dCIsInVwZGF0ZVBhdGllbnQiLCJ1cGRhdGVkIiwiZGVsZXRlIiwiZGVsZXRlUGF0aWVudCIsImlkUGF0ZWludCIsImRlbGV0ZWQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwYXRpZW50c1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9wYXRpZW50cy9jb250cm9sbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBhc3luY0hhbmRsZXIgZnJvbSBcIi4uLy4uL2hlbHBlci9hc3luYy1oYW5kbGVyXCI7XHJcbmltcG9ydCByb3V0ZXMgZnJvbSBcIi4uLy4uL3JvdXRlcy9wdWJsaWNcIjtcclxuaW1wb3J0IHsgUmVxdWVzdCwgUmVzcG9uc2UgfSBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgUGF0aWVudFNlcnZpY2UgZnJvbSBcIi4vc2VydmljZXNcIjtcclxuaW1wb3J0IEJ1aWxkUmVzcG9uc2UgZnJvbSBcIi4uLy4uL21vZHVsZXMvcmVzcG9uc2UvYXBwX3Jlc3BvbnNlXCI7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSBcIm11bHRlclwiO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgZGVzdGluYXRpb246IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBcInB1YmxpYy9pbWdQcm9maWxlXCIpO1xyXG4gIH0sXHJcbiAgZmlsZW5hbWU6IChyZXEsIGZpbGUsIGNiKSA9PiB7XHJcbiAgICBjYihudWxsLCBmaWxlLm9yaWdpbmFsbmFtZSk7XHJcbiAgfSxcclxufSk7XHJcblxyXG5jb25zdCB1cGxvYWRJbWdQcm9maWxlID0gbXVsdGVyKHsgc3RvcmFnZSB9KTtcclxuXHJcbi8vICoqKiogR2V0QWxsXHJcbnJvdXRlcy5nZXQoXHJcbiAgXCIvYWRtaW4vcGF0aWVudHNcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZ2V0TmF2SXRlbXMocmVxOiBhbnksIHJlczogYW55KSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuZ2V0UGF0aWVudHMoKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICB9KVxyXG4pO1xyXG5cclxuLy8gKioqKiBjaGVja1Bob25lTnVtYmVyRXhpc3RzXHJcbnJvdXRlcy5nZXQoXHJcbiAgXCIvYWRtaW4vY2hlY2stcGhvbmUvOnBob25lXCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgbW9iaWxlID0gcmVxLnBhcmFtcy5tb2JpbGU7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgUGF0aWVudFNlcnZpY2UuY2hlY2tFeGlzdE1vYmlsZShtb2JpbGUpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZ2V0KGRhdGEpO1xyXG4gICAgaWYgKGJ1aWxkUmVzcG9uc2UpIHtcclxuICAgICAgcmV0dXJuIGJ1aWxkUmVzcG9uc2U7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogYWRkLXBhdGllbnRcclxucm91dGVzLnBvc3QoXHJcbiAgYC9hZG1pbi9hZGQtcGF0aWVudGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIGFkZFBhdGllbnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YSk7XHJcbiAgICBjb25zdCBidWlsZFJlc3BvbnNlID0gQnVpbGRSZXNwb25zZS5nZXQoZGF0YSk7XHJcbiAgICBpZiAoYnVpbGRSZXNwb25zZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oYnVpbGRSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgfSlcclxuKTtcclxuXHJcbi8vICoqKiogR2V0UGF0aWVudERldGlhbFxyXG5yb3V0ZXMuZ2V0KFxyXG4gIGAvYWRtaW4vcGF0aWVudC1kZXRpYWwvOnBhdGllbnRJZGAsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIChyZXE6IFJlcXVlc3QsIHJlczogUmVzcG9uc2UpOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgY29uc3QgcGF0aWVudElkID0gK3JlcS5wYXJhbXMucGF0aWVudElkO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnBhdGllbnREZXRpYWwocGF0aWVudElkKTtcclxuICAgIGNvbnN0IGJ1aWxkUmVzcG9uc2UgPSBCdWlsZFJlc3BvbnNlLmdldChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybjtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIHVwbG9hZEltYWdlXHJcbnJvdXRlcy5wb3N0KFxyXG4gIFwiL2FkbWluL3VwbG9hZEltYWdlXCIsXHJcbiAgdXBsb2FkSW1nUHJvZmlsZS5zaW5nbGUoXCJmaWxlXCIpLFxyXG4gIChyZXEsIHJlcykgPT4ge1xyXG4gICAgaWYgKCFyZXEuZmlsZSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJObyBmaWxlIHVwbG9hZGVkXCIgfSk7XHJcbiAgICB9XHJcbiAgICByZXMuanNvbih7XHJcbiAgICAgIG1lc3NhZ2U6IFwiRmlsZSB1cGxvYWRlZCBzZWNjZXNzZnVsbHlcIixcclxuICAgICAgZmlsZW5hbWU6IHJlcS5maWxlLmZpbGVuYW1lLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBpbWFnZVBhdGggPSByZXEuZmlsZS5wYXRoO1xyXG4gICAgcmVzLmpzb24oeyBpbWFnZVBhdGggfSk7XHJcbiAgfVxyXG4pO1xyXG4vLyAqKioqIHVwZGF0ZVBhdGllbnRcclxucm91dGVzLnB1dChcclxuICBcIi9hZG1pbi91cGRhdGVQYXRpZW50XCIsXHJcbiAgYXN5bmNIYW5kbGVyKGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQocmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IHJlcS5ib2R5O1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IFBhdGllbnRTZXJ2aWNlLnVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UudXBkYXRlZChkYXRhKTtcclxuICAgIGlmIChidWlsZFJlc3BvbnNlKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihidWlsZFJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtRGF0YTtcclxuICB9KVxyXG4pO1xyXG4vLyAqKioqIGRlbGV0ZVBhdGllbnRcclxucm91dGVzLmRlbGV0ZShcclxuICBcIi9hZG1pbi9kZWxldGVQYXRpZW50LzppZFBhdGVpbnRcIixcclxuICBhc3luY0hhbmRsZXIoYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGF0aWVudChcclxuICAgIHJlcTogUmVxdWVzdCxcclxuICAgIHJlczogUmVzcG9uc2VcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgY29uc3QgaWRQYXRlaW50ID0gK3JlcS5wYXJhbXMuaWRQYXRlaW50O1xyXG4gICAgYXdhaXQgUGF0aWVudFNlcnZpY2UuZGVsZXRlUGF0aWVudChpZFBhdGVpbnQpO1xyXG4gICAgY29uc3QgYnVpbGRSZXNwb25zZSA9IEJ1aWxkUmVzcG9uc2UuZGVsZXRlZChpZFBhdGVpbnQpO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGJ1aWxkUmVzcG9uc2UpO1xyXG4gIH0pXHJcbik7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLGVBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFFQSxNQUFBRSxVQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFH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","map":{"version":3,"names":["async_handler_1","__importDefault","require","public_1","services_1","app_response_1","multer_1","storage","default","diskStorage","destination","req","file","cb","filename","originalname","uploadImgProfile","get","getNavItems","res","data","getPatients","buildResponse","status","json","__awaiter","mobile","params","checkExistMobile","post","addPatient","formData","body","registerPatient","patientId","patientDetial","single","error","message","imagePath","path","put","updatePatient","updated","delete","deletePatient","idPateint","deleted"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/patients/controller.ts"],"sourcesContent":["import asyncHandler from \"../../helper/async-handler\";\r\nimport routes from \"../../routes/public\";\r\nimport { Request, Response } from \"express\";\r\nimport PatientService from \"./services\";\r\nimport BuildResponse from \"../../modules/response/app_response\";\r\nimport multer from \"multer\";\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    cb(null, \"public/imgProfile\");\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, file.originalname);\r\n  },\r\n});\r\n\r\nconst uploadImgProfile = multer({ storage });\r\n\r\n// **** GetAll\r\nroutes.get(\r\n  \"/admin/patients\",\r\n  asyncHandler(async function getNavItems(req: any, res: any) {\r\n    const data = await PatientService.getPatients();\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n  })\r\n);\r\n\r\n// **** checkPhoneNumberExists\r\nroutes.get(\r\n  \"/admin/check-phone/:phone\",\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const mobile = req.params.mobile;\r\n    const data = await PatientService.checkExistMobile(mobile);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return buildResponse;\r\n    }else{\r\n      return false\r\n    }\r\n  })\r\n);\r\n\r\n// **** add-patient\r\nroutes.post(\r\n  `/admin/add-patient`,\r\n  asyncHandler(async function addPatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.registerPatient(formData);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n\r\n// **** GetPatientDetial\r\nroutes.get(\r\n  `/admin/patient-detial/:patientId`,\r\n  asyncHandler(async (req: Request, res: Response): Promise<any> => {\r\n    const patientId = +req.params.patientId;\r\n    const data = await PatientService.patientDetial(patientId);\r\n    const buildResponse = BuildResponse.get(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return;\r\n  })\r\n);\r\n// **** uploadImage\r\nroutes.post(\r\n  \"/admin/uploadImage\",\r\n  uploadImgProfile.single(\"file\"),\r\n  (req, res) => {\r\n    if (!req.file) {\r\n      return res.status(400).json({ error: \"No file uploaded\" });\r\n    }\r\n    res.json({\r\n      message: \"File uploaded seccessfully\",\r\n      filename: req.file.filename,\r\n    });\r\n    const imagePath = req.file.path;\r\n    res.json({ imagePath });\r\n  }\r\n);\r\n// **** updatePatient\r\nroutes.put(\r\n  \"/admin/updatePatient\",\r\n  asyncHandler(async function updatePatient(req: Request, res: Response) {\r\n    const formData = req.body;\r\n    const data = await PatientService.updatePatient(formData);\r\n    const buildResponse = BuildResponse.updated(data);\r\n    if (buildResponse) {\r\n      return res.status(200).json(buildResponse);\r\n    }\r\n    return formData;\r\n  })\r\n);\r\n// **** deletePatient\r\nroutes.delete(\r\n  \"/admin/deletePatient/:idPateint\",\r\n  asyncHandler(async function deletePatient(\r\n    req: Request,\r\n    res: Response\r\n  ): Promise<any> {\r\n    const idPateint = +req.params.idPateint;\r\n    await PatientService.deletePatient(idPateint);\r\n    const buildResponse = BuildResponse.deleted(idPateint);\r\n    return res.status(200).json(buildResponse);\r\n  })\r\n);\r\n"],"mappings":"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","ignoreList":[]}},"mtime":1722936328889},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\controller\\\\patients\\\\services.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst db_1 = require(\"../../bin/db\");\nclass PatientService {\n  static getPatients() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.getPatients)();\n      if (data) {\n        return {\n          message: `ok`,\n          data\n        };\n      }\n      return null;\n    });\n  }\n  static patientDetial(patientId) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.patientDetail)(patientId);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static checkExistMobile(mobile) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.checkPhoneNumberExists)(mobile);\n      if (data) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  static registerPatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.addPatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static updatePatient(formData) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.updatePatient)(formData);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n  static deletePatient(id) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const data = yield (0, db_1.deletePatient)(id);\n      if (data) {\n        return {\n          message: \"ok\",\n          data\n        };\n      } else {\n        return null;\n      }\n    });\n  }\n}\nexports.default = PatientService;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYl8xIiwicmVxdWlyZSIsIlBhdGllbnRTZXJ2aWNlIiwiZ2V0UGF0aWVudHMiLCJkYXRhIiwibWVzc2FnZSIsInBhdGllbnREZXRpYWwiLCJwYXRpZW50SWQiLCJwYXRpZW50RGV0YWlsIiwiY2hlY2tFeGlzdE1vYmlsZSIsIm1vYmlsZSIsImNoZWNrUGhvbmVOdW1iZXJFeGlzdHMiLCJyZWdpc3RlclBhdGllbnQiLCJmb3JtRGF0YSIsImFkZFBhdGllbnQiLCJ1cGRhdGVQYXRpZW50IiwiZGVsZXRlUGF0aWVudCIsImlkIiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxjb250cm9sbGVyXFxwYXRpZW50c1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvY29udHJvbGxlci9wYXRpZW50cy9zZXJ2aWNlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIGFkZFBhdGllbnQsXHJcbiAgY2hlY2tQaG9uZU51bWJlckV4aXN0cyxcclxuICBkZWxldGVQYXRpZW50LFxyXG4gIGdldFBhdGllbnRzLFxyXG4gIHBhdGllbnREZXRhaWwsXHJcbiAgdXBkYXRlUGF0aWVudCxcclxufSBmcm9tIFwiLi4vLi4vYmluL2RiXCI7XHJcbmltcG9ydCB7IFBhdGllbnREVE8gfSBmcm9tIFwiLi4vLi4vbW9kZWxzL3BhdGllbnRzXCI7XHJcblxyXG5jbGFzcyBQYXRpZW50U2VydmljZSB7XHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBnZXRQYXRpZW50cygpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRQYXRpZW50cygpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogYG9rYCwgZGF0YSB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHBhdGllbnREZXRpYWwocGF0aWVudElkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBwYXRpZW50RGV0YWlsKHBhdGllbnRJZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHN0YXRpYyBhc3luYyBjaGVja0V4aXN0TW9iaWxlKG1vYmlsZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgY2hlY2tQaG9uZU51bWJlckV4aXN0cyhtb2JpbGUpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc3RhdGljIGFzeW5jIHJlZ2lzdGVyUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGFkZFBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgdXBkYXRlUGF0aWVudChmb3JtRGF0YTogUGF0aWVudERUTykge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHVwZGF0ZVBhdGllbnQoZm9ybURhdGEpO1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogXCJva1wiLCBkYXRhIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzdGF0aWMgYXN5bmMgZGVsZXRlUGF0aWVudChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZGVsZXRlUGF0aWVudChpZCk7XHJcbiAgICBpZiAoZGF0YSkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiBcIm9rXCIsIGRhdGEgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGF0aWVudFNlcnZpY2U7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxNQUFBQSxJQUFBLEdBQUFDLE9BQUE7QUFVQSxNQUFNQyxjQUFjO0VBQ1gsT0FBYUMsV0FBV0EsQ0FBQTs7TUFDN0IsTUFBTUMsSUFBSSxHQUFHLE1BQU0sSUFBQUosSUFBQSxDQUFBRyxXQUFXLEdBQUU7TUFDaEMsSUFBSUMsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEM7TUFDQSxPQUFPLElBQUk7SUFDYixDQUFDOztFQUVNLE9BQWFFLGFBQWFBLENBQUNDLFNBQWlCOztNQUNqRCxNQUFNSCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFRLGFBQWEsRUFBQ0QsU0FBUyxDQUFDO01BQzNDLElBQUlILElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhSyxnQkFBZ0JBLENBQUNDLE1BQWM7O01BQ2pELE1BQU1OLElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQVcsc0JBQXNCLEVBQUNELE1BQU0sQ0FBQztNQUNqRCxJQUFJTixJQUFJLEVBQUU7UUFDUixPQUFPLElBQUk7TUFDYixDQUFDLE1BQU07UUFDTCxPQUFPLEtBQUs7TUFDZDtJQUNGLENBQUM7O0VBRU0sT0FBYVEsZUFBZUEsQ0FBQ0MsUUFBb0I7O01BQ3RELE1BQU1ULElBQUksR0FBRyxNQUFNLElBQUFKLElBQUEsQ0FBQWMsVUFBVSxFQUFDRCxRQUFRLENBQUM7TUFDdkMsSUFBSVQsSUFBSSxFQUFFO1FBQ1IsT0FBTztVQUFFQyxPQUFPLEVBQUUsSUFBSTtVQUFFRDtRQUFJLENBQUU7TUFDaEMsQ0FBQyxNQUFNO1FBQ0wsT0FBTyxJQUFJO01BQ2I7SUFDRixDQUFDOztFQUVNLE9BQWFXLGFBQWFBLENBQUNGLFFBQW9COztNQUNwRCxNQUFNVCxJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFlLGFBQWEsRUFBQ0YsUUFBUSxDQUFDO01BQzFDLElBQUlULElBQUksRUFBRTtRQUNSLE9BQU87VUFBRUMsT0FBTyxFQUFFLElBQUk7VUFBRUQ7UUFBSSxDQUFFO01BQ2hDLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSTtNQUNiO0lBQ0YsQ0FBQzs7RUFFTSxPQUFhWSxhQUFhQSxDQUFDQyxFQUFVOztNQUMxQyxNQUFNYixJQUFJLEdBQUcsTUFBTSxJQUFBSixJQUFBLENBQUFnQixhQUFhLEVBQUNDLEVBQUUsQ0FBQztNQUNwQyxJQUFJYixJQUFJLEVBQUU7UUFDUixPQUFPO1VBQUVDLE9BQU8sRUFBRSxJQUFJO1VBQUVEO1FBQUksQ0FBRTtNQUNoQyxDQUFDLE1BQU07UUFDTCxPQUFPLElBQUk7TUFDYjtJQUNGLENBQUM7OztBQUdIYyxPQUFBLENBQUFDLE9BQUEsR0FBZWpCLGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["db_1","require","PatientService","getPatients","data","message","patientDetial","patientId","patientDetail","checkExistMobile","mobile","checkPhoneNumberExists","registerPatient","formData","addPatient","updatePatient","deletePatient","id","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\controller\\patients\\","sources":["D:/Personal/My-projects/user-information/server/src/controller/patients/services.ts"],"sourcesContent":["import {\r\n  addPatient,\r\n  checkPhoneNumberExists,\r\n  deletePatient,\r\n  getPatients,\r\n  patientDetail,\r\n  updatePatient,\r\n} from \"../../bin/db\";\r\nimport { PatientDTO } from \"../../models/patients\";\r\n\r\nclass PatientService {\r\n  public static async getPatients() {\r\n    const data = await getPatients();\r\n    if (data) {\r\n      return { message: `ok`, data };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  public static async patientDetial(patientId: number) {\r\n    const data = await patientDetail(patientId);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async checkExistMobile(mobile: string): Promise<boolean> {\r\n    const data = await checkPhoneNumberExists(mobile);\r\n    if (data) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  public static async registerPatient(formData: PatientDTO) {\r\n    const data = await addPatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async updatePatient(formData: PatientDTO) {\r\n    const data = await updatePatient(formData);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  public static async deletePatient(id: number) {\r\n    const data = await deletePatient(id);\r\n    if (data) {\r\n      return { message: \"ok\", data };\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default PatientService;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,OAAA;AAUA,MAAMC,cAAc;EACX,OAAaC,WAAWA,CAAA;;MAC7B,MAAMC,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAG,WAAW,GAAE;MAChC,IAAIC,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC;MACA,OAAO,IAAI;IACb,CAAC;;EAEM,OAAaE,aAAaA,CAACC,SAAiB;;MACjD,MAAMH,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAQ,aAAa,EAACD,SAAS,CAAC;MAC3C,IAAIH,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaK,gBAAgBA,CAACC,MAAc;;MACjD,MAAMN,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAW,sBAAsB,EAACD,MAAM,CAAC;MACjD,IAAIN,IAAI,EAAE;QACR,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF,CAAC;;EAEM,OAAaQ,eAAeA,CAACC,QAAoB;;MACtD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAc,UAAU,EAACD,QAAQ,CAAC;MACvC,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaW,aAAaA,CAACF,QAAoB;;MACpD,MAAMT,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAe,aAAa,EAACF,QAAQ,CAAC;MAC1C,IAAIT,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;EAEM,OAAaY,aAAaA,CAACC,EAAU;;MAC1C,MAAMb,IAAI,GAAG,MAAM,IAAAJ,IAAA,CAAAgB,aAAa,EAACC,EAAE,CAAC;MACpC,IAAIb,IAAI,EAAE;QACR,OAAO;UAAEC,OAAO,EAAE,IAAI;UAAED;QAAI,CAAE;MAChC,CAAC,MAAM;QACL,OAAO,IAAI;MACb;IACF,CAAC;;;AAGHc,OAAA,CAAAC,OAAA,GAAejB,cAAc","ignoreList":[]}},"mtime":1722936328889},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_yup.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst yup_1 = require(\"yup\");\nfunction ExpressErrorYup(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof yup_1.ValidationError) {\n      console.log('ERROR YUP VALIDATION');\n      const error = {\n        code: 422,\n        message: err.errors.join('<br/>') || 'Yup Validation Error !',\n        errors: err.inner.length > 0 ? err.inner.reduce((acc, curVal) => {\n          acc[`${curVal.path}`] = curVal.message || curVal.type;\n          return acc;\n        }, {}) : {\n          [`${err.path}`]: err.message || err.type\n        }\n      };\n      return res.status(422).json(error);\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorYup;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ5dXBfMSIsInJlcXVpcmUiLCJFeHByZXNzRXJyb3JZdXAiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJlcnJvcnMiLCJqb2luIiwiaW5uZXIiLCJsZW5ndGgiLCJyZWR1Y2UiLCJhY2MiLCJjdXJWYWwiLCJwYXRoIiwidHlwZSIsInN0YXR1cyIsImpzb24iLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3l1cC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0RnVuY3Rpb24sIFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gXCJ5dXBcIjtcblxuYXN5bmMgZnVuY3Rpb24gRXhwcmVzc0Vycm9yWXVwKFxuICAgIGVycjogYW55LFxuICAgIHJlcTogUmVxdWVzdCxcbiAgICByZXM6IFJlc3BvbnNlLFxuICAgIG5leHQ6IE5leHRGdW5jdGlvblxuKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIFZhbGlkYXRpb25FcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnRVJST1IgWVVQIFZBTElEQVRJT04nKTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiA0MjIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnIuZXJyb3JzLmpvaW4oJzxici8+JykgfHwgJ1l1cCBWYWxpZGF0aW9uIEVycm9yICEnLFxuICAgICAgICAgICAgZXJyb3JzOlxuICAgICAgICAgICAgICAgIGVyci5pbm5lci5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gZXJyLmlubmVyLnJlZHVjZSgoYWNjOiBhbnksIGN1clZhbDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NbYCR7Y3VyVmFsLnBhdGh9YF0gPSBjdXJWYWwubWVzc2FnZSB8fCBjdXJWYWwudHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgICAgICAgICAgICAgICB9LCB7fSlcbiAgICAgICAgICAgICAgICAgICAgOiB7IFtgJHtlcnIucGF0aH1gXTogZXJyLm1lc3NhZ2UgfHwgZXJyLnR5cGUgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuanNvbihlcnJvcik7XG4gICAgfVxuICAgIG5leHQoZXJyKVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4cHJlc3NFcnJvcll1cCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDQSxNQUFBQSxLQUFBLEdBQUFDLE9BQUE7QUFFQSxTQUFlQyxlQUFlQSxDQUMxQkMsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWUgsS0FBQSxDQUFBTyxlQUFlLEVBQUU7TUFDaENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHNCQUFzQixDQUFDO01BQ25DLE1BQU1DLEtBQUssR0FBRztRQUNWQyxJQUFJLEVBQUUsR0FBRztRQUNUQyxPQUFPLEVBQUVULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksd0JBQXdCO1FBQzdERCxNQUFNLEVBQ0ZWLEdBQUcsQ0FBQ1ksS0FBSyxDQUFDQyxNQUFNLEdBQUcsQ0FBQyxHQUNkYixHQUFHLENBQUNZLEtBQUssQ0FBQ0UsTUFBTSxDQUFDLENBQUNDLEdBQVEsRUFBRUMsTUFBVyxLQUFJO1VBQ3pDRCxHQUFHLENBQUMsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLEVBQUUsQ0FBQyxHQUFHRCxNQUFNLENBQUNQLE9BQU8sSUFBSU8sTUFBTSxDQUFDRSxJQUFJO1VBQ3JELE9BQU9ILEdBQUc7UUFDZCxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQ0o7VUFBRSxDQUFDLEdBQUdmLEdBQUcsQ0FBQ2lCLElBQUksRUFBRSxHQUFHakIsR0FBRyxDQUFDUyxPQUFPLElBQUlULEdBQUcsQ0FBQ2tCO1FBQUk7T0FDdkQ7TUFDRCxPQUFPaEIsR0FBRyxDQUFDaUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNiLEtBQUssQ0FBQztJQUN0QztJQUNBSixJQUFJLENBQUNILEdBQUcsQ0FBQztFQUViLENBQUM7O0FBRURxQixPQUFBLENBQUFDLE9BQUEsR0FBZXZCLGVBQWUiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["yup_1","require","ExpressErrorYup","err","req","res","next","ValidationError","console","log","error","code","message","errors","join","inner","length","reduce","acc","curVal","path","type","status","json","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/user-information/server/src/middlewares/express_error_yup.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { ValidationError } from \"yup\";\n\nasync function ExpressErrorYup(\n    err: any,\n    req: Request,\n    res: Response,\n    next: NextFunction\n) {\n    if (err instanceof ValidationError) {\n        console.log('ERROR YUP VALIDATION');\n        const error = {\n            code: 422,\n            message: err.errors.join('<br/>') || 'Yup Validation Error !',\n            errors:\n                err.inner.length > 0\n                    ? err.inner.reduce((acc: any, curVal: any) => {\n                        acc[`${curVal.path}`] = curVal.message || curVal.type\n                        return acc\n                    }, {})\n                    : { [`${err.path}`]: err.message || err.type }\n        }\n        return res.status(422).json(error);\n    }\n    next(err)\n\n}\n\nexport default ExpressErrorYup"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAAA,KAAA,GAAAC,OAAA;AAEA,SAAeC,eAAeA,CAC1BC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYH,KAAA,CAAAO,eAAe,EAAE;MAChCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,MAAMC,KAAK,GAAG;QACVC,IAAI,EAAE,GAAG;QACTC,OAAO,EAAET,GAAG,CAACU,MAAM,CAACC,IAAI,CAAC,OAAO,CAAC,IAAI,wBAAwB;QAC7DD,MAAM,EACFV,GAAG,CAACY,KAAK,CAACC,MAAM,GAAG,CAAC,GACdb,GAAG,CAACY,KAAK,CAACE,MAAM,CAAC,CAACC,GAAQ,EAAEC,MAAW,KAAI;UACzCD,GAAG,CAAC,GAAGC,MAAM,CAACC,IAAI,EAAE,CAAC,GAAGD,MAAM,CAACP,OAAO,IAAIO,MAAM,CAACE,IAAI;UACrD,OAAOH,GAAG;QACd,CAAC,EAAE,EAAE,CAAC,GACJ;UAAE,CAAC,GAAGf,GAAG,CAACiB,IAAI,EAAE,GAAGjB,GAAG,CAACS,OAAO,IAAIT,GAAG,CAACkB;QAAI;OACvD;MACD,OAAOhB,GAAG,CAACiB,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,KAAK,CAAC;IACtC;IACAJ,IAAI,CAACH,GAAG,CAAC;EAEb,CAAC;;AAEDqB,OAAA,CAAAC,OAAA,GAAevB,eAAe","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\constants\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\constants\\\\constants_allowed_orginal.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst allowedOrigins = ['http://localhost:4200',\n// Frontend Web\n'http://localhost:3000',\n// Frontend Web\n\"http://181.215.68.165\", \"http://181.215.68.165:8080\", \"http://mindup-server.com\", \"https://mindup-server.com\", \"https://mindupapp.com\"];\nexports.default = allowedOrigins;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbGxvd2VkT3JpZ2lucyIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcY29uc3RhbnRzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9jb25zdGFudHMvY29uc3RhbnRzX2FsbG93ZWRfb3JnaW5hbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhbGxvd2VkT3JpZ2lucyA9IFtcbiAgICAnaHR0cDovL2xvY2FsaG9zdDo0MjAwJywgLy8gRnJvbnRlbmQgV2ViXG4gICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsIC8vIEZyb250ZW5kIFdlYlxuICAgIFwiaHR0cDovLzE4MS4yMTUuNjguMTY1XCIsXG4gICAgXCJodHRwOi8vMTgxLjIxNS42OC4xNjU6ODA4MFwiLFxuICAgIFwiaHR0cDovL21pbmR1cC1zZXJ2ZXIuY29tXCIsXG4gICAgXCJodHRwczovL21pbmR1cC1zZXJ2ZXIuY29tXCIsXG4gICAgXCJodHRwczovL21pbmR1cGFwcC5jb21cIlxuICBdXG4gIFxuICBleHBvcnQgZGVmYXVsdCBhbGxvd2VkT3JpZ2luc1xuICAiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsTUFBTUEsY0FBYyxHQUFHLENBQ25CLHVCQUF1QjtBQUFFO0FBQ3pCLHVCQUF1QjtBQUFFO0FBQ3pCLHVCQUF1QixFQUN2Qiw0QkFBNEIsRUFDNUIsMEJBQTBCLEVBQzFCLDJCQUEyQixFQUMzQix1QkFBdUIsQ0FDeEI7QUFFREMsT0FBQSxDQUFBQyxPQUFBLEdBQWVGLGNBQWMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["allowedOrigins","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\constants\\","sources":["D:/Personal/My-projects/user-information/server/src/constants/constants_allowed_orginal.ts"],"sourcesContent":["const allowedOrigins = [\n    'http://localhost:4200', // Frontend Web\n    'http://localhost:3000', // Frontend Web\n    \"http://181.215.68.165\",\n    \"http://181.215.68.165:8080\",\n    \"http://mindup-server.com\",\n    \"https://mindup-server.com\",\n    \"https://mindupapp.com\"\n  ]\n  \n  export default allowedOrigins\n  "],"mappings":";;;;;AAAA,MAAMA,cAAc,GAAG,CACnB,uBAAuB;AAAE;AACzB,uBAAuB;AAAE;AACzB,uBAAuB,EACvB,4BAA4B,EAC5B,0BAA0B,EAC1B,2BAA2B,EAC3B,uBAAuB,CACxB;AAEDC,OAAA,CAAAC,OAAA,GAAeF,cAAc","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_response.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst multer_1 = __importDefault(require(\"multer\"));\nconst lodash_1 = require(\"lodash\");\nconst response_error_1 = __importDefault(require(\"../modules/error/response_error\"));\nfunction generateErrorResponseError(e, code) {\n  return (0, lodash_1.isObject)(e.message) ? e.message : {\n    code,\n    message: e.message\n  };\n}\nfunction ExpressErrorResponse(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof multer_1.default.MulterError) {\n      return res.status(400).json(generateErrorResponseError(err, 400));\n    }\n    if (err instanceof response_error_1.default.BaseResponse) {\n      return res.status(err.statusCode).json(generateErrorResponseError(err, err.statusCode));\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorResponse;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXJfMSIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJsb2Rhc2hfMSIsInJlc3BvbnNlX2Vycm9yXzEiLCJnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvciIsImUiLCJjb2RlIiwiaXNPYmplY3QiLCJtZXNzYWdlIiwiRXhwcmVzc0Vycm9yUmVzcG9uc2UiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiZGVmYXVsdCIsIk11bHRlckVycm9yIiwic3RhdHVzIiwianNvbiIsIkJhc2VSZXNwb25zZSIsInN0YXR1c0NvZGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiJEOlxcUGVyc29uYWxcXE15LXByb2plY3RzXFx1c2VyLWluZm9ybWF0aW9uXFxzZXJ2ZXJcXHNyY1xcbWlkZGxld2FyZXNcXCIsInNvdXJjZXMiOlsiRDovUGVyc29uYWwvTXktcHJvamVjdHMvdXNlci1pbmZvcm1hdGlvbi9zZXJ2ZXIvc3JjL21pZGRsZXdhcmVzL2V4cHJlc3NfZXJyb3JfcmVzcG9uc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG11bHRlciBmcm9tICdtdWx0ZXInO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IFJlc3BvbnNlRXJyb3IgZnJvbSAnLi4vbW9kdWxlcy9lcnJvci9yZXNwb25zZV9lcnJvcic7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGU6IEVycm9yLCBjb2RlOiBOdW1iZXIpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUubWVzc2FnZSkgPyBlLm1lc3NhZ2UgOiB7IGNvZGUsIG1lc3NhZ2U6IGUubWVzc2FnZSB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEV4cHJlc3NFcnJvclJlc3BvbnNlKFxuICBlcnI6IGFueSxcbiAgcmVxOiBSZXF1ZXN0LFxuICByZXM6IFJlc3BvbnNlLFxuICBuZXh0OiBOZXh0RnVuY3Rpb25cbikge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgbXVsdGVyLk11bHRlckVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKGdlbmVyYXRlRXJyb3JSZXNwb25zZUVycm9yKGVyciwgNDAwKSlcbiAgfVxuXG4gIGlmIChlcnIgaW5zdGFuY2VvZiBSZXNwb25zZUVycm9yLkJhc2VSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoZXJyLnN0YXR1c0NvZGUpXG4gICAgICAuanNvbihnZW5lcmF0ZUVycm9yUmVzcG9uc2VFcnJvcihlcnIsIGVyci5zdGF0dXNDb2RlKSlcbiAgfVxuICBuZXh0KGVycilcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwcmVzc0Vycm9yUmVzcG9uc2VcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsZUFBQSxDQUFBQyxPQUFBO0FBQ0EsTUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBRUEsTUFBQUUsZ0JBQUEsR0FBQUgsZUFBQSxDQUFBQyxPQUFBO0FBRUEsU0FBU0csMEJBQTBCQSxDQUFDQyxDQUFRLEVBQUVDLElBQVk7RUFDeEQsT0FBTyxJQUFBSixRQUFBLENBQUFLLFFBQVEsRUFBQ0YsQ0FBQyxDQUFDRyxPQUFPLENBQUMsR0FBR0gsQ0FBQyxDQUFDRyxPQUFPLEdBQUc7SUFBRUYsSUFBSTtJQUFFRSxPQUFPLEVBQUVILENBQUMsQ0FBQ0c7RUFBTyxDQUFFO0FBQ3ZFO0FBRUEsU0FBZUMsb0JBQW9CQSxDQUNqQ0MsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWVgsUUFBQSxDQUFBZSxPQUFNLENBQUNDLFdBQVcsRUFBRTtNQUNyQyxPQUFPSCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDYiwwQkFBMEIsQ0FBQ00sR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ25FO0lBRUEsSUFBSUEsR0FBRyxZQUFZUCxnQkFBQSxDQUFBVyxPQUFhLENBQUNJLFlBQVksRUFBRTtNQUM3QyxPQUFPTixHQUFHLENBQ1BJLE1BQU0sQ0FBQ04sR0FBRyxDQUFDUyxVQUFVLENBQUMsQ0FDdEJGLElBQUksQ0FBQ2IsMEJBQTBCLENBQUNNLEdBQUcsRUFBRUEsR0FBRyxDQUFDUyxVQUFVLENBQUMsQ0FBQztJQUMxRDtJQUNBTixJQUFJLENBQUNILEdBQUcsQ0FBQztFQUNYLENBQUM7O0FBRURVLE9BQUEsQ0FBQU4sT0FBQSxHQUFlTCxvQkFBb0IiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["multer_1","__importDefault","require","lodash_1","response_error_1","generateErrorResponseError","e","code","isObject","message","ExpressErrorResponse","err","req","res","next","default","MulterError","status","json","BaseResponse","statusCode","exports"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/user-information/server/src/middlewares/express_error_response.ts"],"sourcesContent":["import multer from 'multer';\nimport { isObject } from 'lodash';\nimport { NextFunction, Request, Response } from 'express';\nimport ResponseError from '../modules/error/response_error';\n\nfunction generateErrorResponseError(e: Error, code: Number) {\n  return isObject(e.message) ? e.message : { code, message: e.message }\n}\n\nasync function ExpressErrorResponse(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof multer.MulterError) {\n    return res.status(400).json(generateErrorResponseError(err, 400))\n  }\n\n  if (err instanceof ResponseError.BaseResponse) {\n    return res\n      .status(err.statusCode)\n      .json(generateErrorResponseError(err, err.statusCode))\n  }\n  next(err)\n}\n\nexport default ExpressErrorResponse\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,QAAA,GAAAD,OAAA;AAEA,MAAAE,gBAAA,GAAAH,eAAA,CAAAC,OAAA;AAEA,SAASG,0BAA0BA,CAACC,CAAQ,EAAEC,IAAY;EACxD,OAAO,IAAAJ,QAAA,CAAAK,QAAQ,EAACF,CAAC,CAACG,OAAO,CAAC,GAAGH,CAAC,CAACG,OAAO,GAAG;IAAEF,IAAI;IAAEE,OAAO,EAAEH,CAAC,CAACG;EAAO,CAAE;AACvE;AAEA,SAAeC,oBAAoBA,CACjCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYX,QAAA,CAAAe,OAAM,CAACC,WAAW,EAAE;MACrC,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACb,0BAA0B,CAACM,GAAG,EAAE,GAAG,CAAC,CAAC;IACnE;IAEA,IAAIA,GAAG,YAAYP,gBAAA,CAAAW,OAAa,CAACI,YAAY,EAAE;MAC7C,OAAON,GAAG,CACPI,MAAM,CAACN,GAAG,CAACS,UAAU,CAAC,CACtBF,IAAI,CAACb,0BAA0B,CAACM,GAAG,EAAEA,GAAG,CAACS,UAAU,CAAC,CAAC;IAC1D;IACAN,IAAI,CAACH,GAAG,CAAC;EACX,CAAC;;AAEDU,OAAA,CAAAN,OAAA,GAAeL,oBAAoB","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_error_sequelize.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nconst lodash_1 = require(\"lodash\");\nconst sequelize_1 = require(\"sequelize\");\nfunction msg(message) {\n  return `Sequelize Error: ${message}`;\n}\nfunction ExpressErrorSequelize(err, req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (err instanceof sequelize_1.BaseError) {\n      if (err instanceof sequelize_1.EmptyResultError) {\n        return res.status(404).json({\n          code: 404,\n          message: msg('Data not found')\n        });\n      }\n      if (err instanceof sequelize_1.ValidationError) {\n        console.log('ERROR SEQUELIZE VALIDATION!!!');\n        const errors = (0, lodash_1.get)(err, 'errors', []);\n        const errorMessage = (0, lodash_1.get)(errors, '0.message', null);\n        const dataError = {\n          code: 400,\n          message: errorMessage ? `Validation error: ${errorMessage}` : err.message,\n          errors: errors.reduce((acc, curVal) => {\n            acc[curVal.path] = curVal.message;\n            return acc;\n          }, {})\n        };\n        console.log(dataError.message, dataError.errors);\n        return res.status(400).json(dataError);\n      }\n      return res.status(500).json({\n        code: 500,\n        message: msg(err.message)\n      });\n    }\n    next(err);\n  });\n}\nexports.default = ExpressErrorSequelize;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfMSIsInJlcXVpcmUiLCJzZXF1ZWxpemVfMSIsIm1zZyIsIm1lc3NhZ2UiLCJFeHByZXNzRXJyb3JTZXF1ZWxpemUiLCJlcnIiLCJyZXEiLCJyZXMiLCJuZXh0IiwiQmFzZUVycm9yIiwiRW1wdHlSZXN1bHRFcnJvciIsInN0YXR1cyIsImpzb24iLCJjb2RlIiwiVmFsaWRhdGlvbkVycm9yIiwiY29uc29sZSIsImxvZyIsImVycm9ycyIsImdldCIsImVycm9yTWVzc2FnZSIsImRhdGFFcnJvciIsInJlZHVjZSIsImFjYyIsImN1clZhbCIsInBhdGgiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiRDpcXFBlcnNvbmFsXFxNeS1wcm9qZWN0c1xcdXNlci1pbmZvcm1hdGlvblxcc2VydmVyXFxzcmNcXG1pZGRsZXdhcmVzXFwiLCJzb3VyY2VzIjpbIkQ6L1BlcnNvbmFsL015LXByb2plY3RzL3VzZXItaW5mb3JtYXRpb24vc2VydmVyL3NyYy9taWRkbGV3YXJlcy9leHByZXNzX2Vycm9yX3NlcXVlbGl6ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXQgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgTmV4dEZ1bmN0aW9uLCBSZXF1ZXN0LCBSZXNwb25zZSB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgRW1wdHlSZXN1bHRFcnJvciwgQmFzZUVycm9yLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tICdzZXF1ZWxpemUnO1xuXG5mdW5jdGlvbiBtc2cobWVzc2FnZTogc3RyaW5nKSB7XG4gIHJldHVybiBgU2VxdWVsaXplIEVycm9yOiAke21lc3NhZ2V9YFxufVxuXG5hc3luYyBmdW5jdGlvbiBFeHByZXNzRXJyb3JTZXF1ZWxpemUoXG4gIGVycjogYW55LFxuICByZXE6IFJlcXVlc3QsXG4gIHJlczogUmVzcG9uc2UsXG4gIG5leHQ6IE5leHRGdW5jdGlvblxuKSB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBCYXNlRXJyb3IpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRW1wdHlSZXN1bHRFcnJvcikge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBtc2coJ0RhdGEgbm90IGZvdW5kJyksXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBWYWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFUlJPUiBTRVFVRUxJWkUgVkFMSURBVElPTiEhIScpXG4gICAgICBjb25zdCBlcnJvcnM6IGFueVtdID0gZ2V0KGVyciwgJ2Vycm9ycycsIFtdKVxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZ2V0KGVycm9ycywgJzAubWVzc2FnZScsIG51bGwpXG5cbiAgICAgIGNvbnN0IGRhdGFFcnJvciA9IHtcbiAgICAgICAgY29kZTogNDAwLFxuICAgICAgICBtZXNzYWdlOiBlcnJvck1lc3NhZ2VcbiAgICAgICAgICA/IGBWYWxpZGF0aW9uIGVycm9yOiAke2Vycm9yTWVzc2FnZX1gXG4gICAgICAgICAgOiBlcnIubWVzc2FnZSxcbiAgICAgICAgZXJyb3JzOiBlcnJvcnMucmVkdWNlPGFueT4oKGFjYywgY3VyVmFsKSA9PiB7XG4gICAgICAgICAgYWNjW2N1clZhbC5wYXRoXSA9IGN1clZhbC5tZXNzYWdlXG4gICAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgICB9LCB7fSksXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUubG9nKGRhdGFFcnJvci5tZXNzYWdlLCBkYXRhRXJyb3IuZXJyb3JzKVxuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oZGF0YUVycm9yKVxuICAgIH1cblxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBjb2RlOiA1MDAsXG4gICAgICBtZXNzYWdlOiBtc2coZXJyLm1lc3NhZ2UpLFxuICAgIH0pXG4gIH1cblxuICBuZXh0KGVycilcbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhwcmVzc0Vycm9yU2VxdWVsaXplXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBRUEsTUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBRUEsU0FBU0UsR0FBR0EsQ0FBQ0MsT0FBZTtFQUMxQixPQUFPLG9CQUFvQkEsT0FBTyxFQUFFO0FBQ3RDO0FBRUEsU0FBZUMscUJBQXFCQSxDQUNsQ0MsR0FBUSxFQUNSQyxHQUFZLEVBQ1pDLEdBQWEsRUFDYkMsSUFBa0I7O0lBRWxCLElBQUlILEdBQUcsWUFBWUosV0FBQSxDQUFBUSxTQUFTLEVBQUU7TUFDNUIsSUFBSUosR0FBRyxZQUFZSixXQUFBLENBQUFTLGdCQUFnQixFQUFFO1FBQ25DLE9BQU9ILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFDMUJDLElBQUksRUFBRSxHQUFHO1VBQ1RWLE9BQU8sRUFBRUQsR0FBRyxDQUFDLGdCQUFnQjtTQUM5QixDQUFDO01BQ0o7TUFFQSxJQUFJRyxHQUFHLFlBQVlKLFdBQUEsQ0FBQWEsZUFBZSxFQUFFO1FBQ2xDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztRQUM1QyxNQUFNQyxNQUFNLEdBQVUsSUFBQWxCLFFBQUEsQ0FBQW1CLEdBQUcsRUFBQ2IsR0FBRyxFQUFFLFFBQVEsRUFBRSxFQUFFLENBQUM7UUFDNUMsTUFBTWMsWUFBWSxHQUFHLElBQUFwQixRQUFBLENBQUFtQixHQUFHLEVBQUNELE1BQU0sRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDO1FBRW5ELE1BQU1HLFNBQVMsR0FBRztVQUNoQlAsSUFBSSxFQUFFLEdBQUc7VUFDVFYsT0FBTyxFQUFFZ0IsWUFBWSxHQUNqQixxQkFBcUJBLFlBQVksRUFBRSxHQUNuQ2QsR0FBRyxDQUFDRixPQUFPO1VBQ2ZjLE1BQU0sRUFBRUEsTUFBTSxDQUFDSSxNQUFNLENBQU0sQ0FBQ0MsR0FBRyxFQUFFQyxNQUFNLEtBQUk7WUFDekNELEdBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUMsR0FBR0QsTUFBTSxDQUFDcEIsT0FBTztZQUNqQyxPQUFPbUIsR0FBRztVQUNaLENBQUMsRUFBRSxFQUFFO1NBQ047UUFFRFAsT0FBTyxDQUFDQyxHQUFHLENBQUNJLFNBQVMsQ0FBQ2pCLE9BQU8sRUFBRWlCLFNBQVMsQ0FBQ0gsTUFBTSxDQUFDO1FBRWhELE9BQU9WLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNRLFNBQVMsQ0FBQztNQUN4QztNQUVBLE9BQU9iLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7UUFDMUJDLElBQUksRUFBRSxHQUFHO1FBQ1RWLE9BQU8sRUFBRUQsR0FBRyxDQUFDRyxHQUFHLENBQUNGLE9BQU87T0FDekIsQ0FBQztJQUNKO0lBRUFLLElBQUksQ0FBQ0gsR0FBRyxDQUFDO0VBQ1gsQ0FBQzs7QUFFRG9CLE9BQUEsQ0FBQUMsT0FBQSxHQUFldEIscUJBQXFCIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["lodash_1","require","sequelize_1","msg","message","ExpressErrorSequelize","err","req","res","next","BaseError","EmptyResultError","status","json","code","ValidationError","console","log","errors","get","errorMessage","dataError","reduce","acc","curVal","path","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/user-information/server/src/middlewares/express_error_sequelize.ts"],"sourcesContent":["import { get } from 'lodash';\nimport { NextFunction, Request, Response } from 'express';\nimport { EmptyResultError, BaseError, ValidationError } from 'sequelize';\n\nfunction msg(message: string) {\n  return `Sequelize Error: ${message}`\n}\n\nasync function ExpressErrorSequelize(\n  err: any,\n  req: Request,\n  res: Response,\n  next: NextFunction\n) {\n  if (err instanceof BaseError) {\n    if (err instanceof EmptyResultError) {\n      return res.status(404).json({\n        code: 404,\n        message: msg('Data not found'),\n      })\n    }\n\n    if (err instanceof ValidationError) {\n      console.log('ERROR SEQUELIZE VALIDATION!!!')\n      const errors: any[] = get(err, 'errors', [])\n      const errorMessage = get(errors, '0.message', null)\n\n      const dataError = {\n        code: 400,\n        message: errorMessage\n          ? `Validation error: ${errorMessage}`\n          : err.message,\n        errors: errors.reduce<any>((acc, curVal) => {\n          acc[curVal.path] = curVal.message\n          return acc\n        }, {}),\n      }\n\n      console.log(dataError.message, dataError.errors)\n\n      return res.status(400).json(dataError)\n    }\n\n    return res.status(500).json({\n      code: 500,\n      message: msg(err.message),\n    })\n  }\n\n  next(err)\n}\n\nexport default ExpressErrorSequelize\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,QAAA,GAAAC,OAAA;AAEA,MAAAC,WAAA,GAAAD,OAAA;AAEA,SAASE,GAAGA,CAACC,OAAe;EAC1B,OAAO,oBAAoBA,OAAO,EAAE;AACtC;AAEA,SAAeC,qBAAqBA,CAClCC,GAAQ,EACRC,GAAY,EACZC,GAAa,EACbC,IAAkB;;IAElB,IAAIH,GAAG,YAAYJ,WAAA,CAAAQ,SAAS,EAAE;MAC5B,IAAIJ,GAAG,YAAYJ,WAAA,CAAAS,gBAAgB,EAAE;QACnC,OAAOH,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAC1BC,IAAI,EAAE,GAAG;UACTV,OAAO,EAAED,GAAG,CAAC,gBAAgB;SAC9B,CAAC;MACJ;MAEA,IAAIG,GAAG,YAAYJ,WAAA,CAAAa,eAAe,EAAE;QAClCC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC5C,MAAMC,MAAM,GAAU,IAAAlB,QAAA,CAAAmB,GAAG,EAACb,GAAG,EAAE,QAAQ,EAAE,EAAE,CAAC;QAC5C,MAAMc,YAAY,GAAG,IAAApB,QAAA,CAAAmB,GAAG,EAACD,MAAM,EAAE,WAAW,EAAE,IAAI,CAAC;QAEnD,MAAMG,SAAS,GAAG;UAChBP,IAAI,EAAE,GAAG;UACTV,OAAO,EAAEgB,YAAY,GACjB,qBAAqBA,YAAY,EAAE,GACnCd,GAAG,CAACF,OAAO;UACfc,MAAM,EAAEA,MAAM,CAACI,MAAM,CAAM,CAACC,GAAG,EAAEC,MAAM,KAAI;YACzCD,GAAG,CAACC,MAAM,CAACC,IAAI,CAAC,GAAGD,MAAM,CAACpB,OAAO;YACjC,OAAOmB,GAAG;UACZ,CAAC,EAAE,EAAE;SACN;QAEDP,OAAO,CAACC,GAAG,CAACI,SAAS,CAACjB,OAAO,EAAEiB,SAAS,CAACH,MAAM,CAAC;QAEhD,OAAOV,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACQ,SAAS,CAAC;MACxC;MAEA,OAAOb,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAC1BC,IAAI,EAAE,GAAG;QACTV,OAAO,EAAED,GAAG,CAACG,GAAG,CAACF,OAAO;OACzB,CAAC;IACJ;IAEAK,IAAI,CAACH,GAAG,CAAC;EACX,CAAC;;AAEDoB,OAAA,CAAAC,OAAA,GAAetB,qBAAqB","ignoreList":[]}},"mtime":1721952579000},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"filename\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\\\\src\\\\middlewares\\\\express_auto_handle_transaction.ts\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Personal\\\\My-projects\\\\user-information\\\\server\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.24.4:development":{"value":{"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nfunction ExpressAutoHandleTransaction(req, res, next) {\n  return __awaiter(this, void 0, void 0, function* () {\n    // Ensure _transaction is initialized\n    req._transaction = req._transaction || {};\n    res.once('finish', () => {\n      const {\n        _transaction\n      } = req;\n      if (!_transaction) {\n        return;\n      }\n      const transactionKeys = Object.keys(_transaction);\n      for (let i = 0; i < transactionKeys.length; i += 1) {\n        const txn = _transaction[transactionKeys[i]];\n        if (!(txn === null || txn === void 0 ? void 0 : txn.finished)) {\n          const endpoint = req.originalUrl;\n          console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n          console.log('AUTO COMMIT!!!');\n          txn.commit();\n        }\n      }\n    });\n    next();\n  });\n}\nexports.default = ExpressAutoHandleTransaction;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uIiwicmVxIiwicmVzIiwibmV4dCIsIl90cmFuc2FjdGlvbiIsIm9uY2UiLCJ0cmFuc2FjdGlvbktleXMiLCJPYmplY3QiLCJrZXlzIiwiaSIsImxlbmd0aCIsInR4biIsImZpbmlzaGVkIiwiZW5kcG9pbnQiLCJvcmlnaW5hbFVybCIsImNvbnNvbGUiLCJ3YXJuIiwibG9nIiwiY29tbWl0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6IkQ6XFxQZXJzb25hbFxcTXktcHJvamVjdHNcXHVzZXItaW5mb3JtYXRpb25cXHNlcnZlclxcc3JjXFxtaWRkbGV3YXJlc1xcIiwic291cmNlcyI6WyJEOi9QZXJzb25hbC9NeS1wcm9qZWN0cy91c2VyLWluZm9ybWF0aW9uL3NlcnZlci9zcmMvbWlkZGxld2FyZXMvZXhwcmVzc19hdXRvX2hhbmRsZV90cmFuc2FjdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFuc2FjdGlvbiB9IGZyb20gJ3NlcXVlbGl6ZSdcbmltcG9ydCB7IE5leHRGdW5jdGlvbiwgUmVzcG9uc2UsIFJlcXVlc3QgfSBmcm9tICdleHByZXNzJ1xuXG5hc3luYyBmdW5jdGlvbiBFeHByZXNzQXV0b0hhbmRsZVRyYW5zYWN0aW9uKFxuICByZXE6IGFueSxcbiAgcmVzOiBSZXNwb25zZSxcbiAgbmV4dDogTmV4dEZ1bmN0aW9uXG4pIHtcbiAgLy8gRW5zdXJlIF90cmFuc2FjdGlvbiBpcyBpbml0aWFsaXplZFxuICByZXEuX3RyYW5zYWN0aW9uID0gcmVxLl90cmFuc2FjdGlvbiB8fCB7fTtcblxuICByZXMub25jZSgnZmluaXNoJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgX3RyYW5zYWN0aW9uIH0gPSByZXE7XG5cbiAgICBpZiAoIV90cmFuc2FjdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRyYW5zYWN0aW9uS2V5cyA9IE9iamVjdC5rZXlzKF90cmFuc2FjdGlvbik7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFuc2FjdGlvbktleXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGNvbnN0IHR4biA9IF90cmFuc2FjdGlvblt0cmFuc2FjdGlvbktleXNbaV1dIGFzIFRyYW5zYWN0aW9uICYge1xuICAgICAgICBmaW5pc2hlZD86IHN0cmluZztcbiAgICAgIH07XG4gICAgICBpZiAoIXR4bj8uZmluaXNoZWQpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSByZXEub3JpZ2luYWxVcmw7XG4gICAgICAgIGNvbnNvbGUud2FybihgZW5kcG9pbnQgJHtlbmRwb2ludH0gcG90ZW50aWFsbHkgY2FuIGxlYWQgdG8gYnVnYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBVVRPIENPTU1JVCEhIScpO1xuICAgICAgICB0eG4uY29tbWl0KCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV4cHJlc3NBdXRvSGFuZGxlVHJhbnNhY3Rpb247XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR0EsU0FBZUEsNEJBQTRCQSxDQUN6Q0MsR0FBUSxFQUNSQyxHQUFhLEVBQ2JDLElBQWtCOztJQUVsQjtJQUNBRixHQUFHLENBQUNHLFlBQVksR0FBR0gsR0FBRyxDQUFDRyxZQUFZLElBQUksRUFBRTtJQUV6Q0YsR0FBRyxDQUFDRyxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQUs7TUFDdEIsTUFBTTtRQUFFRDtNQUFZLENBQUUsR0FBR0gsR0FBRztNQUU1QixJQUFJLENBQUNHLFlBQVksRUFBRTtRQUNqQjtNQUNGO01BRUEsTUFBTUUsZUFBZSxHQUFHQyxNQUFNLENBQUNDLElBQUksQ0FBQ0osWUFBWSxDQUFDO01BQ2pELEtBQUssSUFBSUssQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxlQUFlLENBQUNJLE1BQU0sRUFBRUQsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsRCxNQUFNRSxHQUFHLEdBQUdQLFlBQVksQ0FBQ0UsZUFBZSxDQUFDRyxDQUFDLENBQUMsQ0FFMUM7UUFDRCxJQUFJLEVBQUNFLEdBQUcsYUFBSEEsR0FBRyx1QkFBSEEsR0FBRyxDQUFFQyxRQUFRLEdBQUU7VUFDbEIsTUFBTUMsUUFBUSxHQUFHWixHQUFHLENBQUNhLFdBQVc7VUFDaENDLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLFlBQVlILFFBQVEsOEJBQThCLENBQUM7VUFDaEVFLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdCQUFnQixDQUFDO1VBQzdCTixHQUFHLENBQUNPLE1BQU0sRUFBRTtRQUNkO01BQ0Y7SUFDRixDQUFDLENBQUM7SUFFRmYsSUFBSSxFQUFFO0VBQ1IsQ0FBQzs7QUFFRGdCLE9BQUEsQ0FBQUMsT0FBQSxHQUFlcEIsNEJBQTRCIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["ExpressAutoHandleTransaction","req","res","next","_transaction","once","transactionKeys","Object","keys","i","length","txn","finished","endpoint","originalUrl","console","warn","log","commit","exports","default"],"sourceRoot":"D:\\Personal\\My-projects\\user-information\\server\\src\\middlewares\\","sources":["D:/Personal/My-projects/user-information/server/src/middlewares/express_auto_handle_transaction.ts"],"sourcesContent":["import { Transaction } from 'sequelize'\nimport { NextFunction, Response, Request } from 'express'\n\nasync function ExpressAutoHandleTransaction(\n  req: any,\n  res: Response,\n  next: NextFunction\n) {\n  // Ensure _transaction is initialized\n  req._transaction = req._transaction || {};\n\n  res.once('finish', () => {\n    const { _transaction } = req;\n\n    if (!_transaction) {\n      return;\n    }\n\n    const transactionKeys = Object.keys(_transaction);\n    for (let i = 0; i < transactionKeys.length; i += 1) {\n      const txn = _transaction[transactionKeys[i]] as Transaction & {\n        finished?: string;\n      };\n      if (!txn?.finished) {\n        const endpoint = req.originalUrl;\n        console.warn(`endpoint ${endpoint} potentially can lead to bug`);\n        console.log('AUTO COMMIT!!!');\n        txn.commit();\n      }\n    }\n  });\n\n  next();\n}\n\nexport default ExpressAutoHandleTransaction;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAAeA,4BAA4BA,CACzCC,GAAQ,EACRC,GAAa,EACbC,IAAkB;;IAElB;IACAF,GAAG,CAACG,YAAY,GAAGH,GAAG,CAACG,YAAY,IAAI,EAAE;IAEzCF,GAAG,CAACG,IAAI,CAAC,QAAQ,EAAE,MAAK;MACtB,MAAM;QAAED;MAAY,CAAE,GAAGH,GAAG;MAE5B,IAAI,CAACG,YAAY,EAAE;QACjB;MACF;MAEA,MAAME,eAAe,GAAGC,MAAM,CAACC,IAAI,CAACJ,YAAY,CAAC;MACjD,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,eAAe,CAACI,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClD,MAAME,GAAG,GAAGP,YAAY,CAACE,eAAe,CAACG,CAAC,CAAC,CAE1C;QACD,IAAI,EAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,QAAQ,GAAE;UAClB,MAAMC,QAAQ,GAAGZ,GAAG,CAACa,WAAW;UAChCC,OAAO,CAACC,IAAI,CAAC,YAAYH,QAAQ,8BAA8B,CAAC;UAChEE,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;UAC7BN,GAAG,CAACO,MAAM,EAAE;QACd;MACF;IACF,CAAC,CAAC;IAEFf,IAAI,EAAE;EACR,CAAC;;AAEDgB,OAAA,CAAAC,OAAA,GAAepB,4BAA4B","ignoreList":[]}},"mtime":1722386151643}}